{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\PFI\\\\Desktop\\\\ATTENDANCE\\\\ATTENDANCE\\\\src\\\\pages\\\\StudentProfile.js\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect } from 'react';\nimport { useNavigate } from 'react-router-dom';\nimport { supabase } from '../supabase/supabase';\nimport { useAuth } from '../contexts/AuthContext';\nimport Layout from '../components/Layout';\nimport Card from '../components/Card';\nimport Button from '../components/Button';\nimport Alert from '../components/Alert';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst StudentProfile = () => {\n  _s();\n  const {\n    currentUser,\n    userRole,\n    loading\n  } = useAuth();\n  const navigate = useNavigate();\n  const [profileData, setProfileData] = useState(null);\n  const [isLoading, setIsLoading] = useState(true);\n  const [error, setError] = useState(null);\n  const [success, setSuccess] = useState(null);\n  const [isEditing, setIsEditing] = useState(false);\n  const [showPasswordForm, setShowPasswordForm] = useState(false);\n  const [passwordData, setPasswordData] = useState({\n    currentPassword: '',\n    newPassword: '',\n    confirmPassword: ''\n  });\n  const [formData, setFormData] = useState({\n    name: '',\n    email: '',\n    matricule: ''\n  });\n\n  // Protect route - only allow students\n  useEffect(() => {\n    if (loading) return;\n    if (!currentUser || userRole !== 'student') {\n      navigate('/student');\n      return;\n    }\n    fetchStudentProfile();\n  }, [currentUser, userRole, loading, navigate]);\n  const fetchStudentProfile = async () => {\n    try {\n      setIsLoading(true);\n      setError(null);\n      const {\n        data,\n        error: fetchError\n      } = await supabase.from('users').select('id, name, email, matricule, role').eq('id', currentUser.id).single();\n      if (fetchError) throw fetchError;\n      setProfileData(data);\n      setFormData({\n        name: data.name,\n        email: data.email,\n        matricule: data.matricule\n      });\n    } catch (err) {\n      setError(err.message);\n    } finally {\n      setIsLoading(false);\n    }\n  };\n  const handleInputChange = e => {\n    const {\n      name,\n      value\n    } = e.target;\n    setFormData(prev => ({\n      ...prev,\n      [name]: value\n    }));\n  };\n  const handleSaveProfile = async () => {\n    try {\n      setError(null);\n      const {\n        error: updateError\n      } = await supabase.from('users').update({\n        name: formData.name,\n        email: formData.email\n      }).eq('id', currentUser.id);\n      if (updateError) throw updateError;\n      setProfileData(prev => ({\n        ...prev,\n        name: formData.name,\n        email: formData.email\n      }));\n      setIsEditing(false);\n      setSuccess('Profile updated successfully!');\n      setTimeout(() => setSuccess(null), 3000);\n    } catch (err) {\n      setError(err.message);\n    }\n  };\n  const handlePasswordChange = async e => {\n    e.preventDefault();\n    setError(null);\n\n    // Validate password fields\n    if (!passwordData.currentPassword) {\n      setError('Please enter your current password');\n      return;\n    }\n    if (!passwordData.newPassword) {\n      setError('Please enter a new password');\n      return;\n    }\n    if (passwordData.newPassword.length < 6) {\n      setError('New password must be at least 6 characters');\n      return;\n    }\n    if (passwordData.newPassword !== passwordData.confirmPassword) {\n      setError('New password and confirmation do not match');\n      return;\n    }\n    try {\n      // Update password in Supabase Auth\n      const {\n        error: updateError\n      } = await supabase.auth.updateUser({\n        password: passwordData.newPassword\n      });\n      if (updateError) throw updateError;\n      setSuccess('Password changed successfully!');\n      setPasswordData({\n        currentPassword: '',\n        newPassword: '',\n        confirmPassword: ''\n      });\n      setShowPasswordForm(false);\n      setTimeout(() => setSuccess(null), 3000);\n    } catch (err) {\n      setError(err.message || 'Failed to change password');\n    }\n  };\n  if (isLoading) {\n    return /*#__PURE__*/_jsxDEV(Layout, {\n      role: \"student\",\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          display: 'flex',\n          alignItems: 'center',\n          justifyContent: 'center',\n          height: '400px'\n        },\n        children: /*#__PURE__*/_jsxDEV(\"p\", {\n          children: \"Loading profile...\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 151,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 150,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 149,\n      columnNumber: 7\n    }, this);\n  }\n  return /*#__PURE__*/_jsxDEV(Layout, {\n    role: \"student\",\n    children: /*#__PURE__*/_jsxDEV(\"div\", {\n      style: {\n        maxWidth: '600px',\n        margin: '0 auto'\n      },\n      children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n        children: \"Student Profile\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 160,\n        columnNumber: 9\n      }, this), error && /*#__PURE__*/_jsxDEV(Alert, {\n        type: \"error\",\n        message: error\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 162,\n        columnNumber: 19\n      }, this), success && /*#__PURE__*/_jsxDEV(Alert, {\n        type: \"success\",\n        message: success\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 163,\n        columnNumber: 21\n      }, this), profileData && /*#__PURE__*/_jsxDEV(\"div\", {\n        children: [/*#__PURE__*/_jsxDEV(Card, {\n          children: /*#__PURE__*/_jsxDEV(\"div\", {\n            style: {\n              padding: '20px'\n            },\n            children: !isEditing ? /*#__PURE__*/_jsxDEV(\"div\", {\n              children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                style: {\n                  marginBottom: '15px'\n                },\n                children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                  style: {\n                    display: 'block',\n                    fontSize: '12px',\n                    color: '#666',\n                    marginBottom: '5px'\n                  },\n                  children: \"Name\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 173,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                  style: {\n                    margin: 0,\n                    fontSize: '16px',\n                    fontWeight: '500'\n                  },\n                  children: profileData.name\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 176,\n                  columnNumber: 21\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 172,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                style: {\n                  marginBottom: '15px'\n                },\n                children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                  style: {\n                    display: 'block',\n                    fontSize: '12px',\n                    color: '#666',\n                    marginBottom: '5px'\n                  },\n                  children: \"Matricule\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 182,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                  style: {\n                    margin: 0,\n                    fontSize: '16px',\n                    fontWeight: '500'\n                  },\n                  children: profileData.matricule\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 185,\n                  columnNumber: 21\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 181,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                style: {\n                  marginBottom: '15px'\n                },\n                children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                  style: {\n                    display: 'block',\n                    fontSize: '12px',\n                    color: '#666',\n                    marginBottom: '5px'\n                  },\n                  children: \"Email\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 191,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                  style: {\n                    margin: 0,\n                    fontSize: '16px',\n                    fontWeight: '500'\n                  },\n                  children: profileData.email\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 194,\n                  columnNumber: 21\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 190,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                style: {\n                  marginBottom: '15px'\n                },\n                children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                  style: {\n                    display: 'block',\n                    fontSize: '12px',\n                    color: '#666',\n                    marginBottom: '5px'\n                  },\n                  children: \"Role\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 200,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                  style: {\n                    margin: 0,\n                    fontSize: '16px',\n                    fontWeight: '500',\n                    textTransform: 'capitalize'\n                  },\n                  children: profileData.role\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 203,\n                  columnNumber: 21\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 199,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(Button, {\n                onClick: () => setIsEditing(true),\n                style: {\n                  marginTop: '20px'\n                },\n                children: \"Edit Profile\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 208,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 171,\n              columnNumber: 19\n            }, this) : /*#__PURE__*/_jsxDEV(\"div\", {\n              children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                style: {\n                  marginBottom: '15px'\n                },\n                children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                  style: {\n                    display: 'block',\n                    fontSize: '12px',\n                    color: '#666',\n                    marginBottom: '5px'\n                  },\n                  children: \"Name\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 218,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n                  type: \"text\",\n                  name: \"name\",\n                  value: formData.name,\n                  onChange: handleInputChange,\n                  style: {\n                    width: '100%',\n                    padding: '8px',\n                    border: '1px solid #ddd',\n                    borderRadius: '4px',\n                    fontSize: '14px',\n                    boxSizing: 'border-box'\n                  }\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 221,\n                  columnNumber: 21\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 217,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                style: {\n                  marginBottom: '15px'\n                },\n                children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                  style: {\n                    display: 'block',\n                    fontSize: '12px',\n                    color: '#666',\n                    marginBottom: '5px'\n                  },\n                  children: \"Email\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 238,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n                  type: \"email\",\n                  name: \"email\",\n                  value: formData.email,\n                  onChange: handleInputChange,\n                  style: {\n                    width: '100%',\n                    padding: '8px',\n                    border: '1px solid #ddd',\n                    borderRadius: '4px',\n                    fontSize: '14px',\n                    boxSizing: 'border-box'\n                  }\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 241,\n                  columnNumber: 21\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 237,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                style: {\n                  marginBottom: '15px'\n                },\n                children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                  style: {\n                    display: 'block',\n                    fontSize: '12px',\n                    color: '#666',\n                    marginBottom: '5px'\n                  },\n                  children: \"Matricule (Read-only)\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 258,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                  style: {\n                    margin: 0,\n                    padding: '8px',\n                    backgroundColor: '#f5f5f5',\n                    borderRadius: '4px'\n                  },\n                  children: formData.matricule\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 261,\n                  columnNumber: 21\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 257,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                style: {\n                  display: 'flex',\n                  gap: '10px',\n                  marginTop: '20px'\n                },\n                children: [/*#__PURE__*/_jsxDEV(Button, {\n                  onClick: handleSaveProfile,\n                  style: {\n                    flex: 1\n                  },\n                  children: \"Save Changes\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 267,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(Button, {\n                  onClick: () => {\n                    setIsEditing(false);\n                    setFormData({\n                      name: profileData.name,\n                      email: profileData.email,\n                      matricule: profileData.matricule\n                    });\n                  },\n                  style: {\n                    flex: 1,\n                    backgroundColor: '#6c757d'\n                  },\n                  children: \"Cancel\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 270,\n                  columnNumber: 21\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 266,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 216,\n              columnNumber: 17\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 169,\n            columnNumber: 15\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 168,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(Card, {\n          style: {\n            marginTop: '20px'\n          },\n          children: /*#__PURE__*/_jsxDEV(\"div\", {\n            style: {\n              padding: '20px'\n            },\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              style: {\n                display: 'flex',\n                justifyContent: 'space-between',\n                alignItems: 'center',\n                marginBottom: '15px'\n              },\n              children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n                style: {\n                  margin: 0,\n                  fontSize: '18px',\n                  fontWeight: '600'\n                },\n                children: \"Change Password\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 293,\n                columnNumber: 19\n              }, this), !showPasswordForm && /*#__PURE__*/_jsxDEV(Button, {\n                onClick: () => setShowPasswordForm(true),\n                style: {\n                  fontSize: '14px',\n                  padding: '6px 12px'\n                },\n                children: \"Change Password\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 295,\n                columnNumber: 21\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 292,\n              columnNumber: 17\n            }, this), showPasswordForm && /*#__PURE__*/_jsxDEV(\"form\", {\n              onSubmit: handlePasswordChange,\n              children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                style: {\n                  marginBottom: '15px'\n                },\n                children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                  style: {\n                    display: 'block',\n                    fontSize: '12px',\n                    color: '#666',\n                    marginBottom: '5px'\n                  },\n                  children: \"Current Password\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 307,\n                  columnNumber: 23\n                }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n                  type: \"password\",\n                  value: passwordData.currentPassword,\n                  onChange: e => setPasswordData(prev => ({\n                    ...prev,\n                    currentPassword: e.target.value\n                  })),\n                  style: {\n                    width: '100%',\n                    padding: '8px',\n                    border: '1px solid #ddd',\n                    borderRadius: '4px',\n                    fontSize: '14px',\n                    boxSizing: 'border-box'\n                  },\n                  placeholder: \"Enter current password\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 310,\n                  columnNumber: 23\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 306,\n                columnNumber: 21\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                style: {\n                  marginBottom: '15px'\n                },\n                children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                  style: {\n                    display: 'block',\n                    fontSize: '12px',\n                    color: '#666',\n                    marginBottom: '5px'\n                  },\n                  children: \"New Password\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 327,\n                  columnNumber: 23\n                }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n                  type: \"password\",\n                  value: passwordData.newPassword,\n                  onChange: e => setPasswordData(prev => ({\n                    ...prev,\n                    newPassword: e.target.value\n                  })),\n                  style: {\n                    width: '100%',\n                    padding: '8px',\n                    border: '1px solid #ddd',\n                    borderRadius: '4px',\n                    fontSize: '14px',\n                    boxSizing: 'border-box'\n                  },\n                  placeholder: \"Enter new password (min 6 characters)\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 330,\n                  columnNumber: 23\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 326,\n                columnNumber: 21\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                style: {\n                  marginBottom: '15px'\n                },\n                children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                  style: {\n                    display: 'block',\n                    fontSize: '12px',\n                    color: '#666',\n                    marginBottom: '5px'\n                  },\n                  children: \"Confirm New Password\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 347,\n                  columnNumber: 23\n                }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n                  type: \"password\",\n                  value: passwordData.confirmPassword,\n                  onChange: e => setPasswordData(prev => ({\n                    ...prev,\n                    confirmPassword: e.target.value\n                  })),\n                  style: {\n                    width: '100%',\n                    padding: '8px',\n                    border: '1px solid #ddd',\n                    borderRadius: '4px',\n                    fontSize: '14px',\n                    boxSizing: 'border-box'\n                  },\n                  placeholder: \"Confirm new password\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 350,\n                  columnNumber: 23\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 346,\n                columnNumber: 21\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                style: {\n                  display: 'flex',\n                  gap: '10px',\n                  marginTop: '20px'\n                },\n                children: [/*#__PURE__*/_jsxDEV(Button, {\n                  type: \"submit\",\n                  style: {\n                    flex: 1\n                  },\n                  children: \"Update Password\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 367,\n                  columnNumber: 23\n                }, this), /*#__PURE__*/_jsxDEV(Button, {\n                  type: \"button\",\n                  onClick: () => {\n                    setShowPasswordForm(false);\n                    setPasswordData({\n                      currentPassword: '',\n                      newPassword: '',\n                      confirmPassword: ''\n                    });\n                  },\n                  style: {\n                    flex: 1,\n                    backgroundColor: '#6c757d'\n                  },\n                  children: \"Cancel\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 370,\n                  columnNumber: 23\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 366,\n                columnNumber: 21\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 305,\n              columnNumber: 19\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 291,\n            columnNumber: 15\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 290,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 166,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 159,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 158,\n    columnNumber: 5\n  }, this);\n};\n_s(StudentProfile, \"cl+DX2Vt7Bh5cd6YezYQGn5CTps=\", false, function () {\n  return [useAuth, useNavigate];\n});\n_c = StudentProfile;\nexport default StudentProfile;\nvar _c;\n$RefreshReg$(_c, \"StudentProfile\");","map":{"version":3,"names":["React","useState","useEffect","useNavigate","supabase","useAuth","Layout","Card","Button","Alert","jsxDEV","_jsxDEV","StudentProfile","_s","currentUser","userRole","loading","navigate","profileData","setProfileData","isLoading","setIsLoading","error","setError","success","setSuccess","isEditing","setIsEditing","showPasswordForm","setShowPasswordForm","passwordData","setPasswordData","currentPassword","newPassword","confirmPassword","formData","setFormData","name","email","matricule","fetchStudentProfile","data","fetchError","from","select","eq","id","single","err","message","handleInputChange","e","value","target","prev","handleSaveProfile","updateError","update","setTimeout","handlePasswordChange","preventDefault","length","auth","updateUser","password","role","children","style","display","alignItems","justifyContent","height","fileName","_jsxFileName","lineNumber","columnNumber","maxWidth","margin","type","padding","marginBottom","fontSize","color","fontWeight","textTransform","onClick","marginTop","onChange","width","border","borderRadius","boxSizing","backgroundColor","gap","flex","onSubmit","placeholder","_c","$RefreshReg$"],"sources":["C:/Users/PFI/Desktop/ATTENDANCE/ATTENDANCE/src/pages/StudentProfile.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\r\nimport { useNavigate } from 'react-router-dom';\r\nimport { supabase } from '../supabase/supabase';\r\nimport { useAuth } from '../contexts/AuthContext';\r\nimport Layout from '../components/Layout';\r\nimport Card from '../components/Card';\r\nimport Button from '../components/Button';\r\nimport Alert from '../components/Alert';\r\n\r\nconst StudentProfile = () => {\r\n  const { currentUser, userRole, loading } = useAuth();\r\n  const navigate = useNavigate();\r\n  \r\n  const [profileData, setProfileData] = useState(null);\r\n  const [isLoading, setIsLoading] = useState(true);\r\n  const [error, setError] = useState(null);\r\n  const [success, setSuccess] = useState(null);\r\n  const [isEditing, setIsEditing] = useState(false);\r\n  const [showPasswordForm, setShowPasswordForm] = useState(false);\r\n  const [passwordData, setPasswordData] = useState({\r\n    currentPassword: '',\r\n    newPassword: '',\r\n    confirmPassword: ''\r\n  });\r\n  const [formData, setFormData] = useState({\r\n    name: '',\r\n    email: '',\r\n    matricule: ''\r\n  });\r\n\r\n  // Protect route - only allow students\r\n  useEffect(() => {\r\n    if (loading) return;\r\n\r\n    if (!currentUser || userRole !== 'student') {\r\n      navigate('/student');\r\n      return;\r\n    }\r\n\r\n    fetchStudentProfile();\r\n  }, [currentUser, userRole, loading, navigate]);\r\n\r\n  const fetchStudentProfile = async () => {\r\n    try {\r\n      setIsLoading(true);\r\n      setError(null);\r\n\r\n      const { data, error: fetchError } = await supabase\r\n        .from('users')\r\n        .select('id, name, email, matricule, role')\r\n        .eq('id', currentUser.id)\r\n        .single();\r\n\r\n      if (fetchError) throw fetchError;\r\n\r\n      setProfileData(data);\r\n      setFormData({\r\n        name: data.name,\r\n        email: data.email,\r\n        matricule: data.matricule\r\n      });\r\n    } catch (err) {\r\n      setError(err.message);\r\n    } finally {\r\n      setIsLoading(false);\r\n    }\r\n  };\r\n\r\n  const handleInputChange = (e) => {\r\n    const { name, value } = e.target;\r\n    setFormData(prev => ({\r\n      ...prev,\r\n      [name]: value\r\n    }));\r\n  };\r\n\r\n  const handleSaveProfile = async () => {\r\n    try {\r\n      setError(null);\r\n\r\n      const { error: updateError } = await supabase\r\n        .from('users')\r\n        .update({\r\n          name: formData.name,\r\n          email: formData.email\r\n        })\r\n        .eq('id', currentUser.id);\r\n\r\n      if (updateError) throw updateError;\r\n\r\n      setProfileData(prev => ({\r\n        ...prev,\r\n        name: formData.name,\r\n        email: formData.email\r\n      }));\r\n      setIsEditing(false);\r\n      setSuccess('Profile updated successfully!');\r\n      setTimeout(() => setSuccess(null), 3000);\r\n    } catch (err) {\r\n      setError(err.message);\r\n    }\r\n  };\r\n\r\n  const handlePasswordChange = async (e) => {\r\n    e.preventDefault();\r\n    setError(null);\r\n\r\n    // Validate password fields\r\n    if (!passwordData.currentPassword) {\r\n      setError('Please enter your current password');\r\n      return;\r\n    }\r\n    if (!passwordData.newPassword) {\r\n      setError('Please enter a new password');\r\n      return;\r\n    }\r\n    if (passwordData.newPassword.length < 6) {\r\n      setError('New password must be at least 6 characters');\r\n      return;\r\n    }\r\n    if (passwordData.newPassword !== passwordData.confirmPassword) {\r\n      setError('New password and confirmation do not match');\r\n      return;\r\n    }\r\n\r\n    try {\r\n      // Update password in Supabase Auth\r\n      const { error: updateError } = await supabase.auth.updateUser({\r\n        password: passwordData.newPassword\r\n      });\r\n\r\n      if (updateError) throw updateError;\r\n\r\n      setSuccess('Password changed successfully!');\r\n      setPasswordData({\r\n        currentPassword: '',\r\n        newPassword: '',\r\n        confirmPassword: ''\r\n      });\r\n      setShowPasswordForm(false);\r\n      setTimeout(() => setSuccess(null), 3000);\r\n    } catch (err) {\r\n      setError(err.message || 'Failed to change password');\r\n    }\r\n  };\r\n\r\n  if (isLoading) {\r\n    return (\r\n      <Layout role=\"student\">\r\n        <div style={{ display: 'flex', alignItems: 'center', justifyContent: 'center', height: '400px' }}>\r\n          <p>Loading profile...</p>\r\n        </div>\r\n      </Layout>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <Layout role=\"student\">\r\n      <div style={{ maxWidth: '600px', margin: '0 auto' }}>\r\n        <h1>Student Profile</h1>\r\n\r\n        {error && <Alert type=\"error\" message={error} />}\r\n        {success && <Alert type=\"success\" message={success} />}\r\n\r\n        {profileData && (\r\n          <div>\r\n            {/* Personal Information Card */}\r\n            <Card>\r\n              <div style={{ padding: '20px' }}>\r\n                {!isEditing ? (\r\n                  <div>\r\n                  <div style={{ marginBottom: '15px' }}>\r\n                    <label style={{ display: 'block', fontSize: '12px', color: '#666', marginBottom: '5px' }}>\r\n                      Name\r\n                    </label>\r\n                    <p style={{ margin: 0, fontSize: '16px', fontWeight: '500' }}>\r\n                      {profileData.name}\r\n                    </p>\r\n                  </div>\r\n\r\n                  <div style={{ marginBottom: '15px' }}>\r\n                    <label style={{ display: 'block', fontSize: '12px', color: '#666', marginBottom: '5px' }}>\r\n                      Matricule\r\n                    </label>\r\n                    <p style={{ margin: 0, fontSize: '16px', fontWeight: '500' }}>\r\n                      {profileData.matricule}\r\n                    </p>\r\n                  </div>\r\n\r\n                  <div style={{ marginBottom: '15px' }}>\r\n                    <label style={{ display: 'block', fontSize: '12px', color: '#666', marginBottom: '5px' }}>\r\n                      Email\r\n                    </label>\r\n                    <p style={{ margin: 0, fontSize: '16px', fontWeight: '500' }}>\r\n                      {profileData.email}\r\n                    </p>\r\n                  </div>\r\n\r\n                  <div style={{ marginBottom: '15px' }}>\r\n                    <label style={{ display: 'block', fontSize: '12px', color: '#666', marginBottom: '5px' }}>\r\n                      Role\r\n                    </label>\r\n                    <p style={{ margin: 0, fontSize: '16px', fontWeight: '500', textTransform: 'capitalize' }}>\r\n                      {profileData.role}\r\n                    </p>\r\n                  </div>\r\n\r\n                  <Button \r\n                    onClick={() => setIsEditing(true)}\r\n                    style={{ marginTop: '20px' }}\r\n                  >\r\n                    Edit Profile\r\n                  </Button>\r\n                </div>\r\n              ) : (\r\n                <div>\r\n                  <div style={{ marginBottom: '15px' }}>\r\n                    <label style={{ display: 'block', fontSize: '12px', color: '#666', marginBottom: '5px' }}>\r\n                      Name\r\n                    </label>\r\n                    <input\r\n                      type=\"text\"\r\n                      name=\"name\"\r\n                      value={formData.name}\r\n                      onChange={handleInputChange}\r\n                      style={{\r\n                        width: '100%',\r\n                        padding: '8px',\r\n                        border: '1px solid #ddd',\r\n                        borderRadius: '4px',\r\n                        fontSize: '14px',\r\n                        boxSizing: 'border-box'\r\n                      }}\r\n                    />\r\n                  </div>\r\n\r\n                  <div style={{ marginBottom: '15px' }}>\r\n                    <label style={{ display: 'block', fontSize: '12px', color: '#666', marginBottom: '5px' }}>\r\n                      Email\r\n                    </label>\r\n                    <input\r\n                      type=\"email\"\r\n                      name=\"email\"\r\n                      value={formData.email}\r\n                      onChange={handleInputChange}\r\n                      style={{\r\n                        width: '100%',\r\n                        padding: '8px',\r\n                        border: '1px solid #ddd',\r\n                        borderRadius: '4px',\r\n                        fontSize: '14px',\r\n                        boxSizing: 'border-box'\r\n                      }}\r\n                    />\r\n                  </div>\r\n\r\n                  <div style={{ marginBottom: '15px' }}>\r\n                    <label style={{ display: 'block', fontSize: '12px', color: '#666', marginBottom: '5px' }}>\r\n                      Matricule (Read-only)\r\n                    </label>\r\n                    <p style={{ margin: 0, padding: '8px', backgroundColor: '#f5f5f5', borderRadius: '4px' }}>\r\n                      {formData.matricule}\r\n                    </p>\r\n                  </div>\r\n\r\n                  <div style={{ display: 'flex', gap: '10px', marginTop: '20px' }}>\r\n                    <Button onClick={handleSaveProfile} style={{ flex: 1 }}>\r\n                      Save Changes\r\n                    </Button>\r\n                    <Button \r\n                      onClick={() => {\r\n                        setIsEditing(false);\r\n                        setFormData({\r\n                          name: profileData.name,\r\n                          email: profileData.email,\r\n                          matricule: profileData.matricule\r\n                        });\r\n                      }}\r\n                      style={{ flex: 1, backgroundColor: '#6c757d' }}\r\n                    >\r\n                      Cancel\r\n                    </Button>\r\n                  </div>\r\n                  </div>\r\n                )}\r\n              </div>\r\n            </Card>\r\n\r\n            {/* Password Change Card */}\r\n            <Card style={{ marginTop: '20px' }}>\r\n              <div style={{ padding: '20px' }}>\r\n                <div style={{ display: 'flex', justifyContent: 'space-between', alignItems: 'center', marginBottom: '15px' }}>\r\n                  <h2 style={{ margin: 0, fontSize: '18px', fontWeight: '600' }}>Change Password</h2>\r\n                  {!showPasswordForm && (\r\n                    <Button \r\n                      onClick={() => setShowPasswordForm(true)}\r\n                      style={{ fontSize: '14px', padding: '6px 12px' }}\r\n                    >\r\n                      Change Password\r\n                    </Button>\r\n                  )}\r\n                </div>\r\n\r\n                {showPasswordForm && (\r\n                  <form onSubmit={handlePasswordChange}>\r\n                    <div style={{ marginBottom: '15px' }}>\r\n                      <label style={{ display: 'block', fontSize: '12px', color: '#666', marginBottom: '5px' }}>\r\n                        Current Password\r\n                      </label>\r\n                      <input\r\n                        type=\"password\"\r\n                        value={passwordData.currentPassword}\r\n                        onChange={(e) => setPasswordData(prev => ({ ...prev, currentPassword: e.target.value }))}\r\n                        style={{\r\n                          width: '100%',\r\n                          padding: '8px',\r\n                          border: '1px solid #ddd',\r\n                          borderRadius: '4px',\r\n                          fontSize: '14px',\r\n                          boxSizing: 'border-box'\r\n                        }}\r\n                        placeholder=\"Enter current password\"\r\n                      />\r\n                    </div>\r\n\r\n                    <div style={{ marginBottom: '15px' }}>\r\n                      <label style={{ display: 'block', fontSize: '12px', color: '#666', marginBottom: '5px' }}>\r\n                        New Password\r\n                      </label>\r\n                      <input\r\n                        type=\"password\"\r\n                        value={passwordData.newPassword}\r\n                        onChange={(e) => setPasswordData(prev => ({ ...prev, newPassword: e.target.value }))}\r\n                        style={{\r\n                          width: '100%',\r\n                          padding: '8px',\r\n                          border: '1px solid #ddd',\r\n                          borderRadius: '4px',\r\n                          fontSize: '14px',\r\n                          boxSizing: 'border-box'\r\n                        }}\r\n                        placeholder=\"Enter new password (min 6 characters)\"\r\n                      />\r\n                    </div>\r\n\r\n                    <div style={{ marginBottom: '15px' }}>\r\n                      <label style={{ display: 'block', fontSize: '12px', color: '#666', marginBottom: '5px' }}>\r\n                        Confirm New Password\r\n                      </label>\r\n                      <input\r\n                        type=\"password\"\r\n                        value={passwordData.confirmPassword}\r\n                        onChange={(e) => setPasswordData(prev => ({ ...prev, confirmPassword: e.target.value }))}\r\n                        style={{\r\n                          width: '100%',\r\n                          padding: '8px',\r\n                          border: '1px solid #ddd',\r\n                          borderRadius: '4px',\r\n                          fontSize: '14px',\r\n                          boxSizing: 'border-box'\r\n                        }}\r\n                        placeholder=\"Confirm new password\"\r\n                      />\r\n                    </div>\r\n\r\n                    <div style={{ display: 'flex', gap: '10px', marginTop: '20px' }}>\r\n                      <Button type=\"submit\" style={{ flex: 1 }}>\r\n                        Update Password\r\n                      </Button>\r\n                      <Button \r\n                        type=\"button\"\r\n                        onClick={() => {\r\n                          setShowPasswordForm(false);\r\n                          setPasswordData({\r\n                            currentPassword: '',\r\n                            newPassword: '',\r\n                            confirmPassword: ''\r\n                          });\r\n                        }}\r\n                        style={{ flex: 1, backgroundColor: '#6c757d' }}\r\n                      >\r\n                        Cancel\r\n                      </Button>\r\n                    </div>\r\n                  </form>\r\n                )}\r\n              </div>\r\n            </Card>\r\n          </div>\r\n        )}\r\n      </div>\r\n    </Layout>\r\n  );\r\n};\r\n\r\nexport default StudentProfile;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}