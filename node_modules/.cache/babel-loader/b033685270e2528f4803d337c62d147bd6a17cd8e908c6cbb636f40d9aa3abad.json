{"ast":null,"code":"import _objectSpread from\"c:/Users/PFI/Desktop/ictuattennce_portal/ATTENDANCE/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import React,{useState,useEffect}from'react';import{useNavigate,useLocation}from'react-router-dom';import{supabase}from'../supabase/supabase';import{useAuth}from'../contexts/AuthContext';import Layout from'../components/Layout';import Card from'../components/Card';import Alert from'../components/Alert';import Badge from'../components/Badge';import{jsx as _jsx,jsxs as _jsxs,Fragment as _Fragment}from\"react/jsx-runtime\";const StudentMarkAttendance=()=>{const{currentUser,userRole,loading}=useAuth();const navigate=useNavigate();const location=useLocation();const[activeSessions,setActiveSessions]=useState([]);const[sessionsLoading,setSessionsLoading]=useState(true);const[submittedAttendance,setSubmittedAttendance]=useState({});const[marking,setMarking]=useState({});const[error,setError]=useState(null);const[success,setSuccess]=useState(null);useEffect(()=>{if(loading)return;if(!currentUser||userRole!=='student'){navigate('/student');return;}fetchActiveSessions();// Refresh sessions every 10 seconds\nconst interval=setInterval(fetchActiveSessions,10000);return()=>clearInterval(interval);},[currentUser,userRole,loading,navigate]);const fetchActiveSessions=async()=>{try{setSessionsLoading(true);setError(null);// Get ALL active sessions (not filtered by class)\nconst{data:sessions,error:sessionsError}=await supabase.from('sessions').select(\"\\n          id,\\n          token,\\n          created_at,\\n          expires_at,\\n          start_time,\\n          end_time,\\n          session_date,\\n          class_id,\\n          classes (\\n            class_name,\\n            courses (\\n              course_code,\\n              title\\n            )\\n          )\\n        \").gt('expires_at',new Date().toISOString()).order('created_at',{ascending:false});if(sessionsError)throw sessionsError;// Filter out sessions that have already passed\nconst now=new Date();const filteredSessions=(sessions||[]).filter(session=>{if(!session.session_date||!session.end_time)return false;// Parse the session date and end time\nconst sessionDate=new Date(session.session_date);const[endHour,endMin]=session.end_time.split(':');// Create the session end time\nconst sessionEndTime=new Date(sessionDate);sessionEndTime.setHours(parseInt(endHour),parseInt(endMin),0);// Only show sessions that haven't ended yet\nreturn now<=sessionEndTime;});setActiveSessions(filteredSessions);// Check which sessions the student has already submitted for\nif(currentUser!==null&&currentUser!==void 0&&currentUser.id&&sessions&&sessions.length>0){const{data:submissions,error:submissionsError}=await supabase.from('attendance').select('session_id, status').eq('student_id',currentUser.id).in('session_id',sessions.map(s=>s.id));if(!submissionsError&&submissions){const submitted={};submissions.forEach(sub=>{submitted[sub.session_id]=sub.status;});setSubmittedAttendance(submitted);}}}catch(err){console.error('Error fetching sessions:',err);setError(err.message);}finally{setSessionsLoading(false);}};// Helper function to parse time strings (HH:MM) into minutes\nconst timeToMinutes=timeStr=>{const[hours,minutes]=timeStr.split(':').map(Number);return hours*60+minutes;};// Helper function to check if two sessions overlap\nconst sessionsOverlap=(session1,session2)=>{if(!session1||!session2||!session1.session_date||!session2.session_date)return false;// Sessions must be on the same date to overlap\nif(session1.session_date!==session2.session_date)return false;const start1=timeToMinutes(session1.start_time);const end1=timeToMinutes(session1.end_time);const start2=timeToMinutes(session2.start_time);const end2=timeToMinutes(session2.end_time);// Check if time windows overlap\n// Overlap occurs if: start1 < end2 AND start2 < end1\nreturn start1<end2&&start2<end1;};// Get list of sessions the student has already marked attendance for\nconst getMarkedSessions=()=>{return activeSessions.filter(session=>submittedAttendance[session.id]);};// Check if a session conflicts with already-marked sessions\nconst getConflictingSession=sessionId=>{const targetSession=activeSessions.find(s=>s.id===sessionId);if(!targetSession)return null;const markedSessions=getMarkedSessions();for(let markedSession of markedSessions){if(sessionsOverlap(targetSession,markedSession)){return markedSession;}}return null;};const determineAttendanceStatus=session=>{// Safety check\nif(!session||!session.end_time){console.warn('‚ö†Ô∏è Session or end_time is missing:',session);return'present';// Default to present if data is missing\n}// Get the session date and end time\nconst[endHour,endMin]=session.end_time.split(':');// Build end time for today\nconst sessionDate=new Date(session.created_at).toISOString().split('T')[0];const endTimeStr=\"\".concat(sessionDate,\"T\").concat(session.end_time,\":00\");const sessionEndTime=new Date(endTimeStr);const now=new Date();// If current time is AFTER session end time, mark as LATE\n// Otherwise, mark as PRESENT\nreturn now>sessionEndTime?'late':'present';};const handleMarkAttendance=async sessionId=>{try{setMarking(prev=>_objectSpread(_objectSpread({},prev),{},{[sessionId]:true}));setError(null);setSuccess(null);// Check if already submitted\nif(submittedAttendance[sessionId]){setError(\"You have already marked attendance for this session\");setMarking(prev=>_objectSpread(_objectSpread({},prev),{},{[sessionId]:false}));return;}// Check for conflicting sessions\nconst conflictingSession=getConflictingSession(sessionId);if(conflictingSession){var _conflictingSession$c,_conflictingSession$c2;setError(\"\\u26A0\\uFE0F Time Conflict: You've already marked attendance for \".concat(((_conflictingSession$c=conflictingSession.classes)===null||_conflictingSession$c===void 0?void 0:(_conflictingSession$c2=_conflictingSession$c.courses)===null||_conflictingSession$c2===void 0?void 0:_conflictingSession$c2.course_code)||'another course',\" (\").concat(conflictingSession.start_time,\"-\").concat(conflictingSession.end_time,\"). Sessions cannot overlap.\"));setMarking(prev=>_objectSpread(_objectSpread({},prev),{},{[sessionId]:false}));return;}// Find the session to determine status\nconst session=activeSessions.find(s=>s.id===sessionId);if(!session){setError('Session not found');setMarking(prev=>_objectSpread(_objectSpread({},prev),{},{[sessionId]:false}));return;}const status=determineAttendanceStatus(session);// Insert attendance record\nconst{error:insertError}=await supabase.from('attendance').insert([{session_id:sessionId,student_id:currentUser.id,status:status,timestamp:new Date().toISOString()}]);if(insertError)throw insertError;// Update local state\nsetSubmittedAttendance(prev=>_objectSpread(_objectSpread({},prev),{},{[sessionId]:status}));// Show success message\nsetSuccess(\"\\u2705 Attendance marked as \".concat(status.toUpperCase()));// Clear success message after 3 seconds\nsetTimeout(()=>setSuccess(null),3000);}catch(err){console.error('Error marking attendance:',err);setError(\"\\u274C Error: \".concat(err.message));}finally{setMarking(prev=>_objectSpread(_objectSpread({},prev),{},{[sessionId]:false}));}};if(loading){return/*#__PURE__*/_jsx(Layout,{role:\"student\",children:/*#__PURE__*/_jsx(\"div\",{style:{display:'flex',alignItems:'center',justifyContent:'center',height:'400px'},children:/*#__PURE__*/_jsxs(\"div\",{style:{textAlign:'center'},children:[/*#__PURE__*/_jsx(\"div\",{style:{animation:'spin 1s linear infinite',fontSize:'32px',marginBottom:'15px'},children:\"\\u23F3\"}),/*#__PURE__*/_jsx(\"div\",{style:{fontSize:'16px',color:'#666'},children:\"Loading attendance sessions...\"})]})})});}if(!currentUser||userRole!=='student')return null;return/*#__PURE__*/_jsx(Layout,{role:\"student\",children:/*#__PURE__*/_jsxs(\"div\",{style:{maxWidth:'1000px',margin:'0 auto'},children:[/*#__PURE__*/_jsxs(\"div\",{style:{marginBottom:'32px'},children:[/*#__PURE__*/_jsx(\"h1\",{style:{margin:'0 0 8px 0',fontSize:'32px',fontWeight:'700',color:'#1f2937'},children:\"\\uD83D\\uDCDD Mark Attendance\"}),/*#__PURE__*/_jsx(\"p\",{style:{margin:'0',fontSize:'16px',color:'#6b7280'},children:\"Track and submit your attendance for active sessions\"})]}),error&&/*#__PURE__*/_jsx(Alert,{type:\"error\",message:error}),success&&/*#__PURE__*/_jsx(Alert,{type:\"success\",message:success}),sessionsLoading?/*#__PURE__*/_jsx(Card,{style:{boxShadow:'0 1px 3px rgba(0,0,0,0.1)'},children:/*#__PURE__*/_jsxs(\"div\",{style:{padding:'40px',textAlign:'center'},children:[/*#__PURE__*/_jsx(\"div\",{style:{fontSize:'48px',marginBottom:'16px',animation:'spin 2s linear infinite'},children:\"\\u23F3\"}),/*#__PURE__*/_jsx(\"p\",{style:{margin:'0',fontSize:'16px',color:'#6b7280'},children:\"Fetching your active attendance sessions...\"})]})}):activeSessions.length===0?/*#__PURE__*/// No Sessions State\n_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(Card,{style:{boxShadow:'0 1px 3px rgba(0,0,0,0.1)',marginBottom:'24px'},children:/*#__PURE__*/_jsxs(\"div\",{style:{padding:'48px 32px',textAlign:'center'},children:[/*#__PURE__*/_jsx(\"div\",{style:{fontSize:'64px',marginBottom:'16px'},children:\"\\uD83D\\uDCED\"}),/*#__PURE__*/_jsx(\"h2\",{style:{margin:'0 0 8px 0',fontSize:'24px',fontWeight:'600',color:'#1f2937'},children:\"No Active Sessions Yet\"}),/*#__PURE__*/_jsx(\"p\",{style:{margin:'0 0 16px 0',fontSize:'16px',color:'#6b7280',maxWidth:'400px',marginLeft:'auto',marginRight:'auto'},children:\"There are currently no active attendance sessions for your enrolled courses. Check back soon!\"}),/*#__PURE__*/_jsx(\"button\",{onClick:fetchActiveSessions,style:{padding:'10px 24px',backgroundColor:'#3b82f6',color:'white',border:'none',borderRadius:'6px',fontSize:'14px',fontWeight:'600',cursor:'pointer',transition:'background-color 0.2s'},onMouseEnter:e=>e.target.style.backgroundColor='#2563eb',onMouseLeave:e=>e.target.style.backgroundColor='#3b82f6',children:\"\\uD83D\\uDD04 Refresh\"})]})}),/*#__PURE__*/_jsxs(\"div\",{style:{display:'grid',gridTemplateColumns:'repeat(auto-fit, minmax(280px, 1fr))',gap:'16px',marginBottom:'24px'},children:[/*#__PURE__*/_jsx(Card,{style:{boxShadow:'0 1px 3px rgba(0,0,0,0.1)'},children:/*#__PURE__*/_jsxs(\"div\",{style:{padding:'24px'},children:[/*#__PURE__*/_jsx(\"div\",{style:{fontSize:'32px',marginBottom:'12px'},children:\"\\u2705\"}),/*#__PURE__*/_jsx(\"p\",{style:{margin:'0 0 4px 0',fontSize:'14px',color:'#6b7280'},children:\"Attendance Status\"}),/*#__PURE__*/_jsx(\"p\",{style:{margin:'0',fontSize:'20px',fontWeight:'700',color:'#1f2937'},children:\"0 Sessions\"})]})}),/*#__PURE__*/_jsx(Card,{style:{boxShadow:'0 1px 3px rgba(0,0,0,0.1)'},children:/*#__PURE__*/_jsxs(\"div\",{style:{padding:'24px'},children:[/*#__PURE__*/_jsx(\"div\",{style:{fontSize:'32px',marginBottom:'12px'},children:\"\\uD83D\\uDCCA\"}),/*#__PURE__*/_jsx(\"p\",{style:{margin:'0 0 4px 0',fontSize:'14px',color:'#6b7280'},children:\"Attendance Rate\"}),/*#__PURE__*/_jsx(\"p\",{style:{margin:'0',fontSize:'20px',fontWeight:'700',color:'#1f2937'},children:\"-- %\"})]})}),/*#__PURE__*/_jsx(Card,{style:{boxShadow:'0 1px 3px rgba(0,0,0,0.1)'},children:/*#__PURE__*/_jsxs(\"div\",{style:{padding:'24px'},children:[/*#__PURE__*/_jsx(\"div\",{style:{fontSize:'32px',marginBottom:'12px'},children:\"\\u23F0\"}),/*#__PURE__*/_jsx(\"p\",{style:{margin:'0 0 4px 0',fontSize:'14px',color:'#6b7280'},children:\"Last Updated\"}),/*#__PURE__*/_jsx(\"p\",{style:{margin:'0',fontSize:'20px',fontWeight:'700',color:'#1f2937'},children:\"Just Now\"})]})})]})]}):/*#__PURE__*/// Active Sessions\n_jsxs(\"div\",{style:{marginBottom:'32px'},children:[/*#__PURE__*/_jsx(\"div\",{style:{marginBottom:'20px'},children:/*#__PURE__*/_jsxs(\"h2\",{style:{margin:'0',fontSize:'20px',fontWeight:'700',color:'#1f2937'},children:[\"Active Sessions (\",activeSessions.length,\")\"]})}),/*#__PURE__*/_jsx(\"div\",{style:{display:'grid',gridTemplateColumns:'1fr',gap:'16px'},children:activeSessions.map(session=>{var _session$classes,_session$classes$cour,_session$classes2,_session$classes2$cou,_session$classes3,_conflictingSession$c3,_conflictingSession$c4;const isSubmitted=submittedAttendance[session.id];const isMarking=marking[session.id];const status=determineAttendanceStatus(session);const startTime=new Date(session.created_at);const expireTime=new Date(session.expires_at);const now=new Date();const timeRemaining=Math.max(0,Math.floor((expireTime-now)/1000/60));// Check for conflicts\nconst conflictingSession=getConflictingSession(session.id);const hasConflict=!isSubmitted&&conflictingSession;return/*#__PURE__*/_jsx(Card,{style:{boxShadow:'0 1px 3px rgba(0,0,0,0.1)',borderLeft:\"4px solid \".concat(isSubmitted?'#10b981':hasConflict?'#f59e0b':'#3b82f6'),borderRadius:'8px',opacity:hasConflict?0.7:1},children:/*#__PURE__*/_jsxs(\"div\",{style:{padding:'24px'},children:[/*#__PURE__*/_jsxs(\"div\",{style:{display:'flex',justifyContent:'space-between',alignItems:'start',marginBottom:'16px'},children:[/*#__PURE__*/_jsxs(\"div\",{style:{flex:1},children:[/*#__PURE__*/_jsxs(\"h3\",{style:{margin:'0 0 6px 0',fontSize:'18px',fontWeight:'700',color:'#1f2937'},children:[\"\\uD83D\\uDCDA \",((_session$classes=session.classes)===null||_session$classes===void 0?void 0:(_session$classes$cour=_session$classes.courses)===null||_session$classes$cour===void 0?void 0:_session$classes$cour.course_code)||'UNKNOWN',\" - \",((_session$classes2=session.classes)===null||_session$classes2===void 0?void 0:(_session$classes2$cou=_session$classes2.courses)===null||_session$classes2$cou===void 0?void 0:_session$classes2$cou.title)||((_session$classes3=session.classes)===null||_session$classes3===void 0?void 0:_session$classes3.class_name)||'Unknown']}),/*#__PURE__*/_jsxs(\"p\",{style:{margin:'0',fontSize:'13px',color:'#6b7280',fontFamily:'monospace'},children:[\"Session: \",session.token.substring(0,12),\"... | Start: \",session.start_time||'N/A',\" | End: \",session.end_time||'N/A']})]}),/*#__PURE__*/_jsxs(\"div\",{style:{textAlign:'right'},children:[isSubmitted&&/*#__PURE__*/_jsx(\"div\",{style:{padding:'6px 12px',backgroundColor:isSubmitted==='present'?'#d1fae5':'#fef3c7',color:isSubmitted==='present'?'#065f46':'#92400e',borderRadius:'20px',fontSize:'12px',fontWeight:'600',textTransform:'uppercase',display:'inline-block'},children:isSubmitted==='present'?'‚úÖ Present':'‚è±Ô∏è Late'}),!isSubmitted&&hasConflict&&/*#__PURE__*/_jsx(\"div\",{style:{padding:'6px 12px',backgroundColor:'#fef3c7',color:'#92400e',borderRadius:'20px',fontSize:'12px',fontWeight:'600',textTransform:'uppercase',display:'inline-block'},children:\"\\u26A0\\uFE0F Conflict\"}),!isSubmitted&&!hasConflict&&/*#__PURE__*/_jsx(\"div\",{style:{padding:'6px 12px',backgroundColor:'#dbeafe',color:'#1e40af',borderRadius:'20px',fontSize:'12px',fontWeight:'600',textTransform:'uppercase',display:'inline-block'},children:\"\\u23F3 Active\"})]})]}),/*#__PURE__*/_jsxs(\"div\",{style:{display:'grid',gridTemplateColumns:'repeat(auto-fit, minmax(150px, 1fr))',gap:'16px',marginBottom:'20px',padding:'16px',backgroundColor:'#f9fafb',borderRadius:'6px'},children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"p\",{style:{margin:'0 0 4px 0',fontSize:'12px',color:'#6b7280',fontWeight:'600'},children:\"Started\"}),/*#__PURE__*/_jsx(\"p\",{style:{margin:'0',fontSize:'14px',fontWeight:'500',color:'#1f2937'},children:startTime.toLocaleTimeString('en-US',{hour:'2-digit',minute:'2-digit'})})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"p\",{style:{margin:'0 0 4px 0',fontSize:'12px',color:'#6b7280',fontWeight:'600'},children:\"Expires In\"}),/*#__PURE__*/_jsxs(\"p\",{style:{margin:'0',fontSize:'14px',fontWeight:'500',color:'#1f2937'},children:[timeRemaining,\"m remaining\"]})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"p\",{style:{margin:'0 0 4px 0',fontSize:'12px',color:'#6b7280',fontWeight:'600'},children:\"Status\"}),/*#__PURE__*/_jsx(\"p\",{style:{margin:'0',fontSize:'14px',fontWeight:'500',color:'#1f2937'},children:!isSubmitted?\"Will mark as \".concat(status.toUpperCase()):\"Marked as \".concat(isSubmitted.toUpperCase())})]})]}),hasConflict&&/*#__PURE__*/_jsx(\"div\",{style:{padding:'12px',backgroundColor:'#fef3c7',borderRadius:'6px',marginBottom:'16px',borderLeft:'3px solid #f59e0b'},children:/*#__PURE__*/_jsxs(\"p\",{style:{margin:'0',fontSize:'13px',color:'#92400e'},children:[/*#__PURE__*/_jsx(\"strong\",{children:\"\\u26A0\\uFE0F Time Conflict:\"}),\" You've already marked attendance for \",(_conflictingSession$c3=conflictingSession.classes)===null||_conflictingSession$c3===void 0?void 0:(_conflictingSession$c4=_conflictingSession$c3.courses)===null||_conflictingSession$c4===void 0?void 0:_conflictingSession$c4.course_code,\" (\",conflictingSession.start_time,\"-\",conflictingSession.end_time,\"). These sessions overlap. You can only mark one overlapping session.\"]})}),!isSubmitted&&!hasConflict&&/*#__PURE__*/_jsx(\"div\",{style:{padding:'12px',backgroundColor:'#eff6ff',borderRadius:'6px',marginBottom:'16px',borderLeft:'3px solid #3b82f6'},children:/*#__PURE__*/_jsxs(\"p\",{style:{margin:'0',fontSize:'13px',color:'#1e40af'},children:[/*#__PURE__*/_jsx(\"strong\",{children:\"\\u26A0\\uFE0F Note:\"}),\" You can mark attendance only ONCE per session. You will be marked as \",status.toUpperCase(),\" based on the current time. Submit before session ends!\"]})}),isSubmitted&&/*#__PURE__*/_jsx(\"div\",{style:{padding:'12px',backgroundColor:'#d1fae5',borderRadius:'6px',marginBottom:'16px',borderLeft:'3px solid #10b981'},children:/*#__PURE__*/_jsxs(\"p\",{style:{margin:'0',fontSize:'13px',color:'#065f46'},children:[/*#__PURE__*/_jsx(\"strong\",{children:\"\\u2705 Already Marked:\"}),\" You submitted attendance as \",isSubmitted.toUpperCase(),\". You cannot mark again for this session.\"]})}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>handleMarkAttendance(session.id),disabled:isSubmitted||isMarking||hasConflict,style:{width:'100%',padding:'12px 16px',backgroundColor:isSubmitted||hasConflict?'#d1d5db':'#3b82f6',color:'white',border:'none',borderRadius:'6px',fontSize:'15px',fontWeight:'600',cursor:isSubmitted||isMarking||hasConflict?'not-allowed':'pointer',opacity:isSubmitted||isMarking||hasConflict?0.6:1,transition:'background-color 0.2s'},onMouseEnter:e=>{if(!isSubmitted&&!isMarking&&!hasConflict){e.target.style.backgroundColor='#2563eb';}},onMouseLeave:e=>{if(!isSubmitted&&!isMarking&&!hasConflict){e.target.style.backgroundColor='#3b82f6';}},title:hasConflict?'Disabled due to time conflict with another marked session':'',children:isMarking?'‚è≥ Submitting...':isSubmitted?\"\\u2713 MARKED ALREADY (\".concat(isSubmitted.toUpperCase(),\")\"):hasConflict?\"\\u26D4 BLOCKED (Time Conflict)\":\"\\u2705 Mark \".concat(status.toUpperCase())})]})},session.id);})})]}),/*#__PURE__*/_jsx(Card,{style:{boxShadow:'0 1px 3px rgba(0,0,0,0.1)',marginTop:'32px'},children:/*#__PURE__*/_jsxs(\"div\",{style:{padding:'24px'},children:[/*#__PURE__*/_jsx(\"h2\",{style:{margin:'0 0 24px 0',fontSize:'18px',fontWeight:'700',color:'#1f2937'},children:\"\\uD83D\\uDCCB How Attendance Works\"}),/*#__PURE__*/_jsx(\"div\",{style:{display:'grid',gridTemplateColumns:'repeat(auto-fit, minmax(300px, 1fr))',gap:'20px'},children:[{step:'1',title:'Instructor Starts Session',desc:'Your instructor creates an attendance session in their dashboard',icon:'üë®‚Äçüè´'},{step:'2',title:'Session Appears Here',desc:'Active sessions automatically show on this page in real-time',icon:'üîÑ'},{step:'3',title:'Submit Attendance',desc:'Click the \"Mark\" button to submit your attendance',icon:'üëÜ'},{step:'4',title:'Automatic Status',desc:'PRESENT if within 15 min, otherwise LATE',icon:'‚è±Ô∏è'},{step:'5',title:'Immutable Record',desc:'Once submitted, your attendance record cannot be changed',icon:'üîí'},{step:'6',title:'Check Your History',desc:'View all your attendance records in your history page',icon:'üìä'}].map((item,idx)=>/*#__PURE__*/_jsxs(\"div\",{style:{padding:'20px',backgroundColor:'#f9fafb',borderRadius:'8px',border:'1px solid #e5e7eb'},children:[/*#__PURE__*/_jsxs(\"div\",{style:{display:'flex',alignItems:'center',marginBottom:'12px',gap:'12px'},children:[/*#__PURE__*/_jsx(\"div\",{style:{width:'32px',height:'32px',borderRadius:'50%',backgroundColor:'#3b82f6',color:'white',display:'flex',alignItems:'center',justifyContent:'center',fontWeight:'700',fontSize:'14px'},children:item.step}),/*#__PURE__*/_jsx(\"div\",{style:{fontSize:'20px'},children:item.icon})]}),/*#__PURE__*/_jsx(\"h3\",{style:{margin:'0 0 6px 0',fontSize:'14px',fontWeight:'700',color:'#1f2937'},children:item.title}),/*#__PURE__*/_jsx(\"p\",{style:{margin:'0',fontSize:'13px',color:'#6b7280',lineHeight:'1.5'},children:item.desc})]},idx))})]})})]})});};export default StudentMarkAttendance;","map":{"version":3,"names":["React","useState","useEffect","useNavigate","useLocation","supabase","useAuth","Layout","Card","Alert","Badge","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","StudentMarkAttendance","currentUser","userRole","loading","navigate","location","activeSessions","setActiveSessions","sessionsLoading","setSessionsLoading","submittedAttendance","setSubmittedAttendance","marking","setMarking","error","setError","success","setSuccess","fetchActiveSessions","interval","setInterval","clearInterval","data","sessions","sessionsError","from","select","gt","Date","toISOString","order","ascending","now","filteredSessions","filter","session","session_date","end_time","sessionDate","endHour","endMin","split","sessionEndTime","setHours","parseInt","id","length","submissions","submissionsError","eq","in","map","s","submitted","forEach","sub","session_id","status","err","console","message","timeToMinutes","timeStr","hours","minutes","Number","sessionsOverlap","session1","session2","start1","start_time","end1","start2","end2","getMarkedSessions","getConflictingSession","sessionId","targetSession","find","markedSessions","markedSession","determineAttendanceStatus","warn","created_at","endTimeStr","concat","handleMarkAttendance","prev","_objectSpread","conflictingSession","_conflictingSession$c","_conflictingSession$c2","classes","courses","course_code","insertError","insert","student_id","timestamp","toUpperCase","setTimeout","role","children","style","display","alignItems","justifyContent","height","textAlign","animation","fontSize","marginBottom","color","maxWidth","margin","fontWeight","type","boxShadow","padding","marginLeft","marginRight","onClick","backgroundColor","border","borderRadius","cursor","transition","onMouseEnter","e","target","onMouseLeave","gridTemplateColumns","gap","_session$classes","_session$classes$cour","_session$classes2","_session$classes2$cou","_session$classes3","_conflictingSession$c3","_conflictingSession$c4","isSubmitted","isMarking","startTime","expireTime","expires_at","timeRemaining","Math","max","floor","hasConflict","borderLeft","opacity","flex","title","class_name","fontFamily","token","substring","textTransform","toLocaleTimeString","hour","minute","disabled","width","marginTop","step","desc","icon","item","idx","lineHeight"],"sources":["c:/Users/PFI/Desktop/ictuattennce_portal/ATTENDANCE/src/pages/StudentMarkAttendance.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\r\nimport { useNavigate, useLocation } from 'react-router-dom';\r\nimport { supabase } from '../supabase/supabase';\r\nimport { useAuth } from '../contexts/AuthContext';\r\nimport Layout from '../components/Layout';\r\nimport Card from '../components/Card';\r\nimport Alert from '../components/Alert';\r\nimport Badge from '../components/Badge';\r\n\r\nconst StudentMarkAttendance = () => {\r\n  const { currentUser, userRole, loading } = useAuth();\r\n  const navigate = useNavigate();\r\n  const location = useLocation();\r\n  const [activeSessions, setActiveSessions] = useState([]);\r\n  const [sessionsLoading, setSessionsLoading] = useState(true);\r\n  const [submittedAttendance, setSubmittedAttendance] = useState({});\r\n  const [marking, setMarking] = useState({});\r\n  const [error, setError] = useState(null);\r\n  const [success, setSuccess] = useState(null);\r\n\r\n  useEffect(() => {\r\n    if (loading) return;\r\n\r\n    if (!currentUser || userRole !== 'student') {\r\n      navigate('/student');\r\n      return;\r\n    }\r\n\r\n    fetchActiveSessions();\r\n\r\n    // Refresh sessions every 10 seconds\r\n    const interval = setInterval(fetchActiveSessions, 10000);\r\n    return () => clearInterval(interval);\r\n  }, [currentUser, userRole, loading, navigate]);\r\n\r\n  const fetchActiveSessions = async () => {\r\n    try {\r\n      setSessionsLoading(true);\r\n      setError(null);\r\n\r\n      // Get ALL active sessions (not filtered by class)\r\n      const { data: sessions, error: sessionsError } = await supabase\r\n        .from('sessions')\r\n        .select(`\r\n          id,\r\n          token,\r\n          created_at,\r\n          expires_at,\r\n          start_time,\r\n          end_time,\r\n          session_date,\r\n          class_id,\r\n          classes (\r\n            class_name,\r\n            courses (\r\n              course_code,\r\n              title\r\n            )\r\n          )\r\n        `)\r\n        .gt('expires_at', new Date().toISOString())\r\n        .order('created_at', { ascending: false });\r\n\r\n      if (sessionsError) throw sessionsError;\r\n\r\n      // Filter out sessions that have already passed\r\n      const now = new Date();\r\n      const filteredSessions = (sessions || []).filter(session => {\r\n        if (!session.session_date || !session.end_time) return false;\r\n        \r\n        // Parse the session date and end time\r\n        const sessionDate = new Date(session.session_date);\r\n        const [endHour, endMin] = session.end_time.split(':');\r\n        \r\n        // Create the session end time\r\n        const sessionEndTime = new Date(sessionDate);\r\n        sessionEndTime.setHours(parseInt(endHour), parseInt(endMin), 0);\r\n        \r\n        // Only show sessions that haven't ended yet\r\n        return now <= sessionEndTime;\r\n      });\r\n\r\n      setActiveSessions(filteredSessions);\r\n\r\n      // Check which sessions the student has already submitted for\r\n      if (currentUser?.id && sessions && sessions.length > 0) {\r\n        const { data: submissions, error: submissionsError } = await supabase\r\n          .from('attendance')\r\n          .select('session_id, status')\r\n          .eq('student_id', currentUser.id)\r\n          .in('session_id', sessions.map(s => s.id));\r\n\r\n        if (!submissionsError && submissions) {\r\n          const submitted = {};\r\n          submissions.forEach(sub => {\r\n            submitted[sub.session_id] = sub.status;\r\n          });\r\n          setSubmittedAttendance(submitted);\r\n        }\r\n      }\r\n    } catch (err) {\r\n      console.error('Error fetching sessions:', err);\r\n      setError(err.message);\r\n    } finally {\r\n      setSessionsLoading(false);\r\n    }\r\n  };\r\n\r\n  // Helper function to parse time strings (HH:MM) into minutes\r\n  const timeToMinutes = (timeStr) => {\r\n    const [hours, minutes] = timeStr.split(':').map(Number);\r\n    return hours * 60 + minutes;\r\n  };\r\n\r\n  // Helper function to check if two sessions overlap\r\n  const sessionsOverlap = (session1, session2) => {\r\n    if (!session1 || !session2 || !session1.session_date || !session2.session_date) return false;\r\n    \r\n    // Sessions must be on the same date to overlap\r\n    if (session1.session_date !== session2.session_date) return false;\r\n\r\n    const start1 = timeToMinutes(session1.start_time);\r\n    const end1 = timeToMinutes(session1.end_time);\r\n    const start2 = timeToMinutes(session2.start_time);\r\n    const end2 = timeToMinutes(session2.end_time);\r\n\r\n    // Check if time windows overlap\r\n    // Overlap occurs if: start1 < end2 AND start2 < end1\r\n    return start1 < end2 && start2 < end1;\r\n  };\r\n\r\n  // Get list of sessions the student has already marked attendance for\r\n  const getMarkedSessions = () => {\r\n    return activeSessions.filter(session => submittedAttendance[session.id]);\r\n  };\r\n\r\n  // Check if a session conflicts with already-marked sessions\r\n  const getConflictingSession = (sessionId) => {\r\n    const targetSession = activeSessions.find(s => s.id === sessionId);\r\n    if (!targetSession) return null;\r\n\r\n    const markedSessions = getMarkedSessions();\r\n    for (let markedSession of markedSessions) {\r\n      if (sessionsOverlap(targetSession, markedSession)) {\r\n        return markedSession;\r\n      }\r\n    }\r\n    return null;\r\n  };\r\n\r\n  const determineAttendanceStatus = (session) => {\r\n    // Safety check\r\n    if (!session || !session.end_time) {\r\n      console.warn('‚ö†Ô∏è Session or end_time is missing:', session);\r\n      return 'present'; // Default to present if data is missing\r\n    }\r\n\r\n    // Get the session date and end time\r\n    const [endHour, endMin] = session.end_time.split(':');\r\n    \r\n    // Build end time for today\r\n    const sessionDate = new Date(session.created_at).toISOString().split('T')[0];\r\n    const endTimeStr = `${sessionDate}T${session.end_time}:00`;\r\n    const sessionEndTime = new Date(endTimeStr);\r\n    \r\n    const now = new Date();\r\n\r\n    // If current time is AFTER session end time, mark as LATE\r\n    // Otherwise, mark as PRESENT\r\n    return now > sessionEndTime ? 'late' : 'present';\r\n  };\r\n\r\n  const handleMarkAttendance = async (sessionId) => {\r\n    try {\r\n      setMarking(prev => ({ ...prev, [sessionId]: true }));\r\n      setError(null);\r\n      setSuccess(null);\r\n\r\n      // Check if already submitted\r\n      if (submittedAttendance[sessionId]) {\r\n        setError(`You have already marked attendance for this session`);\r\n        setMarking(prev => ({ ...prev, [sessionId]: false }));\r\n        return;\r\n      }\r\n\r\n      // Check for conflicting sessions\r\n      const conflictingSession = getConflictingSession(sessionId);\r\n      if (conflictingSession) {\r\n        setError(`‚ö†Ô∏è Time Conflict: You've already marked attendance for ${conflictingSession.classes?.courses?.course_code || 'another course'} (${conflictingSession.start_time}-${conflictingSession.end_time}). Sessions cannot overlap.`);\r\n        setMarking(prev => ({ ...prev, [sessionId]: false }));\r\n        return;\r\n      }\r\n\r\n      // Find the session to determine status\r\n      const session = activeSessions.find(s => s.id === sessionId);\r\n      if (!session) {\r\n        setError('Session not found');\r\n        setMarking(prev => ({ ...prev, [sessionId]: false }));\r\n        return;\r\n      }\r\n\r\n      const status = determineAttendanceStatus(session);\r\n\r\n      // Insert attendance record\r\n      const { error: insertError } = await supabase\r\n        .from('attendance')\r\n        .insert([\r\n          {\r\n            session_id: sessionId,\r\n            student_id: currentUser.id,\r\n            status: status,\r\n            timestamp: new Date().toISOString(),\r\n          }\r\n        ]);\r\n\r\n      if (insertError) throw insertError;\r\n\r\n      // Update local state\r\n      setSubmittedAttendance(prev => ({\r\n        ...prev,\r\n        [sessionId]: status\r\n      }));\r\n\r\n      // Show success message\r\n      setSuccess(`‚úÖ Attendance marked as ${status.toUpperCase()}`);\r\n\r\n      // Clear success message after 3 seconds\r\n      setTimeout(() => setSuccess(null), 3000);\r\n    } catch (err) {\r\n      console.error('Error marking attendance:', err);\r\n      setError(`‚ùå Error: ${err.message}`);\r\n    } finally {\r\n      setMarking(prev => ({ ...prev, [sessionId]: false }));\r\n    }\r\n  };\r\n\r\n  if (loading) {\r\n    return (\r\n      <Layout role=\"student\">\r\n        <div style={{ display: 'flex', alignItems: 'center', justifyContent: 'center', height: '400px' }}>\r\n          <div style={{ textAlign: 'center' }}>\r\n            <div style={{ animation: 'spin 1s linear infinite', fontSize: '32px', marginBottom: '15px' }}>‚è≥</div>\r\n            <div style={{ fontSize: '16px', color: '#666' }}>Loading attendance sessions...</div>\r\n          </div>\r\n        </div>\r\n      </Layout>\r\n    );\r\n  }\r\n\r\n  if (!currentUser || userRole !== 'student') return null;\r\n\r\n  return (\r\n    <Layout role=\"student\">\r\n      <div style={{ maxWidth: '1000px', margin: '0 auto' }}>\r\n        {/* Header */}\r\n        <div style={{ marginBottom: '32px' }}>\r\n          <h1 style={{ margin: '0 0 8px 0', fontSize: '32px', fontWeight: '700', color: '#1f2937' }}>\r\n            üìù Mark Attendance\r\n          </h1>\r\n          <p style={{ margin: '0', fontSize: '16px', color: '#6b7280' }}>\r\n            Track and submit your attendance for active sessions\r\n          </p>\r\n        </div>\r\n\r\n        {/* Alerts */}\r\n        {error && <Alert type=\"error\" message={error} />}\r\n        {success && <Alert type=\"success\" message={success} />}\r\n\r\n        {/* Loading State */}\r\n        {sessionsLoading ? (\r\n          <Card style={{ boxShadow: '0 1px 3px rgba(0,0,0,0.1)' }}>\r\n            <div style={{ padding: '40px', textAlign: 'center' }}>\r\n              <div style={{ fontSize: '48px', marginBottom: '16px', animation: 'spin 2s linear infinite' }}>‚è≥</div>\r\n              <p style={{ margin: '0', fontSize: '16px', color: '#6b7280' }}>\r\n                Fetching your active attendance sessions...\r\n              </p>\r\n            </div>\r\n          </Card>\r\n        ) : activeSessions.length === 0 ? (\r\n          // No Sessions State\r\n          <>\r\n            <Card style={{ boxShadow: '0 1px 3px rgba(0,0,0,0.1)', marginBottom: '24px' }}>\r\n              <div style={{ padding: '48px 32px', textAlign: 'center' }}>\r\n                <div style={{ fontSize: '64px', marginBottom: '16px' }}>üì≠</div>\r\n                <h2 style={{ margin: '0 0 8px 0', fontSize: '24px', fontWeight: '600', color: '#1f2937' }}>\r\n                  No Active Sessions Yet\r\n                </h2>\r\n                <p style={{ margin: '0 0 16px 0', fontSize: '16px', color: '#6b7280', maxWidth: '400px', marginLeft: 'auto', marginRight: 'auto' }}>\r\n                  There are currently no active attendance sessions for your enrolled courses. Check back soon!\r\n                </p>\r\n                <button\r\n                  onClick={fetchActiveSessions}\r\n                  style={{\r\n                    padding: '10px 24px',\r\n                    backgroundColor: '#3b82f6',\r\n                    color: 'white',\r\n                    border: 'none',\r\n                    borderRadius: '6px',\r\n                    fontSize: '14px',\r\n                    fontWeight: '600',\r\n                    cursor: 'pointer',\r\n                    transition: 'background-color 0.2s'\r\n                  }}\r\n                  onMouseEnter={(e) => e.target.style.backgroundColor = '#2563eb'}\r\n                  onMouseLeave={(e) => e.target.style.backgroundColor = '#3b82f6'}\r\n                >\r\n                  üîÑ Refresh\r\n                </button>\r\n              </div>\r\n            </Card>\r\n\r\n            {/* Status Cards */}\r\n            <div style={{\r\n              display: 'grid',\r\n              gridTemplateColumns: 'repeat(auto-fit, minmax(280px, 1fr))',\r\n              gap: '16px',\r\n              marginBottom: '24px'\r\n            }}>\r\n              <Card style={{ boxShadow: '0 1px 3px rgba(0,0,0,0.1)' }}>\r\n                <div style={{ padding: '24px' }}>\r\n                  <div style={{ fontSize: '32px', marginBottom: '12px' }}>‚úÖ</div>\r\n                  <p style={{ margin: '0 0 4px 0', fontSize: '14px', color: '#6b7280' }}>Attendance Status</p>\r\n                  <p style={{ margin: '0', fontSize: '20px', fontWeight: '700', color: '#1f2937' }}>0 Sessions</p>\r\n                </div>\r\n              </Card>\r\n              <Card style={{ boxShadow: '0 1px 3px rgba(0,0,0,0.1)' }}>\r\n                <div style={{ padding: '24px' }}>\r\n                  <div style={{ fontSize: '32px', marginBottom: '12px' }}>üìä</div>\r\n                  <p style={{ margin: '0 0 4px 0', fontSize: '14px', color: '#6b7280' }}>Attendance Rate</p>\r\n                  <p style={{ margin: '0', fontSize: '20px', fontWeight: '700', color: '#1f2937' }}>-- %</p>\r\n                </div>\r\n              </Card>\r\n              <Card style={{ boxShadow: '0 1px 3px rgba(0,0,0,0.1)' }}>\r\n                <div style={{ padding: '24px' }}>\r\n                  <div style={{ fontSize: '32px', marginBottom: '12px' }}>‚è∞</div>\r\n                  <p style={{ margin: '0 0 4px 0', fontSize: '14px', color: '#6b7280' }}>Last Updated</p>\r\n                  <p style={{ margin: '0', fontSize: '20px', fontWeight: '700', color: '#1f2937' }}>Just Now</p>\r\n                </div>\r\n              </Card>\r\n            </div>\r\n          </>\r\n        ) : (\r\n          // Active Sessions\r\n          <div style={{ marginBottom: '32px' }}>\r\n            <div style={{ marginBottom: '20px' }}>\r\n              <h2 style={{ margin: '0', fontSize: '20px', fontWeight: '700', color: '#1f2937' }}>\r\n                Active Sessions ({activeSessions.length})\r\n              </h2>\r\n            </div>\r\n\r\n            <div style={{ display: 'grid', gridTemplateColumns: '1fr', gap: '16px' }}>\r\n              {activeSessions.map(session => {\r\n                const isSubmitted = submittedAttendance[session.id];\r\n                const isMarking = marking[session.id];\r\n                const status = determineAttendanceStatus(session);\r\n                const startTime = new Date(session.created_at);\r\n                const expireTime = new Date(session.expires_at);\r\n                const now = new Date();\r\n                const timeRemaining = Math.max(0, Math.floor((expireTime - now) / 1000 / 60));\r\n                \r\n                // Check for conflicts\r\n                const conflictingSession = getConflictingSession(session.id);\r\n                const hasConflict = !isSubmitted && conflictingSession;\r\n\r\n                return (\r\n                  <Card\r\n                    key={session.id}\r\n                    style={{\r\n                      boxShadow: '0 1px 3px rgba(0,0,0,0.1)',\r\n                      borderLeft: `4px solid ${isSubmitted ? '#10b981' : hasConflict ? '#f59e0b' : '#3b82f6'}`,\r\n                      borderRadius: '8px',\r\n                      opacity: hasConflict ? 0.7 : 1\r\n                    }}\r\n                  >\r\n                    <div style={{ padding: '24px' }}>\r\n                      <div style={{ display: 'flex', justifyContent: 'space-between', alignItems: 'start', marginBottom: '16px' }}>\r\n                        <div style={{ flex: 1 }}>\r\n                          <h3 style={{ margin: '0 0 6px 0', fontSize: '18px', fontWeight: '700', color: '#1f2937' }}>\r\n                            üìö {session.classes?.courses?.course_code || 'UNKNOWN'} - {session.classes?.courses?.title || session.classes?.class_name || 'Unknown'}\r\n                          </h3>\r\n                          <p style={{ margin: '0', fontSize: '13px', color: '#6b7280', fontFamily: 'monospace' }}>\r\n                            Session: {session.token.substring(0, 12)}... | Start: {session.start_time || 'N/A'} | End: {session.end_time || 'N/A'}\r\n                          </p>\r\n                        </div>\r\n                        <div style={{ textAlign: 'right' }}>\r\n                          {isSubmitted && (\r\n                            <div style={{\r\n                              padding: '6px 12px',\r\n                              backgroundColor: isSubmitted === 'present' ? '#d1fae5' : '#fef3c7',\r\n                              color: isSubmitted === 'present' ? '#065f46' : '#92400e',\r\n                              borderRadius: '20px',\r\n                              fontSize: '12px',\r\n                              fontWeight: '600',\r\n                              textTransform: 'uppercase',\r\n                              display: 'inline-block'\r\n                            }}>\r\n                              {isSubmitted === 'present' ? '‚úÖ Present' : '‚è±Ô∏è Late'}\r\n                            </div>\r\n                          )}\r\n                          {!isSubmitted && hasConflict && (\r\n                            <div style={{\r\n                              padding: '6px 12px',\r\n                              backgroundColor: '#fef3c7',\r\n                              color: '#92400e',\r\n                              borderRadius: '20px',\r\n                              fontSize: '12px',\r\n                              fontWeight: '600',\r\n                              textTransform: 'uppercase',\r\n                              display: 'inline-block'\r\n                            }}>\r\n                              ‚ö†Ô∏è Conflict\r\n                            </div>\r\n                          )}\r\n                          {!isSubmitted && !hasConflict && (\r\n                            <div style={{\r\n                              padding: '6px 12px',\r\n                              backgroundColor: '#dbeafe',\r\n                              color: '#1e40af',\r\n                              borderRadius: '20px',\r\n                              fontSize: '12px',\r\n                              fontWeight: '600',\r\n                              textTransform: 'uppercase',\r\n                              display: 'inline-block'\r\n                            }}>\r\n                              ‚è≥ Active\r\n                            </div>\r\n                          )}\r\n                        </div>\r\n                      </div>\r\n\r\n                      {/* Session Details Grid */}\r\n                      <div style={{\r\n                        display: 'grid',\r\n                        gridTemplateColumns: 'repeat(auto-fit, minmax(150px, 1fr))',\r\n                        gap: '16px',\r\n                        marginBottom: '20px',\r\n                        padding: '16px',\r\n                        backgroundColor: '#f9fafb',\r\n                        borderRadius: '6px'\r\n                      }}>\r\n                        <div>\r\n                          <p style={{ margin: '0 0 4px 0', fontSize: '12px', color: '#6b7280', fontWeight: '600' }}>Started</p>\r\n                          <p style={{ margin: '0', fontSize: '14px', fontWeight: '500', color: '#1f2937' }}>\r\n                            {startTime.toLocaleTimeString('en-US', { hour: '2-digit', minute: '2-digit' })}\r\n                          </p>\r\n                        </div>\r\n                        <div>\r\n                          <p style={{ margin: '0 0 4px 0', fontSize: '12px', color: '#6b7280', fontWeight: '600' }}>Expires In</p>\r\n                          <p style={{ margin: '0', fontSize: '14px', fontWeight: '500', color: '#1f2937' }}>\r\n                            {timeRemaining}m remaining\r\n                          </p>\r\n                        </div>\r\n                        <div>\r\n                          <p style={{ margin: '0 0 4px 0', fontSize: '12px', color: '#6b7280', fontWeight: '600' }}>Status</p>\r\n                          <p style={{ margin: '0', fontSize: '14px', fontWeight: '500', color: '#1f2937' }}>\r\n                            {!isSubmitted ? `Will mark as ${status.toUpperCase()}` : `Marked as ${isSubmitted.toUpperCase()}`}\r\n                          </p>\r\n                        </div>\r\n                      </div>\r\n\r\n                      {/* Conflict Warning Box */}\r\n                      {hasConflict && (\r\n                        <div style={{\r\n                          padding: '12px',\r\n                          backgroundColor: '#fef3c7',\r\n                          borderRadius: '6px',\r\n                          marginBottom: '16px',\r\n                          borderLeft: '3px solid #f59e0b'\r\n                        }}>\r\n                          <p style={{ margin: '0', fontSize: '13px', color: '#92400e' }}>\r\n                            <strong>‚ö†Ô∏è Time Conflict:</strong> You've already marked attendance for {conflictingSession.classes?.courses?.course_code} ({conflictingSession.start_time}-{conflictingSession.end_time}). These sessions overlap. You can only mark one overlapping session.\r\n                          </p>\r\n                        </div>\r\n                      )}\r\n\r\n                      {/* Info Box */}\r\n                      {!isSubmitted && !hasConflict && (\r\n                        <div style={{\r\n                          padding: '12px',\r\n                          backgroundColor: '#eff6ff',\r\n                          borderRadius: '6px',\r\n                          marginBottom: '16px',\r\n                          borderLeft: '3px solid #3b82f6'\r\n                        }}>\r\n                          <p style={{ margin: '0', fontSize: '13px', color: '#1e40af' }}>\r\n                            <strong>‚ö†Ô∏è Note:</strong> You can mark attendance only ONCE per session. You will be marked as {status.toUpperCase()} based on the current time. Submit before session ends!\r\n                          </p>\r\n                        </div>\r\n                      )}\r\n\r\n                      {/* Already Submitted Info Box */}\r\n                      {isSubmitted && (\r\n                        <div style={{\r\n                          padding: '12px',\r\n                          backgroundColor: '#d1fae5',\r\n                          borderRadius: '6px',\r\n                          marginBottom: '16px',\r\n                          borderLeft: '3px solid #10b981'\r\n                        }}>\r\n                          <p style={{ margin: '0', fontSize: '13px', color: '#065f46' }}>\r\n                            <strong>‚úÖ Already Marked:</strong> You submitted attendance as {isSubmitted.toUpperCase()}. You cannot mark again for this session.\r\n                          </p>\r\n                        </div>\r\n                      )}\r\n\r\n                      {/* Action Button */}\r\n                      <button\r\n                        onClick={() => handleMarkAttendance(session.id)}\r\n                        disabled={isSubmitted || isMarking || hasConflict}\r\n                        style={{\r\n                          width: '100%',\r\n                          padding: '12px 16px',\r\n                          backgroundColor: isSubmitted || hasConflict ? '#d1d5db' : '#3b82f6',\r\n                          color: 'white',\r\n                          border: 'none',\r\n                          borderRadius: '6px',\r\n                          fontSize: '15px',\r\n                          fontWeight: '600',\r\n                          cursor: isSubmitted || isMarking || hasConflict ? 'not-allowed' : 'pointer',\r\n                          opacity: isSubmitted || isMarking || hasConflict ? 0.6 : 1,\r\n                          transition: 'background-color 0.2s'\r\n                        }}\r\n                        onMouseEnter={(e) => {\r\n                          if (!isSubmitted && !isMarking && !hasConflict) {\r\n                            e.target.style.backgroundColor = '#2563eb';\r\n                          }\r\n                        }}\r\n                        onMouseLeave={(e) => {\r\n                          if (!isSubmitted && !isMarking && !hasConflict) {\r\n                            e.target.style.backgroundColor = '#3b82f6';\r\n                          }\r\n                        }}\r\n                        title={hasConflict ? 'Disabled due to time conflict with another marked session' : ''}\r\n                      >\r\n                        {isMarking ? '‚è≥ Submitting...' : isSubmitted ? `‚úì MARKED ALREADY (${isSubmitted.toUpperCase()})` : hasConflict ? `‚õî BLOCKED (Time Conflict)` : `‚úÖ Mark ${status.toUpperCase()}`}\r\n                      </button>\r\n                    </div>\r\n                  </Card>\r\n                );\r\n              })}\r\n            </div>\r\n          </div>\r\n        )}\r\n\r\n        {/* How It Works Section */}\r\n        <Card style={{ boxShadow: '0 1px 3px rgba(0,0,0,0.1)', marginTop: '32px' }}>\r\n          <div style={{ padding: '24px' }}>\r\n            <h2 style={{ margin: '0 0 24px 0', fontSize: '18px', fontWeight: '700', color: '#1f2937' }}>\r\n              üìã How Attendance Works\r\n            </h2>\r\n\r\n            <div style={{\r\n              display: 'grid',\r\n              gridTemplateColumns: 'repeat(auto-fit, minmax(300px, 1fr))',\r\n              gap: '20px'\r\n            }}>\r\n              {[\r\n                {\r\n                  step: '1',\r\n                  title: 'Instructor Starts Session',\r\n                  desc: 'Your instructor creates an attendance session in their dashboard',\r\n                  icon: 'üë®‚Äçüè´'\r\n                },\r\n                {\r\n                  step: '2',\r\n                  title: 'Session Appears Here',\r\n                  desc: 'Active sessions automatically show on this page in real-time',\r\n                  icon: 'üîÑ'\r\n                },\r\n                {\r\n                  step: '3',\r\n                  title: 'Submit Attendance',\r\n                  desc: 'Click the \"Mark\" button to submit your attendance',\r\n                  icon: 'üëÜ'\r\n                },\r\n                {\r\n                  step: '4',\r\n                  title: 'Automatic Status',\r\n                  desc: 'PRESENT if within 15 min, otherwise LATE',\r\n                  icon: '‚è±Ô∏è'\r\n                },\r\n                {\r\n                  step: '5',\r\n                  title: 'Immutable Record',\r\n                  desc: 'Once submitted, your attendance record cannot be changed',\r\n                  icon: 'üîí'\r\n                },\r\n                {\r\n                  step: '6',\r\n                  title: 'Check Your History',\r\n                  desc: 'View all your attendance records in your history page',\r\n                  icon: 'üìä'\r\n                }\r\n              ].map((item, idx) => (\r\n                <div\r\n                  key={idx}\r\n                  style={{\r\n                    padding: '20px',\r\n                    backgroundColor: '#f9fafb',\r\n                    borderRadius: '8px',\r\n                    border: '1px solid #e5e7eb'\r\n                  }}\r\n                >\r\n                  <div style={{\r\n                    display: 'flex',\r\n                    alignItems: 'center',\r\n                    marginBottom: '12px',\r\n                    gap: '12px'\r\n                  }}>\r\n                    <div style={{\r\n                      width: '32px',\r\n                      height: '32px',\r\n                      borderRadius: '50%',\r\n                      backgroundColor: '#3b82f6',\r\n                      color: 'white',\r\n                      display: 'flex',\r\n                      alignItems: 'center',\r\n                      justifyContent: 'center',\r\n                      fontWeight: '700',\r\n                      fontSize: '14px'\r\n                    }}>\r\n                      {item.step}\r\n                    </div>\r\n                    <div style={{ fontSize: '20px' }}>{item.icon}</div>\r\n                  </div>\r\n                  <h3 style={{ margin: '0 0 6px 0', fontSize: '14px', fontWeight: '700', color: '#1f2937' }}>\r\n                    {item.title}\r\n                  </h3>\r\n                  <p style={{ margin: '0', fontSize: '13px', color: '#6b7280', lineHeight: '1.5' }}>\r\n                    {item.desc}\r\n                  </p>\r\n                </div>\r\n              ))}\r\n            </div>\r\n          </div>\r\n        </Card>\r\n      </div>\r\n    </Layout>\r\n  );\r\n};\r\n\r\nexport default StudentMarkAttendance;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}