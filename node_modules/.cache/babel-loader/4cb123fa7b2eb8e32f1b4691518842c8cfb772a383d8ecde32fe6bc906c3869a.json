{"ast":null,"code":"import _objectSpread from\"C:/Users/PFI/Desktop/ATTENDANCE/ATTENDANCE/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import React,{useState,useEffect}from'react';import{useNavigate}from'react-router-dom';import{supabase}from'../supabase/supabase';import{useAuth}from'../contexts/AuthContext';import{delegateFetchAssignedClasses,delegateFetchSessionAttendance,delegateFetchStats}from'../utils/dashboardQueries';import{SESSION_STATUS,ATTENDANCE_STATUS,createSessionWithValidation,checkOverlappingSessions}from'../utils/sessionLifecycle';import{useSessionLifecycle,useSessionCountdown}from'../hooks/useSessionLifecycle';import{User,LayoutDashboard,GraduationCap,PlayCircle,Calendar,History,CheckCircle,Sun,Moon,LogOut,ChevronLeft,ChevronRight,Plus,CalendarDays,Radio,CalendarX,X}from'lucide-react';import{jsx as _jsx,jsxs as _jsxs,Fragment as _Fragment}from\"react/jsx-runtime\";const DelegateDashboard=()=>{var _currentUser$email;const{currentUser,userRole,loading,logout}=useAuth();const navigate=useNavigate();const[sidebarOpen,setSidebarOpen]=useState(true);const[darkMode,setDarkMode]=useState(()=>{// Check localStorage for saved preference, default to false\nconst saved=localStorage.getItem('delegateDarkMode');return saved?JSON.parse(saved):false;});const[activeTab,setActiveTab]=useState('overview');// Data states\nconst[assignedClasses,setAssignedClasses]=useState([]);const[selectedSession,setSelectedSession]=useState(null);const[sessionAttendance,setSessionAttendance]=useState([]);const[stats,setStats]=useState({activeSessions:0,totalSessions:0,totalMarked:0,todaySessions:0,error:null});// UI states\nconst[loadingData,setLoadingData]=useState(true);const[showCreateModal,setShowCreateModal]=useState(false);const[creating,setCreating]=useState(false);const[createForm,setCreateForm]=useState({classId:'',date:new Date().toISOString().split('T')[0],startTime:'08:00',endTime:'10:00'});const[createError,setCreateError]=useState(null);const[successMessage,setSuccessMessage]=useState(null);// Use session lifecycle hook for real-time session management\nconst{sessions,activeSessions,upcomingSessions,pastSessions,loading:sessionsLoading,error:sessionsError,refresh:refreshSessions,getSessionTimeRemaining}=useSessionLifecycle(currentUser===null||currentUser===void 0?void 0:currentUser.id,'delegate');// Apply dark mode class to document\nuseEffect(()=>{if(darkMode){document.documentElement.classList.add('dark');}else{document.documentElement.classList.remove('dark');}// Save preference to localStorage\nlocalStorage.setItem('delegateDarkMode',JSON.stringify(darkMode));},[darkMode]);// Auth check\nuseEffect(()=>{if(!loading&&(!currentUser||userRole!=='delegate')){navigate('/delegate');return;}if(!loading&&currentUser&&userRole==='delegate'){fetchAllData();const interval=setInterval(fetchAllData,30000);return()=>clearInterval(interval);}},[currentUser,userRole,loading,navigate]);// Clear success message after 5 seconds\nuseEffect(()=>{if(successMessage){const timer=setTimeout(()=>setSuccessMessage(null),5000);return()=>clearTimeout(timer);}},[successMessage]);const fetchAllData=async()=>{try{setLoadingData(true);const[classesData,statsData]=await Promise.all([delegateFetchAssignedClasses(currentUser.id),delegateFetchStats(currentUser.id)]);setAssignedClasses(classesData.classes);setStats(statsData);}catch(error){console.error('Error fetching delegate data:',error);}finally{setLoadingData(false);}};const handleCreateSession=async e=>{e.preventDefault();setCreateError(null);if(!createForm.classId){setCreateError('Please select a class');return;}// Validate times\nif(createForm.startTime>=createForm.endTime){setCreateError('End time must be after start time');return;}try{setCreating(true);// Check for overlapping sessions\nconst{hasOverlap,overlappingSessions}=await checkOverlappingSessions(createForm.classId,createForm.date,createForm.startTime,createForm.endTime);if(hasOverlap){setCreateError(\"Session overlaps with existing session(s) at \".concat(overlappingSessions.map(s=>s.start_time).join(', ')));return;}// Create session with validation\nconst{session,error}=await createSessionWithValidation(currentUser.id,createForm.classId,createForm.date,createForm.startTime,createForm.endTime);if(error){setCreateError(error);return;}setSuccessMessage('Session created successfully!');setShowCreateModal(false);setCreateForm({classId:'',date:new Date().toISOString().split('T')[0],startTime:'08:00',endTime:'10:00'});fetchAllData();refreshSessions();}catch(error){setCreateError(error.message);}finally{setCreating(false);}};const handleViewAttendance=async sessionId=>{try{const{attendance,error}=await delegateFetchSessionAttendance(sessionId);if(error){alert('Error fetching attendance: '+error);return;}const session=[...activeSessions,...upcomingSessions,...pastSessions].find(s=>s.id===sessionId);setSelectedSession(session);setSessionAttendance(attendance);setActiveTab('attendance');}catch(error){alert('Error: '+error.message);}};const handleLogout=async()=>{try{await logout();navigate('/login');}catch(error){console.error('Logout error:',error);}};const getStatusBadgeClass=status=>{switch(status){case SESSION_STATUS.SCHEDULED:return'bg-blue-100 dark:bg-blue-900/30 text-blue-700 dark:text-blue-400';case SESSION_STATUS.OPEN:return'bg-green-100 dark:bg-green-900/30 text-green-700 dark:text-green-400';case SESSION_STATUS.CLOSED:return'bg-gray-100 dark:bg-gray-700 text-gray-700 dark:text-gray-400';default:return'bg-gray-100 dark:bg-gray-700 text-gray-700 dark:text-gray-400';}};const getStatusLabel=status=>{switch(status){case SESSION_STATUS.SCHEDULED:return'Scheduled';case SESSION_STATUS.OPEN:return'Open';case SESSION_STATUS.CLOSED:return'Closed';default:return status;}};if(loading){return/*#__PURE__*/_jsx(\"div\",{className:\"flex items-center justify-center h-screen bg-gradient-to-br from-gray-50 to-gray-100 dark:from-gray-900 dark:to-gray-800\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"text-center\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"inline-block animate-spin rounded-full h-12 w-12 border-4 border-blue-300 border-t-blue-600 mb-4\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-gray-700 dark:text-gray-300 font-medium\",children:\"Loading Dashboard...\"})]})});}if(!currentUser||userRole!=='delegate'){return null;}const navItems=[{id:'overview',label:'Overview',icon:LayoutDashboard},{id:'classes',label:'My Classes',icon:GraduationCap},{id:'active',label:'Active Sessions',icon:PlayCircle,badge:activeSessions.length},{id:'scheduled',label:'Scheduled',icon:Calendar,badge:upcomingSessions.length},{id:'history',label:'History',icon:History},{id:'attendance',label:'Attendance',icon:CheckCircle}];return/*#__PURE__*/_jsxs(\"div\",{className:\"flex h-screen overflow-hidden \".concat(darkMode?'dark':''),children:[/*#__PURE__*/_jsxs(\"aside\",{className:\"\".concat(sidebarOpen?'w-64':'w-20',\" bg-white dark:bg-gray-900 border-r border-gray-200 dark:border-gray-800 flex flex-col transition-all duration-300 shadow-lg\"),children:[/*#__PURE__*/_jsx(\"div\",{className:\"p-6 border-b border-gray-200 dark:border-gray-800\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center gap-3\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"w-10 h-10 rounded-lg bg-gradient-to-br from-blue-600 to-blue-700 flex items-center justify-center text-white font-bold\",children:/*#__PURE__*/_jsx(User,{className:\"w-6 h-6\"})}),sidebarOpen&&/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"p\",{className:\"font-bold text-sm text-gray-900 dark:text-white\",children:\"Delegate\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-xs text-gray-500 dark:text-gray-400\",children:\"Portal\"})]})]})}),/*#__PURE__*/_jsx(\"nav\",{className:\"flex-1 overflow-y-auto px-3 py-6 space-y-2\",children:navItems.map(item=>/*#__PURE__*/_jsxs(\"button\",{onClick:()=>setActiveTab(item.id),className:\"w-full flex items-center gap-3 px-4 py-3 rounded-lg transition-all \".concat(activeTab===item.id?'bg-blue-50 dark:bg-blue-900/30 text-blue-600 dark:text-blue-400 font-semibold':'text-gray-700 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-800'),children:[/*#__PURE__*/_jsx(item.icon,{className:\"w-5 h-5\"}),sidebarOpen&&/*#__PURE__*/_jsx(\"span\",{className:\"text-sm flex-1 text-left\",children:item.label}),sidebarOpen&&item.badge>0&&/*#__PURE__*/_jsx(\"span\",{className:\"px-2 py-0.5 bg-blue-500 text-white text-xs rounded-full\",children:item.badge})]},item.id))}),/*#__PURE__*/_jsxs(\"div\",{className:\"p-3 border-t border-gray-200 dark:border-gray-800 space-y-2\",children:[/*#__PURE__*/_jsxs(\"button\",{onClick:()=>setDarkMode(!darkMode),className:\"w-full flex items-center gap-3 px-4 py-3 rounded-lg text-gray-700 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-800 transition-all\",children:[darkMode?/*#__PURE__*/_jsx(Sun,{className:\"w-5 h-5\"}):/*#__PURE__*/_jsx(Moon,{className:\"w-5 h-5\"}),sidebarOpen&&/*#__PURE__*/_jsx(\"span\",{className:\"text-sm\",children:\"Theme\"})]}),/*#__PURE__*/_jsxs(\"button\",{onClick:handleLogout,className:\"w-full flex items-center gap-3 px-4 py-3 rounded-lg text-red-600 dark:text-red-400 hover:bg-red-50 dark:hover:bg-red-900/10 transition-all\",children:[/*#__PURE__*/_jsx(LogOut,{className:\"w-5 h-5\"}),sidebarOpen&&/*#__PURE__*/_jsx(\"span\",{className:\"text-sm font-semibold\",children:\"Logout\"})]})]}),/*#__PURE__*/_jsx(\"div\",{className:\"p-3 border-t border-gray-200 dark:border-gray-800\",children:/*#__PURE__*/_jsx(\"button\",{onClick:()=>setSidebarOpen(!sidebarOpen),className:\"w-full flex items-center justify-center py-2 rounded-lg text-gray-500 hover:bg-gray-100 dark:hover:bg-gray-800 transition-all\",children:sidebarOpen?/*#__PURE__*/_jsx(ChevronLeft,{className:\"w-5 h-5\"}):/*#__PURE__*/_jsx(ChevronRight,{className:\"w-5 h-5\"})})})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex-1 flex flex-col overflow-hidden bg-gray-50 dark:bg-gray-950\",children:[/*#__PURE__*/_jsx(\"header\",{className:\"sticky top-0 z-40 bg-white dark:bg-gray-900 border-b border-gray-200 dark:border-gray-800 shadow-sm\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"px-8 py-4 flex items-center justify-between\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h1\",{className:\"text-2xl font-bold text-gray-900 dark:text-white\",children:\"Attendance Management Portal\"}),/*#__PURE__*/_jsxs(\"p\",{className:\"text-sm text-gray-500 dark:text-gray-400\",children:[\"Welcome, \",(currentUser===null||currentUser===void 0?void 0:currentUser.name)||(currentUser===null||currentUser===void 0?void 0:currentUser.email)]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center gap-4\",children:[/*#__PURE__*/_jsxs(\"button\",{className:\"px-4 py-2 bg-blue-600 text-white rounded-lg text-sm font-semibold hover:bg-blue-700 transition-colors flex items-center gap-2\",onClick:()=>setShowCreateModal(true),children:[/*#__PURE__*/_jsx(Plus,{className:\"w-4 h-4\"}),\"New Session\"]}),/*#__PURE__*/_jsx(\"div\",{className:\"w-10 h-10 rounded-full bg-gradient-to-br from-blue-600 to-blue-700 flex items-center justify-center text-white font-bold cursor-pointer\",children:currentUser===null||currentUser===void 0?void 0:(_currentUser$email=currentUser.email)===null||_currentUser$email===void 0?void 0:_currentUser$email.charAt(0).toUpperCase()})]})]})}),/*#__PURE__*/_jsx(\"main\",{className:\"flex-1 overflow-y-auto\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"p-8 max-w-7xl mx-auto\",children:[successMessage&&/*#__PURE__*/_jsx(\"div\",{className:\"mb-6 p-4 bg-green-50 dark:bg-green-900/20 border border-green-200 dark:border-green-800 rounded-lg\",children:/*#__PURE__*/_jsx(\"p\",{className:\"text-green-700 dark:text-green-400 font-medium\",children:successMessage})}),sessionsError&&/*#__PURE__*/_jsx(\"div\",{className:\"mb-6 p-4 bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-lg\",children:/*#__PURE__*/_jsx(\"p\",{className:\"text-red-700 dark:text-red-400 font-medium\",children:sessionsError})}),activeTab==='overview'&&/*#__PURE__*/_jsxs(\"div\",{className:\"space-y-8\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"grid grid-cols-1 md:grid-cols-4 gap-4\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white dark:bg-gray-900 rounded-xl p-6 shadow-sm border border-gray-200 dark:border-gray-800 hover:shadow-lg transition-shadow\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-start justify-between mb-4\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"p\",{className:\"text-sm text-gray-600 dark:text-gray-400 font-medium mb-1\",children:\"Active Sessions\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-3xl font-bold text-gray-900 dark:text-white\",children:activeSessions.length})]}),/*#__PURE__*/_jsx(\"div\",{className:\"p-3 bg-green-100 dark:bg-green-900/30 rounded-lg\",children:/*#__PURE__*/_jsx(PlayCircle,{className:\"w-6 h-6 text-green-600 dark:text-green-400\"})})]}),/*#__PURE__*/_jsx(\"p\",{className:\"text-xs text-gray-500 dark:text-gray-400\",children:\"Currently open for attendance\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white dark:bg-gray-900 rounded-xl p-6 shadow-sm border border-gray-200 dark:border-gray-800 hover:shadow-lg transition-shadow\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-start justify-between mb-4\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"p\",{className:\"text-sm text-gray-600 dark:text-gray-400 font-medium mb-1\",children:\"Scheduled\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-3xl font-bold text-gray-900 dark:text-white\",children:upcomingSessions.length})]}),/*#__PURE__*/_jsx(\"div\",{className:\"p-3 bg-blue-100 dark:bg-blue-900/30 rounded-lg\",children:/*#__PURE__*/_jsx(Calendar,{className:\"w-6 h-6 text-blue-600 dark:text-blue-400\"})})]}),/*#__PURE__*/_jsx(\"p\",{className:\"text-xs text-gray-500 dark:text-gray-400\",children:\"Upcoming sessions\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white dark:bg-gray-900 rounded-xl p-6 shadow-sm border border-gray-200 dark:border-gray-800 hover:shadow-lg transition-shadow\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-start justify-between mb-4\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"p\",{className:\"text-sm text-gray-600 dark:text-gray-400 font-medium mb-1\",children:\"Total Sessions\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-3xl font-bold text-gray-900 dark:text-white\",children:stats.totalSessions})]}),/*#__PURE__*/_jsx(\"div\",{className:\"p-3 bg-indigo-100 dark:bg-indigo-900/30 rounded-lg\",children:/*#__PURE__*/_jsx(CalendarDays,{className:\"w-6 h-6 text-indigo-600 dark:text-indigo-400\"})})]}),/*#__PURE__*/_jsx(\"p\",{className:\"text-xs text-gray-500 dark:text-gray-400\",children:\"All time\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white dark:bg-gray-900 rounded-xl p-6 shadow-sm border border-gray-200 dark:border-gray-800 hover:shadow-lg transition-shadow\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-start justify-between mb-4\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"p\",{className:\"text-sm text-gray-600 dark:text-gray-400 font-medium mb-1\",children:\"Attendance Marked\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-3xl font-bold text-gray-900 dark:text-white\",children:stats.totalMarked})]}),/*#__PURE__*/_jsx(\"div\",{className:\"p-3 bg-amber-100 dark:bg-amber-900/30 rounded-lg\",children:/*#__PURE__*/_jsx(CheckCircle,{className:\"w-6 h-6 text-amber-600 dark:text-amber-400\"})})]}),/*#__PURE__*/_jsx(\"p\",{className:\"text-xs text-gray-500 dark:text-gray-400\",children:\"Total records\"})]})]}),activeSessions.length>0&&/*#__PURE__*/_jsx(\"div\",{className:\"p-4 bg-green-50 dark:bg-green-900/20 border border-green-200 dark:border-green-800 rounded-xl\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center gap-3\",children:[/*#__PURE__*/_jsx(Radio,{className:\"w-6 h-6 text-green-600 dark:text-green-400 animate-pulse\"}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsxs(\"p\",{className:\"font-semibold text-green-900 dark:text-green-300\",children:[activeSessions.length,\" Session\",activeSessions.length>1?'s':'',\" Currently Active\"]}),/*#__PURE__*/_jsx(\"p\",{className:\"text-sm text-green-700 dark:text-green-400\",children:\"Students can mark attendance now. Sessions will auto-close at end time.\"})]})]})}),activeSessions.length>0&&/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white dark:bg-gray-900 rounded-xl p-6 shadow-sm border border-gray-200 dark:border-gray-800\",children:[/*#__PURE__*/_jsxs(\"h3\",{className:\"text-lg font-bold text-gray-900 dark:text-white mb-6 flex items-center gap-2\",children:[/*#__PURE__*/_jsx(PlayCircle,{className:\"w-5 h-5 text-green-600\"}),\"Active Sessions\"]}),/*#__PURE__*/_jsx(\"div\",{className:\"space-y-4\",children:activeSessions.map(session=>/*#__PURE__*/_jsx(SessionCard,{session:session,onViewAttendance:()=>handleViewAttendance(session.id),getTimeRemaining:getSessionTimeRemaining,getStatusBadgeClass:getStatusBadgeClass,getStatusLabel:getStatusLabel},session.id))})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white dark:bg-gray-900 rounded-xl p-6 shadow-sm border border-gray-200 dark:border-gray-800\",children:[/*#__PURE__*/_jsx(\"h3\",{className:\"text-lg font-bold text-gray-900 dark:text-white mb-6\",children:\"My Assigned Classes\"}),assignedClasses.length>0?/*#__PURE__*/_jsx(\"div\",{className:\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4\",children:assignedClasses.map(cls=>/*#__PURE__*/_jsxs(\"div\",{className:\"p-4 rounded-lg border border-gray-200 dark:border-gray-700 hover:shadow-lg transition-shadow\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-start justify-between mb-3\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"p\",{className:\"font-semibold text-gray-900 dark:text-white\",children:cls.courseTitle}),/*#__PURE__*/_jsx(\"p\",{className:\"text-xs text-gray-500 dark:text-gray-400\",children:cls.courseCode})]}),/*#__PURE__*/_jsx(\"span\",{className:\"px-2 py-1 rounded-full text-xs font-semibold \".concat(cls.hasActiveSession?'bg-green-100 dark:bg-green-900/30 text-green-700 dark:text-green-400':'bg-gray-100 dark:bg-gray-700 text-gray-700 dark:text-gray-400'),children:cls.sessionToday})]}),/*#__PURE__*/_jsx(\"p\",{className:\"text-sm text-gray-600 dark:text-gray-400 mb-4\",children:cls.className}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>{setCreateForm(prev=>_objectSpread(_objectSpread({},prev),{},{classId:cls.id}));setShowCreateModal(true);},className:\"w-full px-3 py-2 bg-blue-100 dark:bg-blue-900/30 text-blue-700 dark:text-blue-400 rounded-lg text-sm font-semibold hover:bg-blue-200 dark:hover:bg-blue-900/50 transition-colors\",children:\"Open Session\"})]},cls.id))}):/*#__PURE__*/_jsx(\"div\",{className:\"text-center py-12\",children:/*#__PURE__*/_jsx(\"p\",{className:\"text-gray-500 dark:text-gray-400\",children:\"No classes assigned yet\"})})]})]}),activeTab==='classes'&&/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h2\",{className:\"text-2xl font-bold text-gray-900 dark:text-white mb-6\",children:\"My Classes\"}),assignedClasses.length>0?/*#__PURE__*/_jsx(\"div\",{className:\"grid grid-cols-1 lg:grid-cols-2 gap-6\",children:assignedClasses.map(cls=>/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white dark:bg-gray-900 rounded-xl p-6 shadow-sm border border-gray-200 dark:border-gray-800\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-start justify-between mb-4\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h3\",{className:\"text-lg font-bold text-gray-900 dark:text-white\",children:cls.courseTitle}),/*#__PURE__*/_jsx(\"p\",{className:\"text-sm text-gray-600 dark:text-gray-400\",children:cls.courseCode})]}),/*#__PURE__*/_jsx(\"span\",{className:\"px-3 py-1 bg-blue-100 dark:bg-blue-900/30 text-blue-700 dark:text-blue-400 rounded-full text-xs font-semibold\",children:cls.program})]}),/*#__PURE__*/_jsx(\"p\",{className:\"text-gray-700 dark:text-gray-300 mb-4\",children:cls.className}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>{setCreateForm(prev=>_objectSpread(_objectSpread({},prev),{},{classId:cls.id}));setShowCreateModal(true);},className:\"w-full px-4 py-2 bg-blue-600 text-white rounded-lg text-sm font-semibold hover:bg-blue-700 transition-colors\",children:\"Create Session\"})]},cls.id))}):/*#__PURE__*/_jsx(\"div\",{className:\"bg-white dark:bg-gray-900 rounded-xl p-12 text-center shadow-sm border border-gray-200 dark:border-gray-800\",children:/*#__PURE__*/_jsx(\"p\",{className:\"text-gray-600 dark:text-gray-400\",children:\"No classes assigned\"})})]}),activeTab==='active'&&/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsxs(\"h2\",{className:\"text-2xl font-bold text-gray-900 dark:text-white mb-6 flex items-center gap-2\",children:[/*#__PURE__*/_jsx(PlayCircle,{className:\"w-5 h-5 text-green-600\"}),\"Active Sessions\"]}),activeSessions.length>0?/*#__PURE__*/_jsx(\"div\",{className:\"space-y-4\",children:activeSessions.map(session=>/*#__PURE__*/_jsx(SessionCard,{session:session,onViewAttendance:()=>handleViewAttendance(session.id),getTimeRemaining:getSessionTimeRemaining,getStatusBadgeClass:getStatusBadgeClass,getStatusLabel:getStatusLabel,expanded:true},session.id))}):/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white dark:bg-gray-900 rounded-xl p-12 text-center shadow-sm border border-gray-200 dark:border-gray-800\",children:[/*#__PURE__*/_jsx(CalendarX,{className:\"w-16 h-16 text-gray-300 dark:text-gray-600 mb-4\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-gray-600 dark:text-gray-400\",children:\"No active sessions\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-sm text-gray-500 dark:text-gray-500 mt-2\",children:\"Sessions will appear here when they start\"})]})]}),activeTab==='scheduled'&&/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsxs(\"h2\",{className:\"text-2xl font-bold text-gray-900 dark:text-white mb-6 flex items-center gap-2\",children:[/*#__PURE__*/_jsx(Calendar,{className:\"w-5 h-5 text-blue-600\"}),\"Scheduled Sessions\"]}),upcomingSessions.length>0?/*#__PURE__*/_jsx(\"div\",{className:\"space-y-4\",children:upcomingSessions.map(session=>{var _getSessionTimeRemain;return/*#__PURE__*/_jsx(\"div\",{className:\"bg-white dark:bg-gray-900 rounded-xl p-6 shadow-sm border border-gray-200 dark:border-gray-800\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center justify-between\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"p\",{className:\"font-semibold text-gray-900 dark:text-white\",children:session.courseTitle}),/*#__PURE__*/_jsx(\"p\",{className:\"text-sm text-gray-600 dark:text-gray-400\",children:session.className}),/*#__PURE__*/_jsxs(\"p\",{className:\"text-xs text-gray-500 dark:text-gray-500 mt-1\",children:[session.date,\" \\u2022 \",session.startTime,\" - \",session.endTime]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"text-right\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"px-3 py-1 rounded-full text-xs font-semibold \".concat(getStatusBadgeClass(session.status)),children:getStatusLabel(session.status)}),/*#__PURE__*/_jsx(\"p\",{className:\"text-xs text-gray-500 dark:text-gray-400 mt-2\",children:(_getSessionTimeRemain=getSessionTimeRemaining(session))===null||_getSessionTimeRemain===void 0?void 0:_getSessionTimeRemain.formatted})]})]})},session.id);})}):/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white dark:bg-gray-900 rounded-xl p-12 text-center shadow-sm border border-gray-200 dark:border-gray-800\",children:[/*#__PURE__*/_jsx(Calendar,{className:\"w-16 h-16 text-gray-300 dark:text-gray-600 mb-4\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-gray-600 dark:text-gray-400\",children:\"No scheduled sessions\"}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>setShowCreateModal(true),className:\"mt-4 px-4 py-2 bg-blue-600 text-white rounded-lg text-sm font-semibold hover:bg-blue-700 transition-colors\",children:\"Create New Session\"})]})]}),activeTab==='history'&&/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsxs(\"h2\",{className:\"text-2xl font-bold text-gray-900 dark:text-white mb-6 flex items-center gap-2\",children:[/*#__PURE__*/_jsx(History,{className:\"w-5 h-5 text-gray-600\"}),\"Session History\"]}),pastSessions.length>0?/*#__PURE__*/_jsx(\"div\",{className:\"overflow-x-auto bg-white dark:bg-gray-900 rounded-xl shadow-sm border border-gray-200 dark:border-gray-800\",children:/*#__PURE__*/_jsxs(\"table\",{className:\"w-full text-sm\",children:[/*#__PURE__*/_jsx(\"thead\",{children:/*#__PURE__*/_jsxs(\"tr\",{className:\"border-b border-gray-200 dark:border-gray-700\",children:[/*#__PURE__*/_jsx(\"th\",{className:\"px-4 py-3 text-left font-semibold text-gray-900 dark:text-white\",children:\"Course\"}),/*#__PURE__*/_jsx(\"th\",{className:\"px-4 py-3 text-left font-semibold text-gray-900 dark:text-white\",children:\"Class\"}),/*#__PURE__*/_jsx(\"th\",{className:\"px-4 py-3 text-left font-semibold text-gray-900 dark:text-white\",children:\"Date\"}),/*#__PURE__*/_jsx(\"th\",{className:\"px-4 py-3 text-left font-semibold text-gray-900 dark:text-white\",children:\"Time\"}),/*#__PURE__*/_jsx(\"th\",{className:\"px-4 py-3 text-left font-semibold text-gray-900 dark:text-white\",children:\"Attendance\"}),/*#__PURE__*/_jsx(\"th\",{className:\"px-4 py-3 text-left font-semibold text-gray-900 dark:text-white\",children:\"Status\"}),/*#__PURE__*/_jsx(\"th\",{className:\"px-4 py-3 text-left font-semibold text-gray-900 dark:text-white\",children:\"Action\"})]})}),/*#__PURE__*/_jsx(\"tbody\",{className:\"divide-y divide-gray-200 dark:divide-gray-700\",children:pastSessions.map(session=>/*#__PURE__*/_jsxs(\"tr\",{className:\"hover:bg-gray-50 dark:hover:bg-gray-800 transition-colors\",children:[/*#__PURE__*/_jsx(\"td\",{className:\"px-4 py-3 text-gray-900 dark:text-white font-medium\",children:session.courseTitle}),/*#__PURE__*/_jsx(\"td\",{className:\"px-4 py-3 text-gray-700 dark:text-gray-300\",children:session.className}),/*#__PURE__*/_jsx(\"td\",{className:\"px-4 py-3 text-gray-700 dark:text-gray-300\",children:session.date}),/*#__PURE__*/_jsx(\"td\",{className:\"px-4 py-3 text-gray-700 dark:text-gray-300\",children:session.startTime}),/*#__PURE__*/_jsx(\"td\",{className:\"px-4 py-3 text-gray-700 dark:text-gray-300\",children:session.attendanceCount}),/*#__PURE__*/_jsx(\"td\",{className:\"px-4 py-3\",children:/*#__PURE__*/_jsx(\"span\",{className:\"px-3 py-1 rounded-full text-xs font-semibold \".concat(getStatusBadgeClass(session.status)),children:getStatusLabel(session.status)})}),/*#__PURE__*/_jsx(\"td\",{className:\"px-4 py-3\",children:/*#__PURE__*/_jsx(\"button\",{onClick:()=>handleViewAttendance(session.id),className:\"text-blue-600 dark:text-blue-400 hover:underline text-sm font-semibold\",children:\"View\"})})]},session.id))})]})}):/*#__PURE__*/_jsx(\"div\",{className:\"bg-white dark:bg-gray-900 rounded-xl p-12 text-center shadow-sm border border-gray-200 dark:border-gray-800\",children:/*#__PURE__*/_jsx(\"p\",{className:\"text-gray-600 dark:text-gray-400\",children:\"No session history yet\"})})]}),activeTab==='attendance'&&selectedSession&&/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsxs(\"div\",{className:\"mb-6 flex items-center justify-between\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h2\",{className:\"text-2xl font-bold text-gray-900 dark:text-white\",children:selectedSession.courseTitle}),/*#__PURE__*/_jsxs(\"p\",{className:\"text-sm text-gray-600 dark:text-gray-400\",children:[selectedSession.date,\" \\u2022 \",selectedSession.startTime]})]}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>setActiveTab('history'),className:\"px-4 py-2 border border-gray-300 dark:border-gray-600 text-gray-700 dark:text-gray-300 rounded-lg text-sm font-semibold hover:bg-gray-100 dark:hover:bg-gray-800 transition-colors\",children:\"Back to History\"})]}),sessionAttendance.length>0?/*#__PURE__*/_jsx(\"div\",{className:\"bg-white dark:bg-gray-900 rounded-xl shadow-sm border border-gray-200 dark:border-gray-800 overflow-hidden\",children:/*#__PURE__*/_jsxs(\"table\",{className:\"w-full text-sm\",children:[/*#__PURE__*/_jsx(\"thead\",{children:/*#__PURE__*/_jsxs(\"tr\",{className:\"border-b border-gray-200 dark:border-gray-700 bg-gray-50 dark:bg-gray-800\",children:[/*#__PURE__*/_jsx(\"th\",{className:\"px-4 py-3 text-left font-semibold text-gray-900 dark:text-white\",children:\"Student Name\"}),/*#__PURE__*/_jsx(\"th\",{className:\"px-4 py-3 text-left font-semibold text-gray-900 dark:text-white\",children:\"Matricule\"}),/*#__PURE__*/_jsx(\"th\",{className:\"px-4 py-3 text-left font-semibold text-gray-900 dark:text-white\",children:\"Timestamp\"}),/*#__PURE__*/_jsx(\"th\",{className:\"px-4 py-3 text-left font-semibold text-gray-900 dark:text-white\",children:\"Status\"})]})}),/*#__PURE__*/_jsx(\"tbody\",{className:\"divide-y divide-gray-200 dark:divide-gray-700\",children:sessionAttendance.map(attendance=>/*#__PURE__*/_jsxs(\"tr\",{className:\"hover:bg-gray-50 dark:hover:bg-gray-800 transition-colors\",children:[/*#__PURE__*/_jsx(\"td\",{className:\"px-4 py-3 text-gray-900 dark:text-white font-medium\",children:attendance.studentName}),/*#__PURE__*/_jsx(\"td\",{className:\"px-4 py-3 text-gray-700 dark:text-gray-300\",children:attendance.studentMatricule}),/*#__PURE__*/_jsx(\"td\",{className:\"px-4 py-3 text-gray-700 dark:text-gray-300\",children:attendance.timestamp}),/*#__PURE__*/_jsx(\"td\",{className:\"px-4 py-3\",children:/*#__PURE__*/_jsx(\"span\",{className:\"px-3 py-1 rounded-full text-xs font-semibold \".concat(attendance.status===ATTENDANCE_STATUS.PRESENT?'bg-green-100 dark:bg-green-900/30 text-green-700 dark:text-green-400':attendance.status===ATTENDANCE_STATUS.LATE?'bg-yellow-100 dark:bg-yellow-900/30 text-yellow-700 dark:text-yellow-400':'bg-red-100 dark:bg-red-900/30 text-red-700 dark:text-red-400'),children:attendance.status===ATTENDANCE_STATUS.PRESENT?'Present':attendance.status===ATTENDANCE_STATUS.LATE?'Late':'Absent'})})]},attendance.id))})]})}):/*#__PURE__*/_jsx(\"div\",{className:\"bg-white dark:bg-gray-900 rounded-xl p-12 text-center shadow-sm border border-gray-200 dark:border-gray-800\",children:/*#__PURE__*/_jsx(\"p\",{className:\"text-gray-600 dark:text-gray-400\",children:\"No attendance recorded yet\"})})]})]})})]}),showCreateModal&&/*#__PURE__*/_jsx(\"div\",{className:\"fixed inset-0 bg-black/50 flex items-center justify-center z-50\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white dark:bg-gray-900 rounded-xl p-6 shadow-xl max-w-md w-full mx-4\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center justify-between mb-6\",children:[/*#__PURE__*/_jsx(\"h3\",{className:\"text-lg font-bold text-gray-900 dark:text-white\",children:\"Create New Session\"}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>{setShowCreateModal(false);setCreateError(null);},className:\"text-gray-500 hover:text-gray-700 dark:hover:text-gray-300\",children:/*#__PURE__*/_jsx(X,{className:\"w-5 h-5\"})})]}),createError&&/*#__PURE__*/_jsx(\"div\",{className:\"mb-4 p-3 bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-lg\",children:/*#__PURE__*/_jsx(\"p\",{className:\"text-sm text-red-700 dark:text-red-400\",children:createError})}),/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleCreateSession,className:\"space-y-4\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2\",children:\"Select Class\"}),/*#__PURE__*/_jsxs(\"select\",{value:createForm.classId,onChange:e=>setCreateForm(_objectSpread(_objectSpread({},createForm),{},{classId:e.target.value})),className:\"w-full px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-800 text-gray-900 dark:text-white focus:ring-2 focus:ring-blue-500 focus:border-transparent\",children:[/*#__PURE__*/_jsx(\"option\",{value:\"\",children:\"Choose a class...\"}),assignedClasses.map(cls=>/*#__PURE__*/_jsxs(\"option\",{value:cls.id,children:[cls.courseTitle,\" - \",cls.className]},cls.id))]})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2\",children:\"Date\"}),/*#__PURE__*/_jsx(\"input\",{type:\"date\",value:createForm.date,onChange:e=>setCreateForm(_objectSpread(_objectSpread({},createForm),{},{date:e.target.value})),className:\"w-full px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-800 text-gray-900 dark:text-white focus:ring-2 focus:ring-blue-500 focus:border-transparent\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"grid grid-cols-2 gap-4\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2\",children:\"Start Time\"}),/*#__PURE__*/_jsx(\"input\",{type:\"time\",value:createForm.startTime,onChange:e=>setCreateForm(_objectSpread(_objectSpread({},createForm),{},{startTime:e.target.value})),className:\"w-full px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-800 text-gray-900 dark:text-white focus:ring-2 focus:ring-blue-500 focus:border-transparent\"})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2\",children:\"End Time\"}),/*#__PURE__*/_jsx(\"input\",{type:\"time\",value:createForm.endTime,onChange:e=>setCreateForm(_objectSpread(_objectSpread({},createForm),{},{endTime:e.target.value})),className:\"w-full px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-800 text-gray-900 dark:text-white focus:ring-2 focus:ring-blue-500 focus:border-transparent\"})]})]}),/*#__PURE__*/_jsx(\"div\",{className:\"p-3 bg-blue-50 dark:bg-blue-900/20 border border-blue-200 dark:border-blue-800 rounded-lg\",children:/*#__PURE__*/_jsxs(\"p\",{className:\"text-xs text-blue-700 dark:text-blue-400\",children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Session Lifecycle:\"}),\" Session will be \",/*#__PURE__*/_jsx(\"strong\",{children:\"Scheduled\"}),\" until start time, then automatically become \",/*#__PURE__*/_jsx(\"strong\",{children:\"Open\"}),\" for attendance, and \",/*#__PURE__*/_jsx(\"strong\",{children:\"Close\"}),\" at end time. Students who don't mark attendance will be marked \",/*#__PURE__*/_jsx(\"strong\",{children:\"Absent\"}),\".\"]})}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex gap-3 pt-4\",children:[/*#__PURE__*/_jsx(\"button\",{type:\"button\",onClick:()=>{setShowCreateModal(false);setCreateError(null);},className:\"flex-1 px-4 py-2 border border-gray-300 dark:border-gray-600 text-gray-700 dark:text-gray-300 rounded-lg font-semibold hover:bg-gray-100 dark:hover:bg-gray-800 transition-colors\",children:\"Cancel\"}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",disabled:creating,className:\"flex-1 px-4 py-2 bg-blue-600 text-white rounded-lg font-semibold hover:bg-blue-700 disabled:opacity-50 transition-colors flex items-center justify-center gap-2\",children:creating?/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"div\",{className:\"inline-block animate-spin rounded-full h-4 w-4 border-2 border-white border-t-transparent\"}),\"Creating...\"]}):'Create Session'})]})]})]})})]});};/**\r\n * Session Card Component for displaying session details\r\n */const SessionCard=_ref=>{let{session,onViewAttendance,getTimeRemaining,getStatusBadgeClass,getStatusLabel,expanded=false}=_ref;const timeRemaining=getTimeRemaining(session);return/*#__PURE__*/_jsx(\"div\",{className:\"bg-white dark:bg-gray-900 rounded-xl p-6 shadow-sm border border-gray-200 dark:border-gray-800 \".concat(session.status===SESSION_STATUS.OPEN?'border-l-4 border-l-green-500':''),children:/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center justify-between\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex-1\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center gap-2 mb-1\",children:[session.status===SESSION_STATUS.OPEN&&/*#__PURE__*/_jsx(\"span\",{className:\"w-2 h-2 bg-green-500 rounded-full animate-pulse\"}),/*#__PURE__*/_jsx(\"p\",{className:\"font-semibold text-gray-900 dark:text-white\",children:session.courseTitle})]}),/*#__PURE__*/_jsx(\"p\",{className:\"text-sm text-gray-600 dark:text-gray-400\",children:session.className}),/*#__PURE__*/_jsxs(\"p\",{className:\"text-xs text-gray-500 dark:text-gray-500 mt-1\",children:[session.date,\" \\u2022 \",session.startTime,\" - \",session.endTime]}),expanded&&/*#__PURE__*/_jsx(\"div\",{className:\"mt-3 flex items-center gap-4 text-sm\",children:/*#__PURE__*/_jsxs(\"span\",{className:\"text-gray-600 dark:text-gray-400\",children:[/*#__PURE__*/_jsx(\"strong\",{children:session.attendanceCount}),\" students marked\"]})})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"text-right flex flex-col items-end gap-2\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"px-3 py-1 rounded-full text-xs font-semibold \".concat(getStatusBadgeClass(session.status)),children:getStatusLabel(session.status)}),timeRemaining&&/*#__PURE__*/_jsx(\"span\",{className:\"text-xs text-gray-500 dark:text-gray-400\",children:timeRemaining.formatted}),/*#__PURE__*/_jsx(\"button\",{onClick:onViewAttendance,className:\"text-blue-600 dark:text-blue-400 hover:underline text-sm font-semibold\",children:\"View Attendance\"})]})]})});};export default DelegateDashboard;","map":{"version":3,"names":["React","useState","useEffect","useNavigate","supabase","useAuth","delegateFetchAssignedClasses","delegateFetchSessionAttendance","delegateFetchStats","SESSION_STATUS","ATTENDANCE_STATUS","createSessionWithValidation","checkOverlappingSessions","useSessionLifecycle","useSessionCountdown","User","LayoutDashboard","GraduationCap","PlayCircle","Calendar","History","CheckCircle","Sun","Moon","LogOut","ChevronLeft","ChevronRight","Plus","CalendarDays","Radio","CalendarX","X","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","DelegateDashboard","_currentUser$email","currentUser","userRole","loading","logout","navigate","sidebarOpen","setSidebarOpen","darkMode","setDarkMode","saved","localStorage","getItem","JSON","parse","activeTab","setActiveTab","assignedClasses","setAssignedClasses","selectedSession","setSelectedSession","sessionAttendance","setSessionAttendance","stats","setStats","activeSessions","totalSessions","totalMarked","todaySessions","error","loadingData","setLoadingData","showCreateModal","setShowCreateModal","creating","setCreating","createForm","setCreateForm","classId","date","Date","toISOString","split","startTime","endTime","createError","setCreateError","successMessage","setSuccessMessage","sessions","upcomingSessions","pastSessions","sessionsLoading","sessionsError","refresh","refreshSessions","getSessionTimeRemaining","id","document","documentElement","classList","add","remove","setItem","stringify","fetchAllData","interval","setInterval","clearInterval","timer","setTimeout","clearTimeout","classesData","statsData","Promise","all","classes","console","handleCreateSession","e","preventDefault","hasOverlap","overlappingSessions","concat","map","s","start_time","join","session","message","handleViewAttendance","sessionId","attendance","alert","find","handleLogout","getStatusBadgeClass","status","SCHEDULED","OPEN","CLOSED","getStatusLabel","className","children","navItems","label","icon","badge","length","item","onClick","name","email","charAt","toUpperCase","SessionCard","onViewAttendance","getTimeRemaining","cls","courseTitle","courseCode","hasActiveSession","sessionToday","prev","_objectSpread","program","expanded","_getSessionTimeRemain","formatted","attendanceCount","studentName","studentMatricule","timestamp","PRESENT","LATE","onSubmit","value","onChange","target","type","disabled","_ref","timeRemaining"],"sources":["C:/Users/PFI/Desktop/ATTENDANCE/ATTENDANCE/src/pages/DelegateDashboard.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\r\nimport { useNavigate } from 'react-router-dom';\r\nimport { supabase } from '../supabase/supabase';\r\nimport { useAuth } from '../contexts/AuthContext';\r\nimport {\r\n  delegateFetchAssignedClasses,\r\n  delegateFetchSessionAttendance,\r\n  delegateFetchStats,\r\n} from '../utils/dashboardQueries';\r\nimport {\r\n  SESSION_STATUS,\r\n  ATTENDANCE_STATUS,\r\n  createSessionWithValidation,\r\n  checkOverlappingSessions,\r\n} from '../utils/sessionLifecycle';\r\nimport { useSessionLifecycle, useSessionCountdown } from '../hooks/useSessionLifecycle';\r\nimport {\r\n  User,\r\n  LayoutDashboard,\r\n  GraduationCap,\r\n  PlayCircle,\r\n  Calendar,\r\n  History,\r\n  CheckCircle,\r\n  Sun,\r\n  Moon,\r\n  LogOut,\r\n  ChevronLeft,\r\n  ChevronRight,\r\n  Plus,\r\n  CalendarDays,\r\n  Radio,\r\n  CalendarX,\r\n  X\r\n} from 'lucide-react';\r\n\r\nconst DelegateDashboard = () => {\r\n  const { currentUser, userRole, loading, logout } = useAuth();\r\n  const navigate = useNavigate();\r\n\r\n  const [sidebarOpen, setSidebarOpen] = useState(true);\r\n  const [darkMode, setDarkMode] = useState(() => {\r\n    // Check localStorage for saved preference, default to false\r\n    const saved = localStorage.getItem('delegateDarkMode');\r\n    return saved ? JSON.parse(saved) : false;\r\n  });\r\n  const [activeTab, setActiveTab] = useState('overview');\r\n\r\n  // Data states\r\n  const [assignedClasses, setAssignedClasses] = useState([]);\r\n  const [selectedSession, setSelectedSession] = useState(null);\r\n  const [sessionAttendance, setSessionAttendance] = useState([]);\r\n  const [stats, setStats] = useState({\r\n    activeSessions: 0,\r\n    totalSessions: 0,\r\n    totalMarked: 0,\r\n    todaySessions: 0,\r\n    error: null\r\n  });\r\n\r\n  // UI states\r\n  const [loadingData, setLoadingData] = useState(true);\r\n  const [showCreateModal, setShowCreateModal] = useState(false);\r\n  const [creating, setCreating] = useState(false);\r\n  const [createForm, setCreateForm] = useState({\r\n    classId: '',\r\n    date: new Date().toISOString().split('T')[0],\r\n    startTime: '08:00',\r\n    endTime: '10:00'\r\n  });\r\n  const [createError, setCreateError] = useState(null);\r\n  const [successMessage, setSuccessMessage] = useState(null);\r\n\r\n  // Use session lifecycle hook for real-time session management\r\n  const {\r\n    sessions,\r\n    activeSessions,\r\n    upcomingSessions,\r\n    pastSessions,\r\n    loading: sessionsLoading,\r\n    error: sessionsError,\r\n    refresh: refreshSessions,\r\n    getSessionTimeRemaining\r\n  } = useSessionLifecycle(currentUser?.id, 'delegate');\r\n\r\n  // Apply dark mode class to document\r\n  useEffect(() => {\r\n    if (darkMode) {\r\n      document.documentElement.classList.add('dark');\r\n    } else {\r\n      document.documentElement.classList.remove('dark');\r\n    }\r\n    // Save preference to localStorage\r\n    localStorage.setItem('delegateDarkMode', JSON.stringify(darkMode));\r\n  }, [darkMode]);\r\n\r\n  // Auth check\r\n  useEffect(() => {\r\n    if (!loading && (!currentUser || userRole !== 'delegate')) {\r\n      navigate('/delegate');\r\n      return;\r\n    }\r\n\r\n    if (!loading && currentUser && userRole === 'delegate') {\r\n      fetchAllData();\r\n      const interval = setInterval(fetchAllData, 30000);\r\n      return () => clearInterval(interval);\r\n    }\r\n  }, [currentUser, userRole, loading, navigate]);\r\n\r\n  // Clear success message after 5 seconds\r\n  useEffect(() => {\r\n    if (successMessage) {\r\n      const timer = setTimeout(() => setSuccessMessage(null), 5000);\r\n      return () => clearTimeout(timer);\r\n    }\r\n  }, [successMessage]);\r\n\r\n  const fetchAllData = async () => {\r\n    try {\r\n      setLoadingData(true);\r\n      const [classesData, statsData] = await Promise.all([\r\n        delegateFetchAssignedClasses(currentUser.id),\r\n        delegateFetchStats(currentUser.id)\r\n      ]);\r\n\r\n      setAssignedClasses(classesData.classes);\r\n      setStats(statsData);\r\n    } catch (error) {\r\n      console.error('Error fetching delegate data:', error);\r\n    } finally {\r\n      setLoadingData(false);\r\n    }\r\n  };\r\n\r\n  const handleCreateSession = async (e) => {\r\n    e.preventDefault();\r\n    setCreateError(null);\r\n\r\n    if (!createForm.classId) {\r\n      setCreateError('Please select a class');\r\n      return;\r\n    }\r\n\r\n    // Validate times\r\n    if (createForm.startTime >= createForm.endTime) {\r\n      setCreateError('End time must be after start time');\r\n      return;\r\n    }\r\n\r\n    try {\r\n      setCreating(true);\r\n\r\n      // Check for overlapping sessions\r\n      const { hasOverlap, overlappingSessions } = await checkOverlappingSessions(\r\n        createForm.classId,\r\n        createForm.date,\r\n        createForm.startTime,\r\n        createForm.endTime\r\n      );\r\n\r\n      if (hasOverlap) {\r\n        setCreateError(`Session overlaps with existing session(s) at ${overlappingSessions.map(s => s.start_time).join(', ')}`);\r\n        return;\r\n      }\r\n\r\n      // Create session with validation\r\n      const { session, error } = await createSessionWithValidation(\r\n        currentUser.id,\r\n        createForm.classId,\r\n        createForm.date,\r\n        createForm.startTime,\r\n        createForm.endTime\r\n      );\r\n\r\n      if (error) {\r\n        setCreateError(error);\r\n        return;\r\n      }\r\n\r\n      setSuccessMessage('Session created successfully!');\r\n      setShowCreateModal(false);\r\n      setCreateForm({\r\n        classId: '',\r\n        date: new Date().toISOString().split('T')[0],\r\n        startTime: '08:00',\r\n        endTime: '10:00'\r\n      });\r\n      fetchAllData();\r\n      refreshSessions();\r\n    } catch (error) {\r\n      setCreateError(error.message);\r\n    } finally {\r\n      setCreating(false);\r\n    }\r\n  };\r\n\r\n  const handleViewAttendance = async (sessionId) => {\r\n    try {\r\n      const { attendance, error } = await delegateFetchSessionAttendance(sessionId);\r\n      if (error) {\r\n        alert('Error fetching attendance: ' + error);\r\n        return;\r\n      }\r\n      const session = [...activeSessions, ...upcomingSessions, ...pastSessions].find(s => s.id === sessionId);\r\n      setSelectedSession(session);\r\n      setSessionAttendance(attendance);\r\n      setActiveTab('attendance');\r\n    } catch (error) {\r\n      alert('Error: ' + error.message);\r\n    }\r\n  };\r\n\r\n  const handleLogout = async () => {\r\n    try {\r\n      await logout();\r\n      navigate('/login');\r\n    } catch (error) {\r\n      console.error('Logout error:', error);\r\n    }\r\n  };\r\n\r\n  const getStatusBadgeClass = (status) => {\r\n    switch (status) {\r\n      case SESSION_STATUS.SCHEDULED:\r\n        return 'bg-blue-100 dark:bg-blue-900/30 text-blue-700 dark:text-blue-400';\r\n      case SESSION_STATUS.OPEN:\r\n        return 'bg-green-100 dark:bg-green-900/30 text-green-700 dark:text-green-400';\r\n      case SESSION_STATUS.CLOSED:\r\n        return 'bg-gray-100 dark:bg-gray-700 text-gray-700 dark:text-gray-400';\r\n      default:\r\n        return 'bg-gray-100 dark:bg-gray-700 text-gray-700 dark:text-gray-400';\r\n    }\r\n  };\r\n\r\n  const getStatusLabel = (status) => {\r\n    switch (status) {\r\n      case SESSION_STATUS.SCHEDULED:\r\n        return 'Scheduled';\r\n      case SESSION_STATUS.OPEN:\r\n        return 'Open';\r\n      case SESSION_STATUS.CLOSED:\r\n        return 'Closed';\r\n      default:\r\n        return status;\r\n    }\r\n  };\r\n\r\n  if (loading) {\r\n    return (\r\n      <div className=\"flex items-center justify-center h-screen bg-gradient-to-br from-gray-50 to-gray-100 dark:from-gray-900 dark:to-gray-800\">\r\n        <div className=\"text-center\">\r\n          <div className=\"inline-block animate-spin rounded-full h-12 w-12 border-4 border-blue-300 border-t-blue-600 mb-4\" />\r\n          <p className=\"text-gray-700 dark:text-gray-300 font-medium\">Loading Dashboard...</p>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  if (!currentUser || userRole !== 'delegate') {\r\n    return null;\r\n  }\r\n\r\n  const navItems = [\r\n    { id: 'overview', label: 'Overview', icon: LayoutDashboard },\r\n    { id: 'classes', label: 'My Classes', icon: GraduationCap },\r\n    { id: 'active', label: 'Active Sessions', icon: PlayCircle, badge: activeSessions.length },\r\n    { id: 'scheduled', label: 'Scheduled', icon: Calendar, badge: upcomingSessions.length },\r\n    { id: 'history', label: 'History', icon: History },\r\n    { id: 'attendance', label: 'Attendance', icon: CheckCircle }\r\n  ];\r\n\r\n  return (\r\n    <div className={`flex h-screen overflow-hidden ${darkMode ? 'dark' : ''}`}>\r\n      {/* SIDEBAR */}\r\n      <aside className={`${sidebarOpen ? 'w-64' : 'w-20'} bg-white dark:bg-gray-900 border-r border-gray-200 dark:border-gray-800 flex flex-col transition-all duration-300 shadow-lg`}>\r\n        <div className=\"p-6 border-b border-gray-200 dark:border-gray-800\">\r\n          <div className=\"flex items-center gap-3\">\r\n            <div className=\"w-10 h-10 rounded-lg bg-gradient-to-br from-blue-600 to-blue-700 flex items-center justify-center text-white font-bold\">\r\n              <User className=\"w-6 h-6\" />\r\n            </div>\r\n            {sidebarOpen && (\r\n              <div>\r\n                <p className=\"font-bold text-sm text-gray-900 dark:text-white\">Delegate</p>\r\n                <p className=\"text-xs text-gray-500 dark:text-gray-400\">Portal</p>\r\n              </div>\r\n            )}\r\n          </div>\r\n        </div>\r\n\r\n        <nav className=\"flex-1 overflow-y-auto px-3 py-6 space-y-2\">\r\n          {navItems.map((item) => (\r\n            <button\r\n              key={item.id}\r\n              onClick={() => setActiveTab(item.id)}\r\n              className={`w-full flex items-center gap-3 px-4 py-3 rounded-lg transition-all ${activeTab === item.id\r\n                ? 'bg-blue-50 dark:bg-blue-900/30 text-blue-600 dark:text-blue-400 font-semibold'\r\n                : 'text-gray-700 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-800'\r\n                }`}\r\n            >\r\n              <item.icon className=\"w-5 h-5\" />\r\n              {sidebarOpen && (\r\n                <span className=\"text-sm flex-1 text-left\">{item.label}</span>\r\n              )}\r\n              {sidebarOpen && item.badge > 0 && (\r\n                <span className=\"px-2 py-0.5 bg-blue-500 text-white text-xs rounded-full\">\r\n                  {item.badge}\r\n                </span>\r\n              )}\r\n            </button>\r\n          ))}\r\n        </nav>\r\n\r\n        <div className=\"p-3 border-t border-gray-200 dark:border-gray-800 space-y-2\">\r\n          <button\r\n            onClick={() => setDarkMode(!darkMode)}\r\n            className=\"w-full flex items-center gap-3 px-4 py-3 rounded-lg text-gray-700 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-800 transition-all\"\r\n          >\r\n            {darkMode ? <Sun className=\"w-5 h-5\" /> : <Moon className=\"w-5 h-5\" />}\r\n            {sidebarOpen && <span className=\"text-sm\">Theme</span>}\r\n          </button>\r\n\r\n          <button\r\n            onClick={handleLogout}\r\n            className=\"w-full flex items-center gap-3 px-4 py-3 rounded-lg text-red-600 dark:text-red-400 hover:bg-red-50 dark:hover:bg-red-900/10 transition-all\"\r\n          >\r\n            <LogOut className=\"w-5 h-5\" />\r\n            {sidebarOpen && <span className=\"text-sm font-semibold\">Logout</span>}\r\n          </button>\r\n        </div>\r\n\r\n        <div className=\"p-3 border-t border-gray-200 dark:border-gray-800\">\r\n          <button\r\n            onClick={() => setSidebarOpen(!sidebarOpen)}\r\n            className=\"w-full flex items-center justify-center py-2 rounded-lg text-gray-500 hover:bg-gray-100 dark:hover:bg-gray-800 transition-all\"\r\n          >\r\n            {sidebarOpen ? <ChevronLeft className=\"w-5 h-5\" /> : <ChevronRight className=\"w-5 h-5\" />}\r\n          </button>\r\n        </div>\r\n      </aside>\r\n\r\n      {/* MAIN CONTENT */}\r\n      <div className=\"flex-1 flex flex-col overflow-hidden bg-gray-50 dark:bg-gray-950\">\r\n        {/* TOP BAR */}\r\n        <header className=\"sticky top-0 z-40 bg-white dark:bg-gray-900 border-b border-gray-200 dark:border-gray-800 shadow-sm\">\r\n          <div className=\"px-8 py-4 flex items-center justify-between\">\r\n            <div>\r\n              <h1 className=\"text-2xl font-bold text-gray-900 dark:text-white\">\r\n                Attendance Management Portal\r\n              </h1>\r\n              <p className=\"text-sm text-gray-500 dark:text-gray-400\">\r\n                Welcome, {currentUser?.name || currentUser?.email}\r\n              </p>\r\n            </div>\r\n\r\n            <div className=\"flex items-center gap-4\">\r\n              <button\r\n                className=\"px-4 py-2 bg-blue-600 text-white rounded-lg text-sm font-semibold hover:bg-blue-700 transition-colors flex items-center gap-2\"\r\n                onClick={() => setShowCreateModal(true)}\r\n              >\r\n                <Plus className=\"w-4 h-4\" />\r\n                New Session\r\n              </button>\r\n\r\n              <div className=\"w-10 h-10 rounded-full bg-gradient-to-br from-blue-600 to-blue-700 flex items-center justify-center text-white font-bold cursor-pointer\">\r\n                {currentUser?.email?.charAt(0).toUpperCase()}\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </header>\r\n\r\n        {/* SCROLLABLE CONTENT */}\r\n        <main className=\"flex-1 overflow-y-auto\">\r\n          <div className=\"p-8 max-w-7xl mx-auto\">\r\n            {/* Success Message */}\r\n            {successMessage && (\r\n              <div className=\"mb-6 p-4 bg-green-50 dark:bg-green-900/20 border border-green-200 dark:border-green-800 rounded-lg\">\r\n                <p className=\"text-green-700 dark:text-green-400 font-medium\">{successMessage}</p>\r\n              </div>\r\n            )}\r\n\r\n            {/* Error Message */}\r\n            {sessionsError && (\r\n              <div className=\"mb-6 p-4 bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-lg\">\r\n                <p className=\"text-red-700 dark:text-red-400 font-medium\">{sessionsError}</p>\r\n              </div>\r\n            )}\r\n\r\n            {/* OVERVIEW TAB */}\r\n            {activeTab === 'overview' && (\r\n              <div className=\"space-y-8\">\r\n                {/* KPI CARDS */}\r\n                <div className=\"grid grid-cols-1 md:grid-cols-4 gap-4\">\r\n                  <div className=\"bg-white dark:bg-gray-900 rounded-xl p-6 shadow-sm border border-gray-200 dark:border-gray-800 hover:shadow-lg transition-shadow\">\r\n                    <div className=\"flex items-start justify-between mb-4\">\r\n                      <div>\r\n                        <p className=\"text-sm text-gray-600 dark:text-gray-400 font-medium mb-1\">Active Sessions</p>\r\n                        <p className=\"text-3xl font-bold text-gray-900 dark:text-white\">{activeSessions.length}</p>\r\n                      </div>\r\n                      <div className=\"p-3 bg-green-100 dark:bg-green-900/30 rounded-lg\">\r\n                        <PlayCircle className=\"w-6 h-6 text-green-600 dark:text-green-400\" />\r\n                      </div>\r\n                    </div>\r\n                    <p className=\"text-xs text-gray-500 dark:text-gray-400\">Currently open for attendance</p>\r\n                  </div>\r\n\r\n                  <div className=\"bg-white dark:bg-gray-900 rounded-xl p-6 shadow-sm border border-gray-200 dark:border-gray-800 hover:shadow-lg transition-shadow\">\r\n                    <div className=\"flex items-start justify-between mb-4\">\r\n                      <div>\r\n                        <p className=\"text-sm text-gray-600 dark:text-gray-400 font-medium mb-1\">Scheduled</p>\r\n                        <p className=\"text-3xl font-bold text-gray-900 dark:text-white\">{upcomingSessions.length}</p>\r\n                      </div>\r\n                      <div className=\"p-3 bg-blue-100 dark:bg-blue-900/30 rounded-lg\">\r\n                        <Calendar className=\"w-6 h-6 text-blue-600 dark:text-blue-400\" />\r\n                      </div>\r\n                    </div>\r\n                    <p className=\"text-xs text-gray-500 dark:text-gray-400\">Upcoming sessions</p>\r\n                  </div>\r\n\r\n                  <div className=\"bg-white dark:bg-gray-900 rounded-xl p-6 shadow-sm border border-gray-200 dark:border-gray-800 hover:shadow-lg transition-shadow\">\r\n                    <div className=\"flex items-start justify-between mb-4\">\r\n                      <div>\r\n                        <p className=\"text-sm text-gray-600 dark:text-gray-400 font-medium mb-1\">Total Sessions</p>\r\n                        <p className=\"text-3xl font-bold text-gray-900 dark:text-white\">{stats.totalSessions}</p>\r\n                      </div>\r\n                      <div className=\"p-3 bg-indigo-100 dark:bg-indigo-900/30 rounded-lg\">\r\n                        <CalendarDays className=\"w-6 h-6 text-indigo-600 dark:text-indigo-400\" />\r\n                      </div>\r\n                    </div>\r\n                    <p className=\"text-xs text-gray-500 dark:text-gray-400\">All time</p>\r\n                  </div>\r\n\r\n                  <div className=\"bg-white dark:bg-gray-900 rounded-xl p-6 shadow-sm border border-gray-200 dark:border-gray-800 hover:shadow-lg transition-shadow\">\r\n                    <div className=\"flex items-start justify-between mb-4\">\r\n                      <div>\r\n                        <p className=\"text-sm text-gray-600 dark:text-gray-400 font-medium mb-1\">Attendance Marked</p>\r\n                        <p className=\"text-3xl font-bold text-gray-900 dark:text-white\">{stats.totalMarked}</p>\r\n                      </div>\r\n                      <div className=\"p-3 bg-amber-100 dark:bg-amber-900/30 rounded-lg\">\r\n                        <CheckCircle className=\"w-6 h-6 text-amber-600 dark:text-amber-400\" />\r\n                      </div>\r\n                    </div>\r\n                    <p className=\"text-xs text-gray-500 dark:text-gray-400\">Total records</p>\r\n                  </div>\r\n                </div>\r\n\r\n                {/* Active Sessions Alert */}\r\n                {activeSessions.length > 0 && (\r\n                  <div className=\"p-4 bg-green-50 dark:bg-green-900/20 border border-green-200 dark:border-green-800 rounded-xl\">\r\n                    <div className=\"flex items-center gap-3\">\r\n                      <Radio className=\"w-6 h-6 text-green-600 dark:text-green-400 animate-pulse\" />\r\n                      <div>\r\n                        <p className=\"font-semibold text-green-900 dark:text-green-300\">\r\n                          {activeSessions.length} Session{activeSessions.length > 1 ? 's' : ''} Currently Active\r\n                        </p>\r\n                        <p className=\"text-sm text-green-700 dark:text-green-400\">\r\n                          Students can mark attendance now. Sessions will auto-close at end time.\r\n                        </p>\r\n                      </div>\r\n                    </div>\r\n                  </div>\r\n                )}\r\n\r\n                {/* Active Sessions List */}\r\n                {activeSessions.length > 0 && (\r\n                  <div className=\"bg-white dark:bg-gray-900 rounded-xl p-6 shadow-sm border border-gray-200 dark:border-gray-800\">\r\n                    <h3 className=\"text-lg font-bold text-gray-900 dark:text-white mb-6 flex items-center gap-2\">\r\n                      <PlayCircle className=\"w-5 h-5 text-green-600\" />\r\n                      Active Sessions\r\n                    </h3>\r\n                    <div className=\"space-y-4\">\r\n                      {activeSessions.map((session) => (\r\n                        <SessionCard\r\n                          key={session.id}\r\n                          session={session}\r\n                          onViewAttendance={() => handleViewAttendance(session.id)}\r\n                          getTimeRemaining={getSessionTimeRemaining}\r\n                          getStatusBadgeClass={getStatusBadgeClass}\r\n                          getStatusLabel={getStatusLabel}\r\n                        />\r\n                      ))}\r\n                    </div>\r\n                  </div>\r\n                )}\r\n\r\n                {/* ASSIGNED CLASSES */}\r\n                <div className=\"bg-white dark:bg-gray-900 rounded-xl p-6 shadow-sm border border-gray-200 dark:border-gray-800\">\r\n                  <h3 className=\"text-lg font-bold text-gray-900 dark:text-white mb-6\">My Assigned Classes</h3>\r\n\r\n                  {assignedClasses.length > 0 ? (\r\n                    <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4\">\r\n                      {assignedClasses.map((cls) => (\r\n                        <div key={cls.id} className=\"p-4 rounded-lg border border-gray-200 dark:border-gray-700 hover:shadow-lg transition-shadow\">\r\n                          <div className=\"flex items-start justify-between mb-3\">\r\n                            <div>\r\n                              <p className=\"font-semibold text-gray-900 dark:text-white\">{cls.courseTitle}</p>\r\n                              <p className=\"text-xs text-gray-500 dark:text-gray-400\">{cls.courseCode}</p>\r\n                            </div>\r\n                            <span className={`px-2 py-1 rounded-full text-xs font-semibold ${cls.hasActiveSession\r\n                              ? 'bg-green-100 dark:bg-green-900/30 text-green-700 dark:text-green-400'\r\n                              : 'bg-gray-100 dark:bg-gray-700 text-gray-700 dark:text-gray-400'\r\n                              }`}>\r\n                              {cls.sessionToday}\r\n                            </span>\r\n                          </div>\r\n                          <p className=\"text-sm text-gray-600 dark:text-gray-400 mb-4\">{cls.className}</p>\r\n                          <button\r\n                            onClick={() => {\r\n                              setCreateForm(prev => ({ ...prev, classId: cls.id }));\r\n                              setShowCreateModal(true);\r\n                            }}\r\n                            className=\"w-full px-3 py-2 bg-blue-100 dark:bg-blue-900/30 text-blue-700 dark:text-blue-400 rounded-lg text-sm font-semibold hover:bg-blue-200 dark:hover:bg-blue-900/50 transition-colors\"\r\n                          >\r\n                            Open Session\r\n                          </button>\r\n                        </div>\r\n                      ))}\r\n                    </div>\r\n                  ) : (\r\n                    <div className=\"text-center py-12\">\r\n                      <p className=\"text-gray-500 dark:text-gray-400\">No classes assigned yet</p>\r\n                    </div>\r\n                  )}\r\n                </div>\r\n              </div>\r\n            )}\r\n\r\n            {/* CLASSES TAB */}\r\n            {activeTab === 'classes' && (\r\n              <div>\r\n                <h2 className=\"text-2xl font-bold text-gray-900 dark:text-white mb-6\">My Classes</h2>\r\n                {assignedClasses.length > 0 ? (\r\n                  <div className=\"grid grid-cols-1 lg:grid-cols-2 gap-6\">\r\n                    {assignedClasses.map((cls) => (\r\n                      <div key={cls.id} className=\"bg-white dark:bg-gray-900 rounded-xl p-6 shadow-sm border border-gray-200 dark:border-gray-800\">\r\n                        <div className=\"flex items-start justify-between mb-4\">\r\n                          <div>\r\n                            <h3 className=\"text-lg font-bold text-gray-900 dark:text-white\">{cls.courseTitle}</h3>\r\n                            <p className=\"text-sm text-gray-600 dark:text-gray-400\">{cls.courseCode}</p>\r\n                          </div>\r\n                          <span className=\"px-3 py-1 bg-blue-100 dark:bg-blue-900/30 text-blue-700 dark:text-blue-400 rounded-full text-xs font-semibold\">\r\n                            {cls.program}\r\n                          </span>\r\n                        </div>\r\n                        <p className=\"text-gray-700 dark:text-gray-300 mb-4\">{cls.className}</p>\r\n                        <button\r\n                          onClick={() => {\r\n                            setCreateForm(prev => ({ ...prev, classId: cls.id }));\r\n                            setShowCreateModal(true);\r\n                          }}\r\n                          className=\"w-full px-4 py-2 bg-blue-600 text-white rounded-lg text-sm font-semibold hover:bg-blue-700 transition-colors\"\r\n                        >\r\n                          Create Session\r\n                        </button>\r\n                      </div>\r\n                    ))}\r\n                  </div>\r\n                ) : (\r\n                  <div className=\"bg-white dark:bg-gray-900 rounded-xl p-12 text-center shadow-sm border border-gray-200 dark:border-gray-800\">\r\n                    <p className=\"text-gray-600 dark:text-gray-400\">No classes assigned</p>\r\n                  </div>\r\n                )}\r\n              </div>\r\n            )}\r\n\r\n            {/* ACTIVE SESSIONS TAB */}\r\n            {activeTab === 'active' && (\r\n              <div>\r\n                <h2 className=\"text-2xl font-bold text-gray-900 dark:text-white mb-6 flex items-center gap-2\">\r\n                  <PlayCircle className=\"w-5 h-5 text-green-600\" />\r\n                  Active Sessions\r\n                </h2>\r\n                {activeSessions.length > 0 ? (\r\n                  <div className=\"space-y-4\">\r\n                    {activeSessions.map((session) => (\r\n                      <SessionCard\r\n                        key={session.id}\r\n                        session={session}\r\n                        onViewAttendance={() => handleViewAttendance(session.id)}\r\n                        getTimeRemaining={getSessionTimeRemaining}\r\n                        getStatusBadgeClass={getStatusBadgeClass}\r\n                        getStatusLabel={getStatusLabel}\r\n                        expanded\r\n                      />\r\n                    ))}\r\n                  </div>\r\n                ) : (\r\n                  <div className=\"bg-white dark:bg-gray-900 rounded-xl p-12 text-center shadow-sm border border-gray-200 dark:border-gray-800\">\r\n                    <CalendarX className=\"w-16 h-16 text-gray-300 dark:text-gray-600 mb-4\" />\r\n                    <p className=\"text-gray-600 dark:text-gray-400\">No active sessions</p>\r\n                    <p className=\"text-sm text-gray-500 dark:text-gray-500 mt-2\">\r\n                      Sessions will appear here when they start\r\n                    </p>\r\n                  </div>\r\n                )}\r\n              </div>\r\n            )}\r\n\r\n            {/* SCHEDULED SESSIONS TAB */}\r\n            {activeTab === 'scheduled' && (\r\n              <div>\r\n                <h2 className=\"text-2xl font-bold text-gray-900 dark:text-white mb-6 flex items-center gap-2\">\r\n                  <Calendar className=\"w-5 h-5 text-blue-600\" />\r\n                  Scheduled Sessions\r\n                </h2>\r\n                {upcomingSessions.length > 0 ? (\r\n                  <div className=\"space-y-4\">\r\n                    {upcomingSessions.map((session) => (\r\n                      <div\r\n                        key={session.id}\r\n                        className=\"bg-white dark:bg-gray-900 rounded-xl p-6 shadow-sm border border-gray-200 dark:border-gray-800\"\r\n                      >\r\n                        <div className=\"flex items-center justify-between\">\r\n                          <div>\r\n                            <p className=\"font-semibold text-gray-900 dark:text-white\">{session.courseTitle}</p>\r\n                            <p className=\"text-sm text-gray-600 dark:text-gray-400\">{session.className}</p>\r\n                            <p className=\"text-xs text-gray-500 dark:text-gray-500 mt-1\">\r\n                              {session.date}  {session.startTime} - {session.endTime}\r\n                            </p>\r\n                          </div>\r\n                          <div className=\"text-right\">\r\n                            <span className={`px-3 py-1 rounded-full text-xs font-semibold ${getStatusBadgeClass(session.status)}`}>\r\n                              {getStatusLabel(session.status)}\r\n                            </span>\r\n                            <p className=\"text-xs text-gray-500 dark:text-gray-400 mt-2\">\r\n                              {getSessionTimeRemaining(session)?.formatted}\r\n                            </p>\r\n                          </div>\r\n                        </div>\r\n                      </div>\r\n                    ))}\r\n                  </div>\r\n                ) : (\r\n                  <div className=\"bg-white dark:bg-gray-900 rounded-xl p-12 text-center shadow-sm border border-gray-200 dark:border-gray-800\">\r\n                    <Calendar className=\"w-16 h-16 text-gray-300 dark:text-gray-600 mb-4\" />\r\n                    <p className=\"text-gray-600 dark:text-gray-400\">No scheduled sessions</p>\r\n                    <button\r\n                      onClick={() => setShowCreateModal(true)}\r\n                      className=\"mt-4 px-4 py-2 bg-blue-600 text-white rounded-lg text-sm font-semibold hover:bg-blue-700 transition-colors\"\r\n                    >\r\n                      Create New Session\r\n                    </button>\r\n                  </div>\r\n                )}\r\n              </div>\r\n            )}\r\n\r\n            {/* HISTORY TAB */}\r\n            {activeTab === 'history' && (\r\n              <div>\r\n                <h2 className=\"text-2xl font-bold text-gray-900 dark:text-white mb-6 flex items-center gap-2\">\r\n                  <History className=\"w-5 h-5 text-gray-600\" />\r\n                  Session History\r\n                </h2>\r\n                {pastSessions.length > 0 ? (\r\n                  <div className=\"overflow-x-auto bg-white dark:bg-gray-900 rounded-xl shadow-sm border border-gray-200 dark:border-gray-800\">\r\n                    <table className=\"w-full text-sm\">\r\n                      <thead>\r\n                        <tr className=\"border-b border-gray-200 dark:border-gray-700\">\r\n                          <th className=\"px-4 py-3 text-left font-semibold text-gray-900 dark:text-white\">Course</th>\r\n                          <th className=\"px-4 py-3 text-left font-semibold text-gray-900 dark:text-white\">Class</th>\r\n                          <th className=\"px-4 py-3 text-left font-semibold text-gray-900 dark:text-white\">Date</th>\r\n                          <th className=\"px-4 py-3 text-left font-semibold text-gray-900 dark:text-white\">Time</th>\r\n                          <th className=\"px-4 py-3 text-left font-semibold text-gray-900 dark:text-white\">Attendance</th>\r\n                          <th className=\"px-4 py-3 text-left font-semibold text-gray-900 dark:text-white\">Status</th>\r\n                          <th className=\"px-4 py-3 text-left font-semibold text-gray-900 dark:text-white\">Action</th>\r\n                        </tr>\r\n                      </thead>\r\n                      <tbody className=\"divide-y divide-gray-200 dark:divide-gray-700\">\r\n                        {pastSessions.map((session) => (\r\n                          <tr key={session.id} className=\"hover:bg-gray-50 dark:hover:bg-gray-800 transition-colors\">\r\n                            <td className=\"px-4 py-3 text-gray-900 dark:text-white font-medium\">{session.courseTitle}</td>\r\n                            <td className=\"px-4 py-3 text-gray-700 dark:text-gray-300\">{session.className}</td>\r\n                            <td className=\"px-4 py-3 text-gray-700 dark:text-gray-300\">{session.date}</td>\r\n                            <td className=\"px-4 py-3 text-gray-700 dark:text-gray-300\">{session.startTime}</td>\r\n                            <td className=\"px-4 py-3 text-gray-700 dark:text-gray-300\">{session.attendanceCount}</td>\r\n                            <td className=\"px-4 py-3\">\r\n                              <span className={`px-3 py-1 rounded-full text-xs font-semibold ${getStatusBadgeClass(session.status)}`}>\r\n                                {getStatusLabel(session.status)}\r\n                              </span>\r\n                            </td>\r\n                            <td className=\"px-4 py-3\">\r\n                              <button\r\n                                onClick={() => handleViewAttendance(session.id)}\r\n                                className=\"text-blue-600 dark:text-blue-400 hover:underline text-sm font-semibold\"\r\n                              >\r\n                                View\r\n                              </button>\r\n                            </td>\r\n                          </tr>\r\n                        ))}\r\n                      </tbody>\r\n                    </table>\r\n                  </div>\r\n                ) : (\r\n                  <div className=\"bg-white dark:bg-gray-900 rounded-xl p-12 text-center shadow-sm border border-gray-200 dark:border-gray-800\">\r\n                    <p className=\"text-gray-600 dark:text-gray-400\">No session history yet</p>\r\n                  </div>\r\n                )}\r\n              </div>\r\n            )}\r\n\r\n            {/* ATTENDANCE TAB */}\r\n            {activeTab === 'attendance' && selectedSession && (\r\n              <div>\r\n                <div className=\"mb-6 flex items-center justify-between\">\r\n                  <div>\r\n                    <h2 className=\"text-2xl font-bold text-gray-900 dark:text-white\">{selectedSession.courseTitle}</h2>\r\n                    <p className=\"text-sm text-gray-600 dark:text-gray-400\">{selectedSession.date}  {selectedSession.startTime}</p>\r\n                  </div>\r\n                  <button\r\n                    onClick={() => setActiveTab('history')}\r\n                    className=\"px-4 py-2 border border-gray-300 dark:border-gray-600 text-gray-700 dark:text-gray-300 rounded-lg text-sm font-semibold hover:bg-gray-100 dark:hover:bg-gray-800 transition-colors\"\r\n                  >\r\n                    Back to History\r\n                  </button>\r\n                </div>\r\n\r\n                {sessionAttendance.length > 0 ? (\r\n                  <div className=\"bg-white dark:bg-gray-900 rounded-xl shadow-sm border border-gray-200 dark:border-gray-800 overflow-hidden\">\r\n                    <table className=\"w-full text-sm\">\r\n                      <thead>\r\n                        <tr className=\"border-b border-gray-200 dark:border-gray-700 bg-gray-50 dark:bg-gray-800\">\r\n                          <th className=\"px-4 py-3 text-left font-semibold text-gray-900 dark:text-white\">Student Name</th>\r\n                          <th className=\"px-4 py-3 text-left font-semibold text-gray-900 dark:text-white\">Matricule</th>\r\n                          <th className=\"px-4 py-3 text-left font-semibold text-gray-900 dark:text-white\">Timestamp</th>\r\n                          <th className=\"px-4 py-3 text-left font-semibold text-gray-900 dark:text-white\">Status</th>\r\n                        </tr>\r\n                      </thead>\r\n                      <tbody className=\"divide-y divide-gray-200 dark:divide-gray-700\">\r\n                        {sessionAttendance.map((attendance) => (\r\n                          <tr key={attendance.id} className=\"hover:bg-gray-50 dark:hover:bg-gray-800 transition-colors\">\r\n                            <td className=\"px-4 py-3 text-gray-900 dark:text-white font-medium\">{attendance.studentName}</td>\r\n                            <td className=\"px-4 py-3 text-gray-700 dark:text-gray-300\">{attendance.studentMatricule}</td>\r\n                            <td className=\"px-4 py-3 text-gray-700 dark:text-gray-300\">{attendance.timestamp}</td>\r\n                            <td className=\"px-4 py-3\">\r\n                              <span className={`px-3 py-1 rounded-full text-xs font-semibold ${attendance.status === ATTENDANCE_STATUS.PRESENT\r\n                                ? 'bg-green-100 dark:bg-green-900/30 text-green-700 dark:text-green-400'\r\n                                : attendance.status === ATTENDANCE_STATUS.LATE\r\n                                  ? 'bg-yellow-100 dark:bg-yellow-900/30 text-yellow-700 dark:text-yellow-400'\r\n                                  : 'bg-red-100 dark:bg-red-900/30 text-red-700 dark:text-red-400'\r\n                                }`}>\r\n                                {attendance.status === ATTENDANCE_STATUS.PRESENT ? 'Present' :\r\n                                  attendance.status === ATTENDANCE_STATUS.LATE ? 'Late' : 'Absent'}\r\n                              </span>\r\n                            </td>\r\n                          </tr>\r\n                        ))}\r\n                      </tbody>\r\n                    </table>\r\n                  </div>\r\n                ) : (\r\n                  <div className=\"bg-white dark:bg-gray-900 rounded-xl p-12 text-center shadow-sm border border-gray-200 dark:border-gray-800\">\r\n                    <p className=\"text-gray-600 dark:text-gray-400\">No attendance recorded yet</p>\r\n                  </div>\r\n                )}\r\n              </div>\r\n            )}\r\n          </div>\r\n        </main>\r\n      </div>\r\n\r\n      {/* CREATE SESSION MODAL */}\r\n      {showCreateModal && (\r\n        <div className=\"fixed inset-0 bg-black/50 flex items-center justify-center z-50\">\r\n          <div className=\"bg-white dark:bg-gray-900 rounded-xl p-6 shadow-xl max-w-md w-full mx-4\">\r\n            <div className=\"flex items-center justify-between mb-6\">\r\n              <h3 className=\"text-lg font-bold text-gray-900 dark:text-white\">Create New Session</h3>\r\n              <button onClick={() => {\r\n                setShowCreateModal(false);\r\n                setCreateError(null);\r\n              }} className=\"text-gray-500 hover:text-gray-700 dark:hover:text-gray-300\">\r\n                <X className=\"w-5 h-5\" />\r\n              </button>\r\n            </div>\r\n\r\n            {createError && (\r\n              <div className=\"mb-4 p-3 bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-lg\">\r\n                <p className=\"text-sm text-red-700 dark:text-red-400\">{createError}</p>\r\n              </div>\r\n            )}\r\n\r\n            <form onSubmit={handleCreateSession} className=\"space-y-4\">\r\n              <div>\r\n                <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2\">Select Class</label>\r\n                <select\r\n                  value={createForm.classId}\r\n                  onChange={(e) => setCreateForm({ ...createForm, classId: e.target.value })}\r\n                  className=\"w-full px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-800 text-gray-900 dark:text-white focus:ring-2 focus:ring-blue-500 focus:border-transparent\"\r\n                >\r\n                  <option value=\"\">Choose a class...</option>\r\n                  {assignedClasses.map((cls) => (\r\n                    <option key={cls.id} value={cls.id}>\r\n                      {cls.courseTitle} - {cls.className}\r\n                    </option>\r\n                  ))}\r\n                </select>\r\n              </div>\r\n\r\n              <div>\r\n                <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2\">Date</label>\r\n                <input\r\n                  type=\"date\"\r\n                  value={createForm.date}\r\n                  onChange={(e) => setCreateForm({ ...createForm, date: e.target.value })}\r\n                  className=\"w-full px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-800 text-gray-900 dark:text-white focus:ring-2 focus:ring-blue-500 focus:border-transparent\"\r\n                />\r\n              </div>\r\n\r\n              <div className=\"grid grid-cols-2 gap-4\">\r\n                <div>\r\n                  <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2\">Start Time</label>\r\n                  <input\r\n                    type=\"time\"\r\n                    value={createForm.startTime}\r\n                    onChange={(e) => setCreateForm({ ...createForm, startTime: e.target.value })}\r\n                    className=\"w-full px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-800 text-gray-900 dark:text-white focus:ring-2 focus:ring-blue-500 focus:border-transparent\"\r\n                  />\r\n                </div>\r\n                <div>\r\n                  <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2\">End Time</label>\r\n                  <input\r\n                    type=\"time\"\r\n                    value={createForm.endTime}\r\n                    onChange={(e) => setCreateForm({ ...createForm, endTime: e.target.value })}\r\n                    className=\"w-full px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-800 text-gray-900 dark:text-white focus:ring-2 focus:ring-blue-500 focus:border-transparent\"\r\n                  />\r\n                </div>\r\n              </div>\r\n\r\n              <div className=\"p-3 bg-blue-50 dark:bg-blue-900/20 border border-blue-200 dark:border-blue-800 rounded-lg\">\r\n                <p className=\"text-xs text-blue-700 dark:text-blue-400\">\r\n                  <strong>Session Lifecycle:</strong> Session will be <strong>Scheduled</strong> until start time,\r\n                  then automatically become <strong>Open</strong> for attendance, and <strong>Close</strong> at end time.\r\n                  Students who don't mark attendance will be marked <strong>Absent</strong>.\r\n                </p>\r\n              </div>\r\n\r\n              <div className=\"flex gap-3 pt-4\">\r\n                <button\r\n                  type=\"button\"\r\n                  onClick={() => {\r\n                    setShowCreateModal(false);\r\n                    setCreateError(null);\r\n                  }}\r\n                  className=\"flex-1 px-4 py-2 border border-gray-300 dark:border-gray-600 text-gray-700 dark:text-gray-300 rounded-lg font-semibold hover:bg-gray-100 dark:hover:bg-gray-800 transition-colors\"\r\n                >\r\n                  Cancel\r\n                </button>\r\n                <button\r\n                  type=\"submit\"\r\n                  disabled={creating}\r\n                  className=\"flex-1 px-4 py-2 bg-blue-600 text-white rounded-lg font-semibold hover:bg-blue-700 disabled:opacity-50 transition-colors flex items-center justify-center gap-2\"\r\n                >\r\n                  {creating ? (\r\n                    <>\r\n                      <div className=\"inline-block animate-spin rounded-full h-4 w-4 border-2 border-white border-t-transparent\" />\r\n                      Creating...\r\n                    </>\r\n                  ) : (\r\n                    'Create Session'\r\n                  )}\r\n                </button>\r\n              </div>\r\n            </form>\r\n          </div>\r\n        </div>\r\n      )}\r\n    </div>\r\n  );\r\n};\r\n\r\n/**\r\n * Session Card Component for displaying session details\r\n */\r\nconst SessionCard = ({ session, onViewAttendance, getTimeRemaining, getStatusBadgeClass, getStatusLabel, expanded = false }) => {\r\n  const timeRemaining = getTimeRemaining(session);\r\n\r\n  return (\r\n    <div className={`bg-white dark:bg-gray-900 rounded-xl p-6 shadow-sm border border-gray-200 dark:border-gray-800 ${session.status === SESSION_STATUS.OPEN ? 'border-l-4 border-l-green-500' : ''\r\n      }`}>\r\n      <div className=\"flex items-center justify-between\">\r\n        <div className=\"flex-1\">\r\n          <div className=\"flex items-center gap-2 mb-1\">\r\n            {session.status === SESSION_STATUS.OPEN && (\r\n              <span className=\"w-2 h-2 bg-green-500 rounded-full animate-pulse\" />\r\n            )}\r\n            <p className=\"font-semibold text-gray-900 dark:text-white\">{session.courseTitle}</p>\r\n          </div>\r\n          <p className=\"text-sm text-gray-600 dark:text-gray-400\">{session.className}</p>\r\n          <p className=\"text-xs text-gray-500 dark:text-gray-500 mt-1\">\r\n            {session.date}  {session.startTime} - {session.endTime}\r\n          </p>\r\n          {expanded && (\r\n            <div className=\"mt-3 flex items-center gap-4 text-sm\">\r\n              <span className=\"text-gray-600 dark:text-gray-400\">\r\n                <strong>{session.attendanceCount}</strong> students marked\r\n              </span>\r\n            </div>\r\n          )}\r\n        </div>\r\n        <div className=\"text-right flex flex-col items-end gap-2\">\r\n          <span className={`px-3 py-1 rounded-full text-xs font-semibold ${getStatusBadgeClass(session.status)}`}>\r\n            {getStatusLabel(session.status)}\r\n          </span>\r\n          {timeRemaining && (\r\n            <span className=\"text-xs text-gray-500 dark:text-gray-400\">\r\n              {timeRemaining.formatted}\r\n            </span>\r\n          )}\r\n          <button\r\n            onClick={onViewAttendance}\r\n            className=\"text-blue-600 dark:text-blue-400 hover:underline text-sm font-semibold\"\r\n          >\r\n            View Attendance\r\n          </button>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default DelegateDashboard;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}