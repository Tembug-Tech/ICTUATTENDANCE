{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\PFI\\\\Desktop\\\\ATTENDANCE\\\\ATTENDANCE\\\\src\\\\pages\\\\StudentMarkAttendance.js\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect } from 'react';\nimport { useNavigate, useLocation } from 'react-router-dom';\nimport { supabase } from '../supabase/supabase';\nimport { useAuth } from '../contexts/AuthContext';\nimport Layout from '../components/Layout';\nimport Card from '../components/Card';\nimport Alert from '../components/Alert';\nimport Badge from '../components/Badge';\nimport { jsxDEV as _jsxDEV, Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nconst StudentMarkAttendance = () => {\n  _s();\n  const {\n    currentUser,\n    userRole,\n    loading\n  } = useAuth();\n  const navigate = useNavigate();\n  const location = useLocation();\n  const [activeSessions, setActiveSessions] = useState([]);\n  const [sessionsLoading, setSessionsLoading] = useState(true);\n  const [submittedAttendance, setSubmittedAttendance] = useState({});\n  const [marking, setMarking] = useState({});\n  const [error, setError] = useState(null);\n  const [success, setSuccess] = useState(null);\n  useEffect(() => {\n    if (loading) return;\n    if (!currentUser || userRole !== 'student') {\n      navigate('/student');\n      return;\n    }\n    fetchActiveSessions();\n\n    // Refresh sessions every 10 seconds\n    const interval = setInterval(fetchActiveSessions, 10000);\n    return () => clearInterval(interval);\n  }, [currentUser, userRole, loading, navigate]);\n  const fetchActiveSessions = async () => {\n    try {\n      setSessionsLoading(true);\n      setError(null);\n\n      // Get ALL active sessions (not filtered by class)\n      const {\n        data: sessions,\n        error: sessionsError\n      } = await supabase.from('sessions').select(`\n          id,\n          token,\n          created_at,\n          expires_at,\n          start_time,\n          end_time,\n          session_date,\n          class_id,\n          classes (\n            class_name,\n            courses (\n              course_code,\n              title\n            )\n          )\n        `).gt('expires_at', new Date().toISOString()).order('created_at', {\n        ascending: false\n      });\n      if (sessionsError) throw sessionsError;\n\n      // Filter out sessions that have already passed\n      const now = new Date();\n      const filteredSessions = (sessions || []).filter(session => {\n        if (!session.session_date || !session.end_time) return false;\n\n        // Parse the session date and end time\n        const sessionDate = new Date(session.session_date);\n        const [endHour, endMin] = session.end_time.split(':');\n\n        // Create the session end time\n        const sessionEndTime = new Date(sessionDate);\n        sessionEndTime.setHours(parseInt(endHour), parseInt(endMin), 0);\n\n        // Only show sessions that haven't ended yet\n        return now <= sessionEndTime;\n      });\n      setActiveSessions(filteredSessions);\n\n      // Check which sessions the student has already submitted for\n      if (currentUser !== null && currentUser !== void 0 && currentUser.id && sessions && sessions.length > 0) {\n        const {\n          data: submissions,\n          error: submissionsError\n        } = await supabase.from('attendance').select('session_id, status').eq('student_id', currentUser.id).in('session_id', sessions.map(s => s.id));\n        if (!submissionsError && submissions) {\n          const submitted = {};\n          submissions.forEach(sub => {\n            submitted[sub.session_id] = sub.status;\n          });\n          setSubmittedAttendance(submitted);\n        }\n      }\n    } catch (err) {\n      console.error('Error fetching sessions:', err);\n      setError(err.message);\n    } finally {\n      setSessionsLoading(false);\n    }\n  };\n\n  // Helper function to parse time strings (HH:MM) into minutes\n  const timeToMinutes = timeStr => {\n    const [hours, minutes] = timeStr.split(':').map(Number);\n    return hours * 60 + minutes;\n  };\n\n  // Helper function to check if two sessions overlap\n  const sessionsOverlap = (session1, session2) => {\n    if (!session1 || !session2 || !session1.session_date || !session2.session_date) return false;\n\n    // Sessions must be on the same date to overlap\n    if (session1.session_date !== session2.session_date) return false;\n    const start1 = timeToMinutes(session1.start_time);\n    const end1 = timeToMinutes(session1.end_time);\n    const start2 = timeToMinutes(session2.start_time);\n    const end2 = timeToMinutes(session2.end_time);\n\n    // Check if time windows overlap\n    // Overlap occurs if: start1 < end2 AND start2 < end1\n    return start1 < end2 && start2 < end1;\n  };\n\n  // Get list of sessions the student has already marked attendance for\n  const getMarkedSessions = () => {\n    return activeSessions.filter(session => submittedAttendance[session.id]);\n  };\n\n  // Check if a session conflicts with already-marked sessions\n  const getConflictingSession = sessionId => {\n    const targetSession = activeSessions.find(s => s.id === sessionId);\n    if (!targetSession) return null;\n    const markedSessions = getMarkedSessions();\n    for (let markedSession of markedSessions) {\n      if (sessionsOverlap(targetSession, markedSession)) {\n        return markedSession;\n      }\n    }\n    return null;\n  };\n  const determineAttendanceStatus = session => {\n    // Safety check\n    if (!session || !session.end_time) {\n      console.warn('âš ï¸ Session or end_time is missing:', session);\n      return 'present'; // Default to present if data is missing\n    }\n\n    // Get the session date and end time\n    const [endHour, endMin] = session.end_time.split(':');\n\n    // Build end time for today\n    const sessionDate = new Date(session.created_at).toISOString().split('T')[0];\n    const endTimeStr = `${sessionDate}T${session.end_time}:00`;\n    const sessionEndTime = new Date(endTimeStr);\n    const now = new Date();\n\n    // If current time is AFTER session end time, mark as LATE\n    // Otherwise, mark as PRESENT\n    return now > sessionEndTime ? 'late' : 'present';\n  };\n  const handleMarkAttendance = async sessionId => {\n    try {\n      setMarking(prev => ({\n        ...prev,\n        [sessionId]: true\n      }));\n      setError(null);\n      setSuccess(null);\n\n      // Check if already submitted\n      if (submittedAttendance[sessionId]) {\n        setError(`You have already marked attendance for this session`);\n        setMarking(prev => ({\n          ...prev,\n          [sessionId]: false\n        }));\n        return;\n      }\n\n      // Check for conflicting sessions\n      const conflictingSession = getConflictingSession(sessionId);\n      if (conflictingSession) {\n        var _conflictingSession$c, _conflictingSession$c2;\n        setError(`âš ï¸ Time Conflict: You've already marked attendance for ${((_conflictingSession$c = conflictingSession.classes) === null || _conflictingSession$c === void 0 ? void 0 : (_conflictingSession$c2 = _conflictingSession$c.courses) === null || _conflictingSession$c2 === void 0 ? void 0 : _conflictingSession$c2.course_code) || 'another course'} (${conflictingSession.start_time}-${conflictingSession.end_time}). Sessions cannot overlap.`);\n        setMarking(prev => ({\n          ...prev,\n          [sessionId]: false\n        }));\n        return;\n      }\n\n      // Find the session to determine status\n      const session = activeSessions.find(s => s.id === sessionId);\n      if (!session) {\n        setError('Session not found');\n        setMarking(prev => ({\n          ...prev,\n          [sessionId]: false\n        }));\n        return;\n      }\n      const status = determineAttendanceStatus(session);\n\n      // Insert attendance record\n      const {\n        error: insertError\n      } = await supabase.from('attendance').insert([{\n        session_id: sessionId,\n        student_id: currentUser.id,\n        status: status,\n        timestamp: new Date().toISOString()\n      }]);\n      if (insertError) throw insertError;\n\n      // Update local state\n      setSubmittedAttendance(prev => ({\n        ...prev,\n        [sessionId]: status\n      }));\n\n      // Show success message\n      setSuccess(`âœ… Attendance marked as ${status.toUpperCase()}`);\n\n      // Clear success message after 3 seconds\n      setTimeout(() => setSuccess(null), 3000);\n    } catch (err) {\n      console.error('Error marking attendance:', err);\n      setError(`âŒ Error: ${err.message}`);\n    } finally {\n      setMarking(prev => ({\n        ...prev,\n        [sessionId]: false\n      }));\n    }\n  };\n  if (loading) {\n    return /*#__PURE__*/_jsxDEV(Layout, {\n      role: \"student\",\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          display: 'flex',\n          alignItems: 'center',\n          justifyContent: 'center',\n          height: '400px'\n        },\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          style: {\n            textAlign: 'center'\n          },\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            style: {\n              animation: 'spin 1s linear infinite',\n              fontSize: '32px',\n              marginBottom: '15px'\n            },\n            children: \"\\u23F3\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 242,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            style: {\n              fontSize: '16px',\n              color: '#666'\n            },\n            children: \"Loading attendance sessions...\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 243,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 241,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 240,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 239,\n      columnNumber: 7\n    }, this);\n  }\n  if (!currentUser || userRole !== 'student') return null;\n  return /*#__PURE__*/_jsxDEV(Layout, {\n    role: \"student\",\n    children: /*#__PURE__*/_jsxDEV(\"div\", {\n      style: {\n        maxWidth: '1000px',\n        margin: '0 auto'\n      },\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          marginBottom: '32px'\n        },\n        children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n          style: {\n            margin: '0 0 8px 0',\n            fontSize: '32px',\n            fontWeight: '700',\n            color: '#1f2937'\n          },\n          children: \"\\uD83D\\uDCDD Mark Attendance\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 257,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          style: {\n            margin: '0',\n            fontSize: '16px',\n            color: '#6b7280'\n          },\n          children: \"Track and submit your attendance for active sessions\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 260,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 256,\n        columnNumber: 9\n      }, this), error && /*#__PURE__*/_jsxDEV(Alert, {\n        type: \"error\",\n        message: error\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 266,\n        columnNumber: 19\n      }, this), success && /*#__PURE__*/_jsxDEV(Alert, {\n        type: \"success\",\n        message: success\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 267,\n        columnNumber: 21\n      }, this), sessionsLoading ? /*#__PURE__*/_jsxDEV(Card, {\n        style: {\n          boxShadow: '0 1px 3px rgba(0,0,0,0.1)'\n        },\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          style: {\n            padding: '40px',\n            textAlign: 'center'\n          },\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            style: {\n              fontSize: '48px',\n              marginBottom: '16px',\n              animation: 'spin 2s linear infinite'\n            },\n            children: \"\\u23F3\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 273,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n            style: {\n              margin: '0',\n              fontSize: '16px',\n              color: '#6b7280'\n            },\n            children: \"Fetching your active attendance sessions...\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 274,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 272,\n          columnNumber: 13\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 271,\n        columnNumber: 11\n      }, this) : activeSessions.length === 0 ?\n      /*#__PURE__*/\n      // No Sessions State\n      _jsxDEV(_Fragment, {\n        children: [/*#__PURE__*/_jsxDEV(Card, {\n          style: {\n            boxShadow: '0 1px 3px rgba(0,0,0,0.1)',\n            marginBottom: '24px'\n          },\n          children: /*#__PURE__*/_jsxDEV(\"div\", {\n            style: {\n              padding: '48px 32px',\n              textAlign: 'center'\n            },\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              style: {\n                fontSize: '64px',\n                marginBottom: '16px'\n              },\n              children: \"\\uD83D\\uDCED\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 284,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"h2\", {\n              style: {\n                margin: '0 0 8px 0',\n                fontSize: '24px',\n                fontWeight: '600',\n                color: '#1f2937'\n              },\n              children: \"No Active Sessions Yet\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 285,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n              style: {\n                margin: '0 0 16px 0',\n                fontSize: '16px',\n                color: '#6b7280',\n                maxWidth: '400px',\n                marginLeft: 'auto',\n                marginRight: 'auto'\n              },\n              children: \"There are currently no active attendance sessions for your enrolled courses. Check back soon!\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 288,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n              onClick: fetchActiveSessions,\n              style: {\n                padding: '10px 24px',\n                backgroundColor: '#3b82f6',\n                color: 'white',\n                border: 'none',\n                borderRadius: '6px',\n                fontSize: '14px',\n                fontWeight: '600',\n                cursor: 'pointer',\n                transition: 'background-color 0.2s'\n              },\n              onMouseEnter: e => e.target.style.backgroundColor = '#2563eb',\n              onMouseLeave: e => e.target.style.backgroundColor = '#3b82f6',\n              children: \"\\uD83D\\uDD04 Refresh\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 291,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 283,\n            columnNumber: 15\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 282,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          style: {\n            display: 'grid',\n            gridTemplateColumns: 'repeat(auto-fit, minmax(280px, 1fr))',\n            gap: '16px',\n            marginBottom: '24px'\n          },\n          children: [/*#__PURE__*/_jsxDEV(Card, {\n            style: {\n              boxShadow: '0 1px 3px rgba(0,0,0,0.1)'\n            },\n            children: /*#__PURE__*/_jsxDEV(\"div\", {\n              style: {\n                padding: '24px'\n              },\n              children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                style: {\n                  fontSize: '32px',\n                  marginBottom: '12px'\n                },\n                children: \"\\u2705\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 321,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                style: {\n                  margin: '0 0 4px 0',\n                  fontSize: '14px',\n                  color: '#6b7280'\n                },\n                children: \"Attendance Status\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 322,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                style: {\n                  margin: '0',\n                  fontSize: '20px',\n                  fontWeight: '700',\n                  color: '#1f2937'\n                },\n                children: \"0 Sessions\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 323,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 320,\n              columnNumber: 17\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 319,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(Card, {\n            style: {\n              boxShadow: '0 1px 3px rgba(0,0,0,0.1)'\n            },\n            children: /*#__PURE__*/_jsxDEV(\"div\", {\n              style: {\n                padding: '24px'\n              },\n              children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                style: {\n                  fontSize: '32px',\n                  marginBottom: '12px'\n                },\n                children: \"\\uD83D\\uDCCA\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 328,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                style: {\n                  margin: '0 0 4px 0',\n                  fontSize: '14px',\n                  color: '#6b7280'\n                },\n                children: \"Attendance Rate\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 329,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                style: {\n                  margin: '0',\n                  fontSize: '20px',\n                  fontWeight: '700',\n                  color: '#1f2937'\n                },\n                children: \"-- %\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 330,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 327,\n              columnNumber: 17\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 326,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(Card, {\n            style: {\n              boxShadow: '0 1px 3px rgba(0,0,0,0.1)'\n            },\n            children: /*#__PURE__*/_jsxDEV(\"div\", {\n              style: {\n                padding: '24px'\n              },\n              children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                style: {\n                  fontSize: '32px',\n                  marginBottom: '12px'\n                },\n                children: \"\\u23F0\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 335,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                style: {\n                  margin: '0 0 4px 0',\n                  fontSize: '14px',\n                  color: '#6b7280'\n                },\n                children: \"Last Updated\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 336,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                style: {\n                  margin: '0',\n                  fontSize: '20px',\n                  fontWeight: '700',\n                  color: '#1f2937'\n                },\n                children: \"Just Now\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 337,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 334,\n              columnNumber: 17\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 333,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 313,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true) :\n      /*#__PURE__*/\n      // Active Sessions\n      _jsxDEV(\"div\", {\n        style: {\n          marginBottom: '32px'\n        },\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          style: {\n            marginBottom: '20px'\n          },\n          children: /*#__PURE__*/_jsxDEV(\"h2\", {\n            style: {\n              margin: '0',\n              fontSize: '20px',\n              fontWeight: '700',\n              color: '#1f2937'\n            },\n            children: [\"Active Sessions (\", activeSessions.length, \")\"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 346,\n            columnNumber: 15\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 345,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          style: {\n            display: 'grid',\n            gridTemplateColumns: '1fr',\n            gap: '16px'\n          },\n          children: activeSessions.map(session => {\n            var _session$classes, _session$classes$cour, _session$classes2, _session$classes2$cou, _session$classes3, _conflictingSession$c3, _conflictingSession$c4;\n            const isSubmitted = submittedAttendance[session.id];\n            const isMarking = marking[session.id];\n            const status = determineAttendanceStatus(session);\n            const startTime = new Date(session.created_at);\n            const expireTime = new Date(session.expires_at);\n            const now = new Date();\n            const timeRemaining = Math.max(0, Math.floor((expireTime - now) / 1000 / 60));\n\n            // Check for conflicts\n            const conflictingSession = getConflictingSession(session.id);\n            const hasConflict = !isSubmitted && conflictingSession;\n            return /*#__PURE__*/_jsxDEV(Card, {\n              style: {\n                boxShadow: '0 1px 3px rgba(0,0,0,0.1)',\n                borderLeft: `4px solid ${isSubmitted ? '#10b981' : hasConflict ? '#f59e0b' : '#3b82f6'}`,\n                borderRadius: '8px',\n                opacity: hasConflict ? 0.7 : 1\n              },\n              children: /*#__PURE__*/_jsxDEV(\"div\", {\n                style: {\n                  padding: '24px'\n                },\n                children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                  style: {\n                    display: 'flex',\n                    justifyContent: 'space-between',\n                    alignItems: 'start',\n                    marginBottom: '16px'\n                  },\n                  children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                    style: {\n                      flex: 1\n                    },\n                    children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n                      style: {\n                        margin: '0 0 6px 0',\n                        fontSize: '18px',\n                        fontWeight: '700',\n                        color: '#1f2937'\n                      },\n                      children: [\"\\uD83D\\uDCDA \", ((_session$classes = session.classes) === null || _session$classes === void 0 ? void 0 : (_session$classes$cour = _session$classes.courses) === null || _session$classes$cour === void 0 ? void 0 : _session$classes$cour.course_code) || 'UNKNOWN', \" - \", ((_session$classes2 = session.classes) === null || _session$classes2 === void 0 ? void 0 : (_session$classes2$cou = _session$classes2.courses) === null || _session$classes2$cou === void 0 ? void 0 : _session$classes2$cou.title) || ((_session$classes3 = session.classes) === null || _session$classes3 === void 0 ? void 0 : _session$classes3.class_name) || 'Unknown']\n                    }, void 0, true, {\n                      fileName: _jsxFileName,\n                      lineNumber: 378,\n                      columnNumber: 27\n                    }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                      style: {\n                        margin: '0',\n                        fontSize: '13px',\n                        color: '#6b7280',\n                        fontFamily: 'monospace'\n                      },\n                      children: [\"Session: \", session.token.substring(0, 12), \"... | Start: \", session.start_time || 'N/A', \" | End: \", session.end_time || 'N/A']\n                    }, void 0, true, {\n                      fileName: _jsxFileName,\n                      lineNumber: 381,\n                      columnNumber: 27\n                    }, this)]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 377,\n                    columnNumber: 25\n                  }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                    style: {\n                      textAlign: 'right'\n                    },\n                    children: [isSubmitted && /*#__PURE__*/_jsxDEV(\"div\", {\n                      style: {\n                        padding: '6px 12px',\n                        backgroundColor: isSubmitted === 'present' ? '#d1fae5' : '#fef3c7',\n                        color: isSubmitted === 'present' ? '#065f46' : '#92400e',\n                        borderRadius: '20px',\n                        fontSize: '12px',\n                        fontWeight: '600',\n                        textTransform: 'uppercase',\n                        display: 'inline-block'\n                      },\n                      children: isSubmitted === 'present' ? 'âœ… Present' : 'â±ï¸ Late'\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 387,\n                      columnNumber: 29\n                    }, this), !isSubmitted && hasConflict && /*#__PURE__*/_jsxDEV(\"div\", {\n                      style: {\n                        padding: '6px 12px',\n                        backgroundColor: '#fef3c7',\n                        color: '#92400e',\n                        borderRadius: '20px',\n                        fontSize: '12px',\n                        fontWeight: '600',\n                        textTransform: 'uppercase',\n                        display: 'inline-block'\n                      },\n                      children: \"\\u26A0\\uFE0F Conflict\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 401,\n                      columnNumber: 29\n                    }, this), !isSubmitted && !hasConflict && /*#__PURE__*/_jsxDEV(\"div\", {\n                      style: {\n                        padding: '6px 12px',\n                        backgroundColor: '#dbeafe',\n                        color: '#1e40af',\n                        borderRadius: '20px',\n                        fontSize: '12px',\n                        fontWeight: '600',\n                        textTransform: 'uppercase',\n                        display: 'inline-block'\n                      },\n                      children: \"\\u23F3 Active\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 415,\n                      columnNumber: 29\n                    }, this)]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 385,\n                    columnNumber: 25\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 376,\n                  columnNumber: 23\n                }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                  style: {\n                    display: 'grid',\n                    gridTemplateColumns: 'repeat(auto-fit, minmax(150px, 1fr))',\n                    gap: '16px',\n                    marginBottom: '20px',\n                    padding: '16px',\n                    backgroundColor: '#f9fafb',\n                    borderRadius: '6px'\n                  },\n                  children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                    children: [/*#__PURE__*/_jsxDEV(\"p\", {\n                      style: {\n                        margin: '0 0 4px 0',\n                        fontSize: '12px',\n                        color: '#6b7280',\n                        fontWeight: '600'\n                      },\n                      children: \"Started\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 442,\n                      columnNumber: 27\n                    }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                      style: {\n                        margin: '0',\n                        fontSize: '14px',\n                        fontWeight: '500',\n                        color: '#1f2937'\n                      },\n                      children: startTime.toLocaleTimeString('en-US', {\n                        hour: '2-digit',\n                        minute: '2-digit'\n                      })\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 443,\n                      columnNumber: 27\n                    }, this)]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 441,\n                    columnNumber: 25\n                  }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                    children: [/*#__PURE__*/_jsxDEV(\"p\", {\n                      style: {\n                        margin: '0 0 4px 0',\n                        fontSize: '12px',\n                        color: '#6b7280',\n                        fontWeight: '600'\n                      },\n                      children: \"Expires In\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 448,\n                      columnNumber: 27\n                    }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                      style: {\n                        margin: '0',\n                        fontSize: '14px',\n                        fontWeight: '500',\n                        color: '#1f2937'\n                      },\n                      children: [timeRemaining, \"m remaining\"]\n                    }, void 0, true, {\n                      fileName: _jsxFileName,\n                      lineNumber: 449,\n                      columnNumber: 27\n                    }, this)]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 447,\n                    columnNumber: 25\n                  }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                    children: [/*#__PURE__*/_jsxDEV(\"p\", {\n                      style: {\n                        margin: '0 0 4px 0',\n                        fontSize: '12px',\n                        color: '#6b7280',\n                        fontWeight: '600'\n                      },\n                      children: \"Status\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 454,\n                      columnNumber: 27\n                    }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                      style: {\n                        margin: '0',\n                        fontSize: '14px',\n                        fontWeight: '500',\n                        color: '#1f2937'\n                      },\n                      children: !isSubmitted ? `Will mark as ${status.toUpperCase()}` : `Marked as ${isSubmitted.toUpperCase()}`\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 455,\n                      columnNumber: 27\n                    }, this)]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 453,\n                    columnNumber: 25\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 432,\n                  columnNumber: 23\n                }, this), hasConflict && /*#__PURE__*/_jsxDEV(\"div\", {\n                  style: {\n                    padding: '12px',\n                    backgroundColor: '#fef3c7',\n                    borderRadius: '6px',\n                    marginBottom: '16px',\n                    borderLeft: '3px solid #f59e0b'\n                  },\n                  children: /*#__PURE__*/_jsxDEV(\"p\", {\n                    style: {\n                      margin: '0',\n                      fontSize: '13px',\n                      color: '#92400e'\n                    },\n                    children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n                      children: \"\\u26A0\\uFE0F Time Conflict:\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 471,\n                      columnNumber: 29\n                    }, this), \" You've already marked attendance for \", (_conflictingSession$c3 = conflictingSession.classes) === null || _conflictingSession$c3 === void 0 ? void 0 : (_conflictingSession$c4 = _conflictingSession$c3.courses) === null || _conflictingSession$c4 === void 0 ? void 0 : _conflictingSession$c4.course_code, \" (\", conflictingSession.start_time, \"-\", conflictingSession.end_time, \"). These sessions overlap. You can only mark one overlapping session.\"]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 470,\n                    columnNumber: 27\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 463,\n                  columnNumber: 25\n                }, this), !isSubmitted && !hasConflict && /*#__PURE__*/_jsxDEV(\"div\", {\n                  style: {\n                    padding: '12px',\n                    backgroundColor: '#eff6ff',\n                    borderRadius: '6px',\n                    marginBottom: '16px',\n                    borderLeft: '3px solid #3b82f6'\n                  },\n                  children: /*#__PURE__*/_jsxDEV(\"p\", {\n                    style: {\n                      margin: '0',\n                      fontSize: '13px',\n                      color: '#1e40af'\n                    },\n                    children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n                      children: \"\\u26A0\\uFE0F Note:\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 486,\n                      columnNumber: 29\n                    }, this), \" You can mark attendance only ONCE per session. You will be marked as \", status.toUpperCase(), \" based on the current time. Submit before session ends!\"]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 485,\n                    columnNumber: 27\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 478,\n                  columnNumber: 25\n                }, this), isSubmitted && /*#__PURE__*/_jsxDEV(\"div\", {\n                  style: {\n                    padding: '12px',\n                    backgroundColor: '#d1fae5',\n                    borderRadius: '6px',\n                    marginBottom: '16px',\n                    borderLeft: '3px solid #10b981'\n                  },\n                  children: /*#__PURE__*/_jsxDEV(\"p\", {\n                    style: {\n                      margin: '0',\n                      fontSize: '13px',\n                      color: '#065f46'\n                    },\n                    children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n                      children: \"\\u2705 Already Marked:\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 501,\n                      columnNumber: 29\n                    }, this), \" You submitted attendance as \", isSubmitted.toUpperCase(), \". You cannot mark again for this session.\"]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 500,\n                    columnNumber: 27\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 493,\n                  columnNumber: 25\n                }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                  onClick: () => handleMarkAttendance(session.id),\n                  disabled: isSubmitted || isMarking || hasConflict,\n                  style: {\n                    width: '100%',\n                    padding: '12px 16px',\n                    backgroundColor: isSubmitted || hasConflict ? '#d1d5db' : '#3b82f6',\n                    color: 'white',\n                    border: 'none',\n                    borderRadius: '6px',\n                    fontSize: '15px',\n                    fontWeight: '600',\n                    cursor: isSubmitted || isMarking || hasConflict ? 'not-allowed' : 'pointer',\n                    opacity: isSubmitted || isMarking || hasConflict ? 0.6 : 1,\n                    transition: 'background-color 0.2s'\n                  },\n                  onMouseEnter: e => {\n                    if (!isSubmitted && !isMarking && !hasConflict) {\n                      e.target.style.backgroundColor = '#2563eb';\n                    }\n                  },\n                  onMouseLeave: e => {\n                    if (!isSubmitted && !isMarking && !hasConflict) {\n                      e.target.style.backgroundColor = '#3b82f6';\n                    }\n                  },\n                  title: hasConflict ? 'Disabled due to time conflict with another marked session' : '',\n                  children: isMarking ? 'â³ Submitting...' : isSubmitted ? `âœ“ MARKED ALREADY (${isSubmitted.toUpperCase()})` : hasConflict ? `â›” BLOCKED (Time Conflict)` : `âœ… Mark ${status.toUpperCase()}`\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 507,\n                  columnNumber: 23\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 375,\n                columnNumber: 21\n              }, this)\n            }, session.id, false, {\n              fileName: _jsxFileName,\n              lineNumber: 366,\n              columnNumber: 19\n            }, this);\n          })\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 351,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 344,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(Card, {\n        style: {\n          boxShadow: '0 1px 3px rgba(0,0,0,0.1)',\n          marginTop: '32px'\n        },\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          style: {\n            padding: '24px'\n          },\n          children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n            style: {\n              margin: '0 0 24px 0',\n              fontSize: '18px',\n              fontWeight: '700',\n              color: '#1f2937'\n            },\n            children: \"\\uD83D\\uDCCB How Attendance Works\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 548,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            style: {\n              display: 'grid',\n              gridTemplateColumns: 'repeat(auto-fit, minmax(300px, 1fr))',\n              gap: '20px'\n            },\n            children: [{\n              step: '1',\n              title: 'Instructor Starts Session',\n              desc: 'Your instructor creates an attendance session in their dashboard',\n              icon: 'ðŸ‘¨â€ðŸ«'\n            }, {\n              step: '2',\n              title: 'Session Appears Here',\n              desc: 'Active sessions automatically show on this page in real-time',\n              icon: 'ðŸ”„'\n            }, {\n              step: '3',\n              title: 'Submit Attendance',\n              desc: 'Click the \"Mark\" button to submit your attendance',\n              icon: 'ðŸ‘†'\n            }, {\n              step: '4',\n              title: 'Automatic Status',\n              desc: 'PRESENT if within 15 min, otherwise LATE',\n              icon: 'â±ï¸'\n            }, {\n              step: '5',\n              title: 'Immutable Record',\n              desc: 'Once submitted, your attendance record cannot be changed',\n              icon: 'ðŸ”’'\n            }, {\n              step: '6',\n              title: 'Check Your History',\n              desc: 'View all your attendance records in your history page',\n              icon: 'ðŸ“Š'\n            }].map((item, idx) => /*#__PURE__*/_jsxDEV(\"div\", {\n              style: {\n                padding: '20px',\n                backgroundColor: '#f9fafb',\n                borderRadius: '8px',\n                border: '1px solid #e5e7eb'\n              },\n              children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                style: {\n                  display: 'flex',\n                  alignItems: 'center',\n                  marginBottom: '12px',\n                  gap: '12px'\n                },\n                children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                  style: {\n                    width: '32px',\n                    height: '32px',\n                    borderRadius: '50%',\n                    backgroundColor: '#3b82f6',\n                    color: 'white',\n                    display: 'flex',\n                    alignItems: 'center',\n                    justifyContent: 'center',\n                    fontWeight: '700',\n                    fontSize: '14px'\n                  },\n                  children: item.step\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 610,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                  style: {\n                    fontSize: '20px'\n                  },\n                  children: item.icon\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 624,\n                  columnNumber: 21\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 604,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"h3\", {\n                style: {\n                  margin: '0 0 6px 0',\n                  fontSize: '14px',\n                  fontWeight: '700',\n                  color: '#1f2937'\n                },\n                children: item.title\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 626,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                style: {\n                  margin: '0',\n                  fontSize: '13px',\n                  color: '#6b7280',\n                  lineHeight: '1.5'\n                },\n                children: item.desc\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 629,\n                columnNumber: 19\n              }, this)]\n            }, idx, true, {\n              fileName: _jsxFileName,\n              lineNumber: 595,\n              columnNumber: 17\n            }, this))\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 552,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 547,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 546,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 254,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 253,\n    columnNumber: 5\n  }, this);\n};\n_s(StudentMarkAttendance, \"8Ph4urfoyY3osXLtpS06s/p9CnE=\", false, function () {\n  return [useAuth, useNavigate, useLocation];\n});\n_c = StudentMarkAttendance;\nexport default StudentMarkAttendance;\nvar _c;\n$RefreshReg$(_c, \"StudentMarkAttendance\");","map":{"version":3,"names":["React","useState","useEffect","useNavigate","useLocation","supabase","useAuth","Layout","Card","Alert","Badge","jsxDEV","_jsxDEV","Fragment","_Fragment","StudentMarkAttendance","_s","currentUser","userRole","loading","navigate","location","activeSessions","setActiveSessions","sessionsLoading","setSessionsLoading","submittedAttendance","setSubmittedAttendance","marking","setMarking","error","setError","success","setSuccess","fetchActiveSessions","interval","setInterval","clearInterval","data","sessions","sessionsError","from","select","gt","Date","toISOString","order","ascending","now","filteredSessions","filter","session","session_date","end_time","sessionDate","endHour","endMin","split","sessionEndTime","setHours","parseInt","id","length","submissions","submissionsError","eq","in","map","s","submitted","forEach","sub","session_id","status","err","console","message","timeToMinutes","timeStr","hours","minutes","Number","sessionsOverlap","session1","session2","start1","start_time","end1","start2","end2","getMarkedSessions","getConflictingSession","sessionId","targetSession","find","markedSessions","markedSession","determineAttendanceStatus","warn","created_at","endTimeStr","handleMarkAttendance","prev","conflictingSession","_conflictingSession$c","_conflictingSession$c2","classes","courses","course_code","insertError","insert","student_id","timestamp","toUpperCase","setTimeout","role","children","style","display","alignItems","justifyContent","height","textAlign","animation","fontSize","marginBottom","fileName","_jsxFileName","lineNumber","columnNumber","color","maxWidth","margin","fontWeight","type","boxShadow","padding","marginLeft","marginRight","onClick","backgroundColor","border","borderRadius","cursor","transition","onMouseEnter","e","target","onMouseLeave","gridTemplateColumns","gap","_session$classes","_session$classes$cour","_session$classes2","_session$classes2$cou","_session$classes3","_conflictingSession$c3","_conflictingSession$c4","isSubmitted","isMarking","startTime","expireTime","expires_at","timeRemaining","Math","max","floor","hasConflict","borderLeft","opacity","flex","title","class_name","fontFamily","token","substring","textTransform","toLocaleTimeString","hour","minute","disabled","width","marginTop","step","desc","icon","item","idx","lineHeight","_c","$RefreshReg$"],"sources":["C:/Users/PFI/Desktop/ATTENDANCE/ATTENDANCE/src/pages/StudentMarkAttendance.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\r\nimport { useNavigate, useLocation } from 'react-router-dom';\r\nimport { supabase } from '../supabase/supabase';\r\nimport { useAuth } from '../contexts/AuthContext';\r\nimport Layout from '../components/Layout';\r\nimport Card from '../components/Card';\r\nimport Alert from '../components/Alert';\r\nimport Badge from '../components/Badge';\r\n\r\nconst StudentMarkAttendance = () => {\r\n  const { currentUser, userRole, loading } = useAuth();\r\n  const navigate = useNavigate();\r\n  const location = useLocation();\r\n  const [activeSessions, setActiveSessions] = useState([]);\r\n  const [sessionsLoading, setSessionsLoading] = useState(true);\r\n  const [submittedAttendance, setSubmittedAttendance] = useState({});\r\n  const [marking, setMarking] = useState({});\r\n  const [error, setError] = useState(null);\r\n  const [success, setSuccess] = useState(null);\r\n\r\n  useEffect(() => {\r\n    if (loading) return;\r\n\r\n    if (!currentUser || userRole !== 'student') {\r\n      navigate('/student');\r\n      return;\r\n    }\r\n\r\n    fetchActiveSessions();\r\n\r\n    // Refresh sessions every 10 seconds\r\n    const interval = setInterval(fetchActiveSessions, 10000);\r\n    return () => clearInterval(interval);\r\n  }, [currentUser, userRole, loading, navigate]);\r\n\r\n  const fetchActiveSessions = async () => {\r\n    try {\r\n      setSessionsLoading(true);\r\n      setError(null);\r\n\r\n      // Get ALL active sessions (not filtered by class)\r\n      const { data: sessions, error: sessionsError } = await supabase\r\n        .from('sessions')\r\n        .select(`\r\n          id,\r\n          token,\r\n          created_at,\r\n          expires_at,\r\n          start_time,\r\n          end_time,\r\n          session_date,\r\n          class_id,\r\n          classes (\r\n            class_name,\r\n            courses (\r\n              course_code,\r\n              title\r\n            )\r\n          )\r\n        `)\r\n        .gt('expires_at', new Date().toISOString())\r\n        .order('created_at', { ascending: false });\r\n\r\n      if (sessionsError) throw sessionsError;\r\n\r\n      // Filter out sessions that have already passed\r\n      const now = new Date();\r\n      const filteredSessions = (sessions || []).filter(session => {\r\n        if (!session.session_date || !session.end_time) return false;\r\n        \r\n        // Parse the session date and end time\r\n        const sessionDate = new Date(session.session_date);\r\n        const [endHour, endMin] = session.end_time.split(':');\r\n        \r\n        // Create the session end time\r\n        const sessionEndTime = new Date(sessionDate);\r\n        sessionEndTime.setHours(parseInt(endHour), parseInt(endMin), 0);\r\n        \r\n        // Only show sessions that haven't ended yet\r\n        return now <= sessionEndTime;\r\n      });\r\n\r\n      setActiveSessions(filteredSessions);\r\n\r\n      // Check which sessions the student has already submitted for\r\n      if (currentUser?.id && sessions && sessions.length > 0) {\r\n        const { data: submissions, error: submissionsError } = await supabase\r\n          .from('attendance')\r\n          .select('session_id, status')\r\n          .eq('student_id', currentUser.id)\r\n          .in('session_id', sessions.map(s => s.id));\r\n\r\n        if (!submissionsError && submissions) {\r\n          const submitted = {};\r\n          submissions.forEach(sub => {\r\n            submitted[sub.session_id] = sub.status;\r\n          });\r\n          setSubmittedAttendance(submitted);\r\n        }\r\n      }\r\n    } catch (err) {\r\n      console.error('Error fetching sessions:', err);\r\n      setError(err.message);\r\n    } finally {\r\n      setSessionsLoading(false);\r\n    }\r\n  };\r\n\r\n  // Helper function to parse time strings (HH:MM) into minutes\r\n  const timeToMinutes = (timeStr) => {\r\n    const [hours, minutes] = timeStr.split(':').map(Number);\r\n    return hours * 60 + minutes;\r\n  };\r\n\r\n  // Helper function to check if two sessions overlap\r\n  const sessionsOverlap = (session1, session2) => {\r\n    if (!session1 || !session2 || !session1.session_date || !session2.session_date) return false;\r\n    \r\n    // Sessions must be on the same date to overlap\r\n    if (session1.session_date !== session2.session_date) return false;\r\n\r\n    const start1 = timeToMinutes(session1.start_time);\r\n    const end1 = timeToMinutes(session1.end_time);\r\n    const start2 = timeToMinutes(session2.start_time);\r\n    const end2 = timeToMinutes(session2.end_time);\r\n\r\n    // Check if time windows overlap\r\n    // Overlap occurs if: start1 < end2 AND start2 < end1\r\n    return start1 < end2 && start2 < end1;\r\n  };\r\n\r\n  // Get list of sessions the student has already marked attendance for\r\n  const getMarkedSessions = () => {\r\n    return activeSessions.filter(session => submittedAttendance[session.id]);\r\n  };\r\n\r\n  // Check if a session conflicts with already-marked sessions\r\n  const getConflictingSession = (sessionId) => {\r\n    const targetSession = activeSessions.find(s => s.id === sessionId);\r\n    if (!targetSession) return null;\r\n\r\n    const markedSessions = getMarkedSessions();\r\n    for (let markedSession of markedSessions) {\r\n      if (sessionsOverlap(targetSession, markedSession)) {\r\n        return markedSession;\r\n      }\r\n    }\r\n    return null;\r\n  };\r\n\r\n  const determineAttendanceStatus = (session) => {\r\n    // Safety check\r\n    if (!session || !session.end_time) {\r\n      console.warn('âš ï¸ Session or end_time is missing:', session);\r\n      return 'present'; // Default to present if data is missing\r\n    }\r\n\r\n    // Get the session date and end time\r\n    const [endHour, endMin] = session.end_time.split(':');\r\n    \r\n    // Build end time for today\r\n    const sessionDate = new Date(session.created_at).toISOString().split('T')[0];\r\n    const endTimeStr = `${sessionDate}T${session.end_time}:00`;\r\n    const sessionEndTime = new Date(endTimeStr);\r\n    \r\n    const now = new Date();\r\n\r\n    // If current time is AFTER session end time, mark as LATE\r\n    // Otherwise, mark as PRESENT\r\n    return now > sessionEndTime ? 'late' : 'present';\r\n  };\r\n\r\n  const handleMarkAttendance = async (sessionId) => {\r\n    try {\r\n      setMarking(prev => ({ ...prev, [sessionId]: true }));\r\n      setError(null);\r\n      setSuccess(null);\r\n\r\n      // Check if already submitted\r\n      if (submittedAttendance[sessionId]) {\r\n        setError(`You have already marked attendance for this session`);\r\n        setMarking(prev => ({ ...prev, [sessionId]: false }));\r\n        return;\r\n      }\r\n\r\n      // Check for conflicting sessions\r\n      const conflictingSession = getConflictingSession(sessionId);\r\n      if (conflictingSession) {\r\n        setError(`âš ï¸ Time Conflict: You've already marked attendance for ${conflictingSession.classes?.courses?.course_code || 'another course'} (${conflictingSession.start_time}-${conflictingSession.end_time}). Sessions cannot overlap.`);\r\n        setMarking(prev => ({ ...prev, [sessionId]: false }));\r\n        return;\r\n      }\r\n\r\n      // Find the session to determine status\r\n      const session = activeSessions.find(s => s.id === sessionId);\r\n      if (!session) {\r\n        setError('Session not found');\r\n        setMarking(prev => ({ ...prev, [sessionId]: false }));\r\n        return;\r\n      }\r\n\r\n      const status = determineAttendanceStatus(session);\r\n\r\n      // Insert attendance record\r\n      const { error: insertError } = await supabase\r\n        .from('attendance')\r\n        .insert([\r\n          {\r\n            session_id: sessionId,\r\n            student_id: currentUser.id,\r\n            status: status,\r\n            timestamp: new Date().toISOString(),\r\n          }\r\n        ]);\r\n\r\n      if (insertError) throw insertError;\r\n\r\n      // Update local state\r\n      setSubmittedAttendance(prev => ({\r\n        ...prev,\r\n        [sessionId]: status\r\n      }));\r\n\r\n      // Show success message\r\n      setSuccess(`âœ… Attendance marked as ${status.toUpperCase()}`);\r\n\r\n      // Clear success message after 3 seconds\r\n      setTimeout(() => setSuccess(null), 3000);\r\n    } catch (err) {\r\n      console.error('Error marking attendance:', err);\r\n      setError(`âŒ Error: ${err.message}`);\r\n    } finally {\r\n      setMarking(prev => ({ ...prev, [sessionId]: false }));\r\n    }\r\n  };\r\n\r\n  if (loading) {\r\n    return (\r\n      <Layout role=\"student\">\r\n        <div style={{ display: 'flex', alignItems: 'center', justifyContent: 'center', height: '400px' }}>\r\n          <div style={{ textAlign: 'center' }}>\r\n            <div style={{ animation: 'spin 1s linear infinite', fontSize: '32px', marginBottom: '15px' }}>â³</div>\r\n            <div style={{ fontSize: '16px', color: '#666' }}>Loading attendance sessions...</div>\r\n          </div>\r\n        </div>\r\n      </Layout>\r\n    );\r\n  }\r\n\r\n  if (!currentUser || userRole !== 'student') return null;\r\n\r\n  return (\r\n    <Layout role=\"student\">\r\n      <div style={{ maxWidth: '1000px', margin: '0 auto' }}>\r\n        {/* Header */}\r\n        <div style={{ marginBottom: '32px' }}>\r\n          <h1 style={{ margin: '0 0 8px 0', fontSize: '32px', fontWeight: '700', color: '#1f2937' }}>\r\n            ðŸ“ Mark Attendance\r\n          </h1>\r\n          <p style={{ margin: '0', fontSize: '16px', color: '#6b7280' }}>\r\n            Track and submit your attendance for active sessions\r\n          </p>\r\n        </div>\r\n\r\n        {/* Alerts */}\r\n        {error && <Alert type=\"error\" message={error} />}\r\n        {success && <Alert type=\"success\" message={success} />}\r\n\r\n        {/* Loading State */}\r\n        {sessionsLoading ? (\r\n          <Card style={{ boxShadow: '0 1px 3px rgba(0,0,0,0.1)' }}>\r\n            <div style={{ padding: '40px', textAlign: 'center' }}>\r\n              <div style={{ fontSize: '48px', marginBottom: '16px', animation: 'spin 2s linear infinite' }}>â³</div>\r\n              <p style={{ margin: '0', fontSize: '16px', color: '#6b7280' }}>\r\n                Fetching your active attendance sessions...\r\n              </p>\r\n            </div>\r\n          </Card>\r\n        ) : activeSessions.length === 0 ? (\r\n          // No Sessions State\r\n          <>\r\n            <Card style={{ boxShadow: '0 1px 3px rgba(0,0,0,0.1)', marginBottom: '24px' }}>\r\n              <div style={{ padding: '48px 32px', textAlign: 'center' }}>\r\n                <div style={{ fontSize: '64px', marginBottom: '16px' }}>ðŸ“­</div>\r\n                <h2 style={{ margin: '0 0 8px 0', fontSize: '24px', fontWeight: '600', color: '#1f2937' }}>\r\n                  No Active Sessions Yet\r\n                </h2>\r\n                <p style={{ margin: '0 0 16px 0', fontSize: '16px', color: '#6b7280', maxWidth: '400px', marginLeft: 'auto', marginRight: 'auto' }}>\r\n                  There are currently no active attendance sessions for your enrolled courses. Check back soon!\r\n                </p>\r\n                <button\r\n                  onClick={fetchActiveSessions}\r\n                  style={{\r\n                    padding: '10px 24px',\r\n                    backgroundColor: '#3b82f6',\r\n                    color: 'white',\r\n                    border: 'none',\r\n                    borderRadius: '6px',\r\n                    fontSize: '14px',\r\n                    fontWeight: '600',\r\n                    cursor: 'pointer',\r\n                    transition: 'background-color 0.2s'\r\n                  }}\r\n                  onMouseEnter={(e) => e.target.style.backgroundColor = '#2563eb'}\r\n                  onMouseLeave={(e) => e.target.style.backgroundColor = '#3b82f6'}\r\n                >\r\n                  ðŸ”„ Refresh\r\n                </button>\r\n              </div>\r\n            </Card>\r\n\r\n            {/* Status Cards */}\r\n            <div style={{\r\n              display: 'grid',\r\n              gridTemplateColumns: 'repeat(auto-fit, minmax(280px, 1fr))',\r\n              gap: '16px',\r\n              marginBottom: '24px'\r\n            }}>\r\n              <Card style={{ boxShadow: '0 1px 3px rgba(0,0,0,0.1)' }}>\r\n                <div style={{ padding: '24px' }}>\r\n                  <div style={{ fontSize: '32px', marginBottom: '12px' }}>âœ…</div>\r\n                  <p style={{ margin: '0 0 4px 0', fontSize: '14px', color: '#6b7280' }}>Attendance Status</p>\r\n                  <p style={{ margin: '0', fontSize: '20px', fontWeight: '700', color: '#1f2937' }}>0 Sessions</p>\r\n                </div>\r\n              </Card>\r\n              <Card style={{ boxShadow: '0 1px 3px rgba(0,0,0,0.1)' }}>\r\n                <div style={{ padding: '24px' }}>\r\n                  <div style={{ fontSize: '32px', marginBottom: '12px' }}>ðŸ“Š</div>\r\n                  <p style={{ margin: '0 0 4px 0', fontSize: '14px', color: '#6b7280' }}>Attendance Rate</p>\r\n                  <p style={{ margin: '0', fontSize: '20px', fontWeight: '700', color: '#1f2937' }}>-- %</p>\r\n                </div>\r\n              </Card>\r\n              <Card style={{ boxShadow: '0 1px 3px rgba(0,0,0,0.1)' }}>\r\n                <div style={{ padding: '24px' }}>\r\n                  <div style={{ fontSize: '32px', marginBottom: '12px' }}>â°</div>\r\n                  <p style={{ margin: '0 0 4px 0', fontSize: '14px', color: '#6b7280' }}>Last Updated</p>\r\n                  <p style={{ margin: '0', fontSize: '20px', fontWeight: '700', color: '#1f2937' }}>Just Now</p>\r\n                </div>\r\n              </Card>\r\n            </div>\r\n          </>\r\n        ) : (\r\n          // Active Sessions\r\n          <div style={{ marginBottom: '32px' }}>\r\n            <div style={{ marginBottom: '20px' }}>\r\n              <h2 style={{ margin: '0', fontSize: '20px', fontWeight: '700', color: '#1f2937' }}>\r\n                Active Sessions ({activeSessions.length})\r\n              </h2>\r\n            </div>\r\n\r\n            <div style={{ display: 'grid', gridTemplateColumns: '1fr', gap: '16px' }}>\r\n              {activeSessions.map(session => {\r\n                const isSubmitted = submittedAttendance[session.id];\r\n                const isMarking = marking[session.id];\r\n                const status = determineAttendanceStatus(session);\r\n                const startTime = new Date(session.created_at);\r\n                const expireTime = new Date(session.expires_at);\r\n                const now = new Date();\r\n                const timeRemaining = Math.max(0, Math.floor((expireTime - now) / 1000 / 60));\r\n                \r\n                // Check for conflicts\r\n                const conflictingSession = getConflictingSession(session.id);\r\n                const hasConflict = !isSubmitted && conflictingSession;\r\n\r\n                return (\r\n                  <Card\r\n                    key={session.id}\r\n                    style={{\r\n                      boxShadow: '0 1px 3px rgba(0,0,0,0.1)',\r\n                      borderLeft: `4px solid ${isSubmitted ? '#10b981' : hasConflict ? '#f59e0b' : '#3b82f6'}`,\r\n                      borderRadius: '8px',\r\n                      opacity: hasConflict ? 0.7 : 1\r\n                    }}\r\n                  >\r\n                    <div style={{ padding: '24px' }}>\r\n                      <div style={{ display: 'flex', justifyContent: 'space-between', alignItems: 'start', marginBottom: '16px' }}>\r\n                        <div style={{ flex: 1 }}>\r\n                          <h3 style={{ margin: '0 0 6px 0', fontSize: '18px', fontWeight: '700', color: '#1f2937' }}>\r\n                            ðŸ“š {session.classes?.courses?.course_code || 'UNKNOWN'} - {session.classes?.courses?.title || session.classes?.class_name || 'Unknown'}\r\n                          </h3>\r\n                          <p style={{ margin: '0', fontSize: '13px', color: '#6b7280', fontFamily: 'monospace' }}>\r\n                            Session: {session.token.substring(0, 12)}... | Start: {session.start_time || 'N/A'} | End: {session.end_time || 'N/A'}\r\n                          </p>\r\n                        </div>\r\n                        <div style={{ textAlign: 'right' }}>\r\n                          {isSubmitted && (\r\n                            <div style={{\r\n                              padding: '6px 12px',\r\n                              backgroundColor: isSubmitted === 'present' ? '#d1fae5' : '#fef3c7',\r\n                              color: isSubmitted === 'present' ? '#065f46' : '#92400e',\r\n                              borderRadius: '20px',\r\n                              fontSize: '12px',\r\n                              fontWeight: '600',\r\n                              textTransform: 'uppercase',\r\n                              display: 'inline-block'\r\n                            }}>\r\n                              {isSubmitted === 'present' ? 'âœ… Present' : 'â±ï¸ Late'}\r\n                            </div>\r\n                          )}\r\n                          {!isSubmitted && hasConflict && (\r\n                            <div style={{\r\n                              padding: '6px 12px',\r\n                              backgroundColor: '#fef3c7',\r\n                              color: '#92400e',\r\n                              borderRadius: '20px',\r\n                              fontSize: '12px',\r\n                              fontWeight: '600',\r\n                              textTransform: 'uppercase',\r\n                              display: 'inline-block'\r\n                            }}>\r\n                              âš ï¸ Conflict\r\n                            </div>\r\n                          )}\r\n                          {!isSubmitted && !hasConflict && (\r\n                            <div style={{\r\n                              padding: '6px 12px',\r\n                              backgroundColor: '#dbeafe',\r\n                              color: '#1e40af',\r\n                              borderRadius: '20px',\r\n                              fontSize: '12px',\r\n                              fontWeight: '600',\r\n                              textTransform: 'uppercase',\r\n                              display: 'inline-block'\r\n                            }}>\r\n                              â³ Active\r\n                            </div>\r\n                          )}\r\n                        </div>\r\n                      </div>\r\n\r\n                      {/* Session Details Grid */}\r\n                      <div style={{\r\n                        display: 'grid',\r\n                        gridTemplateColumns: 'repeat(auto-fit, minmax(150px, 1fr))',\r\n                        gap: '16px',\r\n                        marginBottom: '20px',\r\n                        padding: '16px',\r\n                        backgroundColor: '#f9fafb',\r\n                        borderRadius: '6px'\r\n                      }}>\r\n                        <div>\r\n                          <p style={{ margin: '0 0 4px 0', fontSize: '12px', color: '#6b7280', fontWeight: '600' }}>Started</p>\r\n                          <p style={{ margin: '0', fontSize: '14px', fontWeight: '500', color: '#1f2937' }}>\r\n                            {startTime.toLocaleTimeString('en-US', { hour: '2-digit', minute: '2-digit' })}\r\n                          </p>\r\n                        </div>\r\n                        <div>\r\n                          <p style={{ margin: '0 0 4px 0', fontSize: '12px', color: '#6b7280', fontWeight: '600' }}>Expires In</p>\r\n                          <p style={{ margin: '0', fontSize: '14px', fontWeight: '500', color: '#1f2937' }}>\r\n                            {timeRemaining}m remaining\r\n                          </p>\r\n                        </div>\r\n                        <div>\r\n                          <p style={{ margin: '0 0 4px 0', fontSize: '12px', color: '#6b7280', fontWeight: '600' }}>Status</p>\r\n                          <p style={{ margin: '0', fontSize: '14px', fontWeight: '500', color: '#1f2937' }}>\r\n                            {!isSubmitted ? `Will mark as ${status.toUpperCase()}` : `Marked as ${isSubmitted.toUpperCase()}`}\r\n                          </p>\r\n                        </div>\r\n                      </div>\r\n\r\n                      {/* Conflict Warning Box */}\r\n                      {hasConflict && (\r\n                        <div style={{\r\n                          padding: '12px',\r\n                          backgroundColor: '#fef3c7',\r\n                          borderRadius: '6px',\r\n                          marginBottom: '16px',\r\n                          borderLeft: '3px solid #f59e0b'\r\n                        }}>\r\n                          <p style={{ margin: '0', fontSize: '13px', color: '#92400e' }}>\r\n                            <strong>âš ï¸ Time Conflict:</strong> You've already marked attendance for {conflictingSession.classes?.courses?.course_code} ({conflictingSession.start_time}-{conflictingSession.end_time}). These sessions overlap. You can only mark one overlapping session.\r\n                          </p>\r\n                        </div>\r\n                      )}\r\n\r\n                      {/* Info Box */}\r\n                      {!isSubmitted && !hasConflict && (\r\n                        <div style={{\r\n                          padding: '12px',\r\n                          backgroundColor: '#eff6ff',\r\n                          borderRadius: '6px',\r\n                          marginBottom: '16px',\r\n                          borderLeft: '3px solid #3b82f6'\r\n                        }}>\r\n                          <p style={{ margin: '0', fontSize: '13px', color: '#1e40af' }}>\r\n                            <strong>âš ï¸ Note:</strong> You can mark attendance only ONCE per session. You will be marked as {status.toUpperCase()} based on the current time. Submit before session ends!\r\n                          </p>\r\n                        </div>\r\n                      )}\r\n\r\n                      {/* Already Submitted Info Box */}\r\n                      {isSubmitted && (\r\n                        <div style={{\r\n                          padding: '12px',\r\n                          backgroundColor: '#d1fae5',\r\n                          borderRadius: '6px',\r\n                          marginBottom: '16px',\r\n                          borderLeft: '3px solid #10b981'\r\n                        }}>\r\n                          <p style={{ margin: '0', fontSize: '13px', color: '#065f46' }}>\r\n                            <strong>âœ… Already Marked:</strong> You submitted attendance as {isSubmitted.toUpperCase()}. You cannot mark again for this session.\r\n                          </p>\r\n                        </div>\r\n                      )}\r\n\r\n                      {/* Action Button */}\r\n                      <button\r\n                        onClick={() => handleMarkAttendance(session.id)}\r\n                        disabled={isSubmitted || isMarking || hasConflict}\r\n                        style={{\r\n                          width: '100%',\r\n                          padding: '12px 16px',\r\n                          backgroundColor: isSubmitted || hasConflict ? '#d1d5db' : '#3b82f6',\r\n                          color: 'white',\r\n                          border: 'none',\r\n                          borderRadius: '6px',\r\n                          fontSize: '15px',\r\n                          fontWeight: '600',\r\n                          cursor: isSubmitted || isMarking || hasConflict ? 'not-allowed' : 'pointer',\r\n                          opacity: isSubmitted || isMarking || hasConflict ? 0.6 : 1,\r\n                          transition: 'background-color 0.2s'\r\n                        }}\r\n                        onMouseEnter={(e) => {\r\n                          if (!isSubmitted && !isMarking && !hasConflict) {\r\n                            e.target.style.backgroundColor = '#2563eb';\r\n                          }\r\n                        }}\r\n                        onMouseLeave={(e) => {\r\n                          if (!isSubmitted && !isMarking && !hasConflict) {\r\n                            e.target.style.backgroundColor = '#3b82f6';\r\n                          }\r\n                        }}\r\n                        title={hasConflict ? 'Disabled due to time conflict with another marked session' : ''}\r\n                      >\r\n                        {isMarking ? 'â³ Submitting...' : isSubmitted ? `âœ“ MARKED ALREADY (${isSubmitted.toUpperCase()})` : hasConflict ? `â›” BLOCKED (Time Conflict)` : `âœ… Mark ${status.toUpperCase()}`}\r\n                      </button>\r\n                    </div>\r\n                  </Card>\r\n                );\r\n              })}\r\n            </div>\r\n          </div>\r\n        )}\r\n\r\n        {/* How It Works Section */}\r\n        <Card style={{ boxShadow: '0 1px 3px rgba(0,0,0,0.1)', marginTop: '32px' }}>\r\n          <div style={{ padding: '24px' }}>\r\n            <h2 style={{ margin: '0 0 24px 0', fontSize: '18px', fontWeight: '700', color: '#1f2937' }}>\r\n              ðŸ“‹ How Attendance Works\r\n            </h2>\r\n\r\n            <div style={{\r\n              display: 'grid',\r\n              gridTemplateColumns: 'repeat(auto-fit, minmax(300px, 1fr))',\r\n              gap: '20px'\r\n            }}>\r\n              {[\r\n                {\r\n                  step: '1',\r\n                  title: 'Instructor Starts Session',\r\n                  desc: 'Your instructor creates an attendance session in their dashboard',\r\n                  icon: 'ðŸ‘¨â€ðŸ«'\r\n                },\r\n                {\r\n                  step: '2',\r\n                  title: 'Session Appears Here',\r\n                  desc: 'Active sessions automatically show on this page in real-time',\r\n                  icon: 'ðŸ”„'\r\n                },\r\n                {\r\n                  step: '3',\r\n                  title: 'Submit Attendance',\r\n                  desc: 'Click the \"Mark\" button to submit your attendance',\r\n                  icon: 'ðŸ‘†'\r\n                },\r\n                {\r\n                  step: '4',\r\n                  title: 'Automatic Status',\r\n                  desc: 'PRESENT if within 15 min, otherwise LATE',\r\n                  icon: 'â±ï¸'\r\n                },\r\n                {\r\n                  step: '5',\r\n                  title: 'Immutable Record',\r\n                  desc: 'Once submitted, your attendance record cannot be changed',\r\n                  icon: 'ðŸ”’'\r\n                },\r\n                {\r\n                  step: '6',\r\n                  title: 'Check Your History',\r\n                  desc: 'View all your attendance records in your history page',\r\n                  icon: 'ðŸ“Š'\r\n                }\r\n              ].map((item, idx) => (\r\n                <div\r\n                  key={idx}\r\n                  style={{\r\n                    padding: '20px',\r\n                    backgroundColor: '#f9fafb',\r\n                    borderRadius: '8px',\r\n                    border: '1px solid #e5e7eb'\r\n                  }}\r\n                >\r\n                  <div style={{\r\n                    display: 'flex',\r\n                    alignItems: 'center',\r\n                    marginBottom: '12px',\r\n                    gap: '12px'\r\n                  }}>\r\n                    <div style={{\r\n                      width: '32px',\r\n                      height: '32px',\r\n                      borderRadius: '50%',\r\n                      backgroundColor: '#3b82f6',\r\n                      color: 'white',\r\n                      display: 'flex',\r\n                      alignItems: 'center',\r\n                      justifyContent: 'center',\r\n                      fontWeight: '700',\r\n                      fontSize: '14px'\r\n                    }}>\r\n                      {item.step}\r\n                    </div>\r\n                    <div style={{ fontSize: '20px' }}>{item.icon}</div>\r\n                  </div>\r\n                  <h3 style={{ margin: '0 0 6px 0', fontSize: '14px', fontWeight: '700', color: '#1f2937' }}>\r\n                    {item.title}\r\n                  </h3>\r\n                  <p style={{ margin: '0', fontSize: '13px', color: '#6b7280', lineHeight: '1.5' }}>\r\n                    {item.desc}\r\n                  </p>\r\n                </div>\r\n              ))}\r\n            </div>\r\n          </div>\r\n        </Card>\r\n      </div>\r\n    </Layout>\r\n  );\r\n};\r\n\r\nexport default StudentMarkAttendance;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}