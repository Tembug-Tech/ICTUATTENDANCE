{"ast":null,"code":"import _objectSpread from\"C:/Users/PFI/Desktop/ictuattennce_portal/ATTENDANCE/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import React,{useState,useEffect}from'react';import{useNavigate}from'react-router-dom';import{useAuth}from'../contexts/AuthContext';import{supabase}from'../supabase/supabase';import{delegateFetchAssignedClasses,delegateFetchSessionAttendance,delegateFetchStats,adminFetchAllCourses}from'../utils/dashboardQueries';import{createSessionWithValidation,checkOverlappingSessions}from'../utils/sessionLifecycle';import{useSessionLifecycle,useSessionCountdown}from'../hooks/useSessionLifecycle';import{User,LayoutDashboard,GraduationCap,PlayCircle,Calendar,History,CheckCircle,Sun,Moon,LogOut,ChevronLeft,ChevronRight,Plus,CalendarDays,Radio,CalendarX,X}from'lucide-react';import{jsx as _jsx,jsxs as _jsxs,Fragment as _Fragment}from\"react/jsx-runtime\";const DelegateDashboard=()=>{var _currentUser$email;const{currentUser,userRole,loading,logout}=useAuth();const navigate=useNavigate();// Helper functions for timezone conversion (Africa/Douala - UTC+1)\nconst cameroonToUTC=(date,hour,min)=>{const cameroonTime=new Date(date);cameroonTime.setHours(hour,min,0,0);return new Date(cameroonTime.getTime()-1*60*60*1000);};const[sidebarOpen,setSidebarOpen]=useState(true);const[darkMode,setDarkMode]=useState(()=>{// Check localStorage for saved preference, default to false\nconst saved=localStorage.getItem('delegateDarkMode');return saved?JSON.parse(saved):false;});const[activeTab,setActiveTab]=useState('overview');// Data states\nconst[assignedClasses,setAssignedClasses]=useState([]);const[selectedSession,setSelectedSession]=useState(null);const[sessionAttendance,setSessionAttendance]=useState([]);const[stats,setStats]=useState({activeSessions:0,totalSessions:0,totalMarked:0,todaySessions:0,error:null});// UI states\nconst[loadingData,setLoadingData]=useState(true);const[showCreateModal,setShowCreateModal]=useState(false);const[creating,setCreating]=useState(false);const[availableCourses,setAvailableCourses]=useState([]);const[createForm,setCreateForm]=useState({courseId:'',date:new Date().toISOString().split('T')[0],startTime:'08:00',endTime:'10:00'});const[createError,setCreateError]=useState(null);const[successMessage,setSuccessMessage]=useState(null);// Use session lifecycle hook for real-time session management\nconst{sessions,activeSessions,upcomingSessions,pastSessions,loading:sessionsLoading,error:sessionsError,refresh:refreshSessions,getSessionTimeRemaining}=useSessionLifecycle(currentUser===null||currentUser===void 0?void 0:currentUser.id,'delegate');// Apply dark mode class to document\nuseEffect(()=>{if(darkMode){document.documentElement.classList.add('dark');}else{document.documentElement.classList.remove('dark');}// Save preference to localStorage\nlocalStorage.setItem('delegateDarkMode',JSON.stringify(darkMode));},[darkMode]);// Auth check\nuseEffect(()=>{if(!loading&&(!currentUser||userRole!=='delegate')){navigate('/delegate');return;}if(!loading&&currentUser&&userRole==='delegate'){fetchAllData();const interval=setInterval(fetchAllData,30000);return()=>clearInterval(interval);}},[currentUser,userRole,loading,navigate]);// Clear success message after 5 seconds\nuseEffect(()=>{if(successMessage){const timer=setTimeout(()=>setSuccessMessage(null),5000);return()=>clearTimeout(timer);}},[successMessage]);// Load available courses when modal opens\nuseEffect(()=>{if(showCreateModal&&availableCourses.length===0){const loadCourses=async()=>{const{courses,error}=await adminFetchAllCourses();if(!error){setAvailableCourses(courses);}};loadCourses();}},[showCreateModal,availableCourses.length]);const fetchAllData=async()=>{try{setLoadingData(true);const[classesData,statsData]=await Promise.all([delegateFetchAssignedClasses(currentUser.id),delegateFetchStats(currentUser.id)]);setAssignedClasses(classesData.classes);setStats(statsData);}catch(error){console.error('Error fetching delegate data:',error);}finally{setLoadingData(false);}};const handleCreateSession=async e=>{e.preventDefault();setCreateError(null);if(!createForm.courseId){setCreateError('Please select a course');return;}// Validate times\nif(createForm.startTime>=createForm.endTime){setCreateError('End time must be after start time');return;}// Validate start time is not in the past\nconst now=new Date();const sessionDateTime=new Date(createForm.date);const[startHour,startMin]=createForm.startTime.split(':').map(Number);sessionDateTime.setHours(startHour,startMin,0,0);// Convert to UTC for comparison\nconst sessionDateTimeUTC=new Date(sessionDateTime.getTime()-1*60*60*1000);// Cameroon to UTC\nconst nowUTC=new Date(now.getTime()-now.getTimezoneOffset()*60*1000);if(sessionDateTimeUTC<=nowUTC){setCreateError('Session start time cannot be in the past');return;}try{setCreating(true);// First, find or create the class for this course and delegate\nlet{data:existingClass,error:classError}=await supabase.from('classes').select('id').eq('course_id',createForm.courseId).eq('delegate_id',currentUser.id).single();let classId;if(classError&&classError.code==='PGRST116'){// No rows returned\n// Create new class\nconst{data:course,error:courseError}=await supabase.from('courses').select('course_title').eq('id',createForm.courseId).single();if(courseError)throw courseError;const{data:newClass,error:createClassError}=await supabase.from('classes').insert({class_name:course.course_title,course_id:createForm.courseId,delegate_id:currentUser.id}).select('id').single();if(createClassError)throw createClassError;classId=newClass.id;}else if(classError){throw classError;}else{classId=existingClass.id;}// Check for overlapping sessions\nconst{hasOverlap,overlappingSessions}=await checkOverlappingSessions(classId,createForm.date,createForm.startTime,createForm.endTime);if(hasOverlap){setCreateError(\"Session overlaps with existing session(s) at \".concat(overlappingSessions.map(s=>s.start_time).join(', ')));return;}// Create session\nconst{session,error}=await createSessionWithValidation(currentUser.id,classId,createForm.date,createForm.startTime,createForm.endTime);if(error){setCreateError(error);return;}setSuccessMessage('Session created successfully!');setShowCreateModal(false);setCreateForm({courseId:'',date:new Date().toISOString().split('T')[0],startTime:'08:00',endTime:'10:00'});fetchAllData();refreshSessions();}catch(error){setCreateError(error.message);}finally{setCreating(false);}};const handleViewAttendance=async sessionId=>{try{const{attendance,error}=await delegateFetchSessionAttendance(sessionId);if(error){alert('Error fetching attendance: '+error);return;}const session=[...activeSessions,...upcomingSessions,...pastSessions].find(s=>s.id===sessionId);setSelectedSession(session);setSessionAttendance(attendance);setActiveTab('attendance');}catch(error){alert('Error: '+error.message);}};const handleLogout=async()=>{try{await logout();navigate('/login');}catch(error){console.error('Logout error:',error);}};const downloadAttendanceCSV=()=>{if(!selectedSession||!sessionAttendance.length){alert('No attendance data to download');return;}// Create CSV content\nconst headers=['Student Name','Matricule','Timestamp','Status'];const csvContent=[headers.join(','),...sessionAttendance.map(record=>[\"\\\"\".concat(record.studentName,\"\\\"\"),\"\\\"\".concat(record.studentMatricule,\"\\\"\"),\"\\\"\".concat(record.timestamp,\"\\\"\"),\"\\\"\".concat(record.status==='present'?'Present':record.status==='late'?'Late':'Absent',\"\\\"\")].join(','))].join('\\n');// Create and download file\nconst blob=new Blob([csvContent],{type:'text/csv;charset=utf-8;'});const link=document.createElement('a');const url=URL.createObjectURL(blob);link.setAttribute('href',url);link.setAttribute('download',\"\".concat(selectedSession.courseTitle,\"_\").concat(selectedSession.date,\"_attendance.csv\"));link.style.visibility='hidden';document.body.appendChild(link);link.click();document.body.removeChild(link);};const getStatusBadgeClass=session=>{const now=new Date();const sessionDate=session.session_date;const[startHour,startMin]=session.start_time.split(':').map(Number);const[endHour,endMin]=session.end_time.split(':').map(Number);const startDateTimeUTC=cameroonToUTC(sessionDate,startHour,startMin);const endDateTimeUTC=cameroonToUTC(sessionDate,endHour,endMin);const nowUTC=new Date(now.getTime()-now.getTimezoneOffset()*60*1000);if(nowUTC<startDateTimeUTC){return'bg-blue-100 dark:bg-blue-900/30 text-blue-700 dark:text-blue-400';}else if(nowUTC>=startDateTimeUTC&&nowUTC<=endDateTimeUTC){return'bg-green-100 dark:bg-green-900/30 text-green-700 dark:text-green-400';}else{return'bg-gray-100 dark:bg-gray-700 text-gray-700 dark:text-gray-400';}};const getStatusLabel=session=>{const now=new Date();const sessionDate=session.session_date;const[startHour,startMin]=session.start_time.split(':').map(Number);const[endHour,endMin]=session.end_time.split(':').map(Number);const startDateTimeUTC=cameroonToUTC(sessionDate,startHour,startMin);const endDateTimeUTC=cameroonToUTC(sessionDate,endHour,endMin);const nowUTC=new Date(now.getTime()-now.getTimezoneOffset()*60*1000);if(nowUTC<startDateTimeUTC){return'Scheduled';}else if(nowUTC>=startDateTimeUTC&&nowUTC<=endDateTimeUTC){return'Open';}else{return'Closed';}};if(loading){return/*#__PURE__*/_jsx(\"div\",{className:\"flex items-center justify-center h-screen bg-gradient-to-br from-gray-50 to-gray-100 dark:from-gray-900 dark:to-gray-800\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"text-center\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"inline-block animate-spin rounded-full h-12 w-12 border-4 border-blue-300 border-t-blue-600 mb-4\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-gray-700 dark:text-gray-300 font-medium\",children:\"Loading Dashboard...\"})]})});}if(!currentUser||userRole!=='delegate'){return null;}const navItems=[{id:'overview',label:'Overview',icon:LayoutDashboard},{id:'classes',label:'My Classes',icon:GraduationCap},{id:'active',label:'Active Sessions',icon:PlayCircle,badge:activeSessions.length},{id:'scheduled',label:'Scheduled',icon:Calendar,badge:upcomingSessions.length},{id:'history',label:'History',icon:History},{id:'attendance',label:'Attendance',icon:CheckCircle}];return/*#__PURE__*/_jsxs(\"div\",{className:\"flex h-screen overflow-hidden \".concat(darkMode?'dark':''),children:[/*#__PURE__*/_jsxs(\"aside\",{className:\"\".concat(sidebarOpen?'w-64':'w-20',\" bg-white dark:bg-gray-900 border-r border-gray-200 dark:border-gray-800 flex flex-col transition-all duration-300 shadow-lg\"),children:[/*#__PURE__*/_jsx(\"div\",{className:\"p-6 border-b border-gray-200 dark:border-gray-800\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center gap-3\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"w-10 h-10 rounded-lg bg-gradient-to-br from-blue-600 to-blue-700 flex items-center justify-center text-white font-bold\",children:/*#__PURE__*/_jsx(User,{className:\"w-6 h-6\"})}),sidebarOpen&&/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"p\",{className:\"font-bold text-sm text-gray-900 dark:text-white\",children:\"Delegate\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-xs text-gray-500 dark:text-gray-400\",children:\"Portal\"})]})]})}),/*#__PURE__*/_jsx(\"nav\",{className:\"flex-1 overflow-y-auto px-3 py-6 space-y-2\",children:navItems.map(item=>/*#__PURE__*/_jsxs(\"button\",{onClick:()=>setActiveTab(item.id),className:\"w-full flex items-center gap-3 px-4 py-3 rounded-lg transition-all \".concat(activeTab===item.id?'bg-blue-50 dark:bg-blue-900/30 text-blue-600 dark:text-blue-400 font-semibold':'text-gray-700 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-800'),children:[/*#__PURE__*/_jsx(item.icon,{className:\"w-5 h-5\"}),sidebarOpen&&/*#__PURE__*/_jsx(\"span\",{className:\"text-sm flex-1 text-left\",children:item.label}),sidebarOpen&&item.badge>0&&/*#__PURE__*/_jsx(\"span\",{className:\"px-2 py-0.5 bg-blue-500 text-white text-xs rounded-full\",children:item.badge})]},item.id))}),/*#__PURE__*/_jsxs(\"div\",{className:\"p-3 border-t border-gray-200 dark:border-gray-800 space-y-2\",children:[/*#__PURE__*/_jsxs(\"button\",{onClick:()=>setDarkMode(!darkMode),className:\"w-full flex items-center gap-3 px-4 py-3 rounded-lg text-gray-700 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-800 transition-all\",children:[darkMode?/*#__PURE__*/_jsx(Sun,{className:\"w-5 h-5\"}):/*#__PURE__*/_jsx(Moon,{className:\"w-5 h-5\"}),sidebarOpen&&/*#__PURE__*/_jsx(\"span\",{className:\"text-sm\",children:\"Theme\"})]}),/*#__PURE__*/_jsxs(\"button\",{onClick:handleLogout,className:\"w-full flex items-center gap-3 px-4 py-3 rounded-lg text-red-600 dark:text-red-400 hover:bg-red-50 dark:hover:bg-red-900/10 transition-all\",children:[/*#__PURE__*/_jsx(LogOut,{className:\"w-5 h-5\"}),sidebarOpen&&/*#__PURE__*/_jsx(\"span\",{className:\"text-sm font-semibold\",children:\"Logout\"})]})]}),/*#__PURE__*/_jsx(\"div\",{className:\"p-3 border-t border-gray-200 dark:border-gray-800\",children:/*#__PURE__*/_jsx(\"button\",{onClick:()=>setSidebarOpen(!sidebarOpen),className:\"w-full flex items-center justify-center py-2 rounded-lg text-gray-500 hover:bg-gray-100 dark:hover:bg-gray-800 transition-all\",children:sidebarOpen?/*#__PURE__*/_jsx(ChevronLeft,{className:\"w-5 h-5\"}):/*#__PURE__*/_jsx(ChevronRight,{className:\"w-5 h-5\"})})})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex-1 flex flex-col overflow-hidden bg-gray-50 dark:bg-gray-950\",children:[/*#__PURE__*/_jsx(\"header\",{className:\"sticky top-0 z-40 bg-white dark:bg-gray-900 border-b border-gray-200 dark:border-gray-800 shadow-sm\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"px-8 py-4 flex items-center justify-between\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h1\",{className:\"text-2xl font-bold text-gray-900 dark:text-white\",children:\"Attendance Management Portal\"}),/*#__PURE__*/_jsxs(\"p\",{className:\"text-sm text-gray-500 dark:text-gray-400\",children:[\"Welcome, \",(currentUser===null||currentUser===void 0?void 0:currentUser.name)||(currentUser===null||currentUser===void 0?void 0:currentUser.email)]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center gap-4\",children:[/*#__PURE__*/_jsxs(\"button\",{className:\"px-4 py-2 bg-blue-600 text-white rounded-lg text-sm font-semibold hover:bg-blue-700 transition-colors flex items-center gap-2\",onClick:()=>setShowCreateModal(true),children:[/*#__PURE__*/_jsx(Plus,{className:\"w-4 h-4\"}),\"New Session\"]}),/*#__PURE__*/_jsx(\"div\",{className:\"w-10 h-10 rounded-full bg-gradient-to-br from-blue-600 to-blue-700 flex items-center justify-center text-white font-bold cursor-pointer\",children:currentUser===null||currentUser===void 0?void 0:(_currentUser$email=currentUser.email)===null||_currentUser$email===void 0?void 0:_currentUser$email.charAt(0).toUpperCase()})]})]})}),/*#__PURE__*/_jsx(\"main\",{className:\"flex-1 overflow-y-auto\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"p-8 max-w-7xl mx-auto\",children:[successMessage&&/*#__PURE__*/_jsx(\"div\",{className:\"mb-6 p-4 bg-green-50 dark:bg-green-900/20 border border-green-200 dark:border-green-800 rounded-lg\",children:/*#__PURE__*/_jsx(\"p\",{className:\"text-green-700 dark:text-green-400 font-medium\",children:successMessage})}),sessionsError&&/*#__PURE__*/_jsx(\"div\",{className:\"mb-6 p-4 bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-lg\",children:/*#__PURE__*/_jsx(\"p\",{className:\"text-red-700 dark:text-red-400 font-medium\",children:sessionsError})}),activeTab==='overview'&&/*#__PURE__*/_jsxs(\"div\",{className:\"space-y-8\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"grid grid-cols-1 md:grid-cols-4 gap-4\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white dark:bg-gray-900 rounded-xl p-6 shadow-sm border border-gray-200 dark:border-gray-800 hover:shadow-lg transition-shadow\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-start justify-between mb-4\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"p\",{className:\"text-sm text-gray-600 dark:text-gray-400 font-medium mb-1\",children:\"Active Sessions\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-3xl font-bold text-gray-900 dark:text-white\",children:activeSessions.length})]}),/*#__PURE__*/_jsx(\"div\",{className:\"p-3 bg-green-100 dark:bg-green-900/30 rounded-lg\",children:/*#__PURE__*/_jsx(PlayCircle,{className:\"w-6 h-6 text-green-600 dark:text-green-400\"})})]}),/*#__PURE__*/_jsx(\"p\",{className:\"text-xs text-gray-500 dark:text-gray-400\",children:\"Currently open for attendance\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white dark:bg-gray-900 rounded-xl p-6 shadow-sm border border-gray-200 dark:border-gray-800 hover:shadow-lg transition-shadow\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-start justify-between mb-4\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"p\",{className:\"text-sm text-gray-600 dark:text-gray-400 font-medium mb-1\",children:\"Scheduled\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-3xl font-bold text-gray-900 dark:text-white\",children:upcomingSessions.length})]}),/*#__PURE__*/_jsx(\"div\",{className:\"p-3 bg-blue-100 dark:bg-blue-900/30 rounded-lg\",children:/*#__PURE__*/_jsx(Calendar,{className:\"w-6 h-6 text-blue-600 dark:text-blue-400\"})})]}),/*#__PURE__*/_jsx(\"p\",{className:\"text-xs text-gray-500 dark:text-gray-400\",children:\"Upcoming sessions\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white dark:bg-gray-900 rounded-xl p-6 shadow-sm border border-gray-200 dark:border-gray-800 hover:shadow-lg transition-shadow\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-start justify-between mb-4\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"p\",{className:\"text-sm text-gray-600 dark:text-gray-400 font-medium mb-1\",children:\"Total Sessions\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-3xl font-bold text-gray-900 dark:text-white\",children:stats.totalSessions})]}),/*#__PURE__*/_jsx(\"div\",{className:\"p-3 bg-indigo-100 dark:bg-indigo-900/30 rounded-lg\",children:/*#__PURE__*/_jsx(CalendarDays,{className:\"w-6 h-6 text-indigo-600 dark:text-indigo-400\"})})]}),/*#__PURE__*/_jsx(\"p\",{className:\"text-xs text-gray-500 dark:text-gray-400\",children:\"All time\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white dark:bg-gray-900 rounded-xl p-6 shadow-sm border border-gray-200 dark:border-gray-800 hover:shadow-lg transition-shadow\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-start justify-between mb-4\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"p\",{className:\"text-sm text-gray-600 dark:text-gray-400 font-medium mb-1\",children:\"Attendance Marked\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-3xl font-bold text-gray-900 dark:text-white\",children:stats.totalMarked})]}),/*#__PURE__*/_jsx(\"div\",{className:\"p-3 bg-amber-100 dark:bg-amber-900/30 rounded-lg\",children:/*#__PURE__*/_jsx(CheckCircle,{className:\"w-6 h-6 text-amber-600 dark:text-amber-400\"})})]}),/*#__PURE__*/_jsx(\"p\",{className:\"text-xs text-gray-500 dark:text-gray-400\",children:\"Total records\"})]})]}),activeSessions.length>0&&/*#__PURE__*/_jsx(\"div\",{className:\"p-4 bg-green-50 dark:bg-green-900/20 border border-green-200 dark:border-green-800 rounded-xl\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center gap-3\",children:[/*#__PURE__*/_jsx(Radio,{className:\"w-6 h-6 text-green-600 dark:text-green-400 animate-pulse\"}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsxs(\"p\",{className:\"font-semibold text-green-900 dark:text-green-300\",children:[activeSessions.length,\" Session\",activeSessions.length>1?'s':'',\" Currently Active\"]}),/*#__PURE__*/_jsx(\"p\",{className:\"text-sm text-green-700 dark:text-green-400\",children:\"Students can mark attendance now. Sessions will auto-close at end time.\"})]})]})}),activeSessions.length>0&&/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white dark:bg-gray-900 rounded-xl p-6 shadow-sm border border-gray-200 dark:border-gray-800\",children:[/*#__PURE__*/_jsxs(\"h3\",{className:\"text-lg font-bold text-gray-900 dark:text-white mb-6 flex items-center gap-2\",children:[/*#__PURE__*/_jsx(PlayCircle,{className:\"w-5 h-5 text-green-600\"}),\"Active Sessions\"]}),/*#__PURE__*/_jsx(\"div\",{className:\"space-y-4\",children:activeSessions.map(session=>/*#__PURE__*/_jsx(SessionCard,{session:session,onViewAttendance:()=>handleViewAttendance(session.id),getTimeRemaining:getSessionTimeRemaining,getStatusBadgeClass:getStatusBadgeClass,getStatusLabel:getStatusLabel},session.id))})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white dark:bg-gray-900 rounded-xl p-6 shadow-sm border border-gray-200 dark:border-gray-800\",children:[/*#__PURE__*/_jsx(\"h3\",{className:\"text-lg font-bold text-gray-900 dark:text-white mb-6\",children:\"My Assigned Classes\"}),assignedClasses.length>0?/*#__PURE__*/_jsx(\"div\",{className:\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4\",children:assignedClasses.map(cls=>/*#__PURE__*/_jsxs(\"div\",{className:\"p-4 rounded-lg border border-gray-200 dark:border-gray-700 hover:shadow-lg transition-shadow\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-start justify-between mb-3\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"p\",{className:\"font-semibold text-gray-900 dark:text-white\",children:cls.courseTitle}),/*#__PURE__*/_jsx(\"p\",{className:\"text-xs text-gray-500 dark:text-gray-400\",children:cls.courseCode})]}),/*#__PURE__*/_jsx(\"span\",{className:\"px-2 py-1 rounded-full text-xs font-semibold \".concat(cls.hasActiveSession?'bg-green-100 dark:bg-green-900/30 text-green-700 dark:text-green-400':'bg-gray-100 dark:bg-gray-700 text-gray-700 dark:text-gray-400'),children:cls.sessionToday})]}),/*#__PURE__*/_jsx(\"p\",{className:\"text-sm text-gray-600 dark:text-gray-400 mb-4\",children:cls.className}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>{setCreateForm(prev=>_objectSpread(_objectSpread({},prev),{},{classId:cls.id}));setShowCreateModal(true);},className:\"w-full px-3 py-2 bg-blue-100 dark:bg-blue-900/30 text-blue-700 dark:text-blue-400 rounded-lg text-sm font-semibold hover:bg-blue-200 dark:hover:bg-blue-900/50 transition-colors\",children:\"Open Session\"})]},cls.id))}):/*#__PURE__*/_jsx(\"div\",{className:\"text-center py-12\",children:/*#__PURE__*/_jsx(\"p\",{className:\"text-gray-500 dark:text-gray-400\",children:\"No classes assigned yet\"})})]})]}),activeTab==='classes'&&/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h2\",{className:\"text-2xl font-bold text-gray-900 dark:text-white mb-6\",children:\"My Classes\"}),assignedClasses.length>0?/*#__PURE__*/_jsx(\"div\",{className:\"grid grid-cols-1 lg:grid-cols-2 gap-6\",children:assignedClasses.map(cls=>/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white dark:bg-gray-900 rounded-xl p-6 shadow-sm border border-gray-200 dark:border-gray-800\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-start justify-between mb-4\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h3\",{className:\"text-lg font-bold text-gray-900 dark:text-white\",children:cls.courseTitle}),/*#__PURE__*/_jsx(\"p\",{className:\"text-sm text-gray-600 dark:text-gray-400\",children:cls.courseCode})]}),/*#__PURE__*/_jsx(\"span\",{className:\"px-3 py-1 bg-blue-100 dark:bg-blue-900/30 text-blue-700 dark:text-blue-400 rounded-full text-xs font-semibold\",children:cls.program})]}),/*#__PURE__*/_jsx(\"p\",{className:\"text-gray-700 dark:text-gray-300 mb-4\",children:cls.className}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>{setCreateForm(prev=>_objectSpread(_objectSpread({},prev),{},{classId:cls.id}));setShowCreateModal(true);},className:\"w-full px-4 py-2 bg-blue-600 text-white rounded-lg text-sm font-semibold hover:bg-blue-700 transition-colors\",children:\"Create Session\"})]},cls.id))}):/*#__PURE__*/_jsx(\"div\",{className:\"bg-white dark:bg-gray-900 rounded-xl p-12 text-center shadow-sm border border-gray-200 dark:border-gray-800\",children:/*#__PURE__*/_jsx(\"p\",{className:\"text-gray-600 dark:text-gray-400\",children:\"No classes assigned\"})})]}),activeTab==='active'&&/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsxs(\"h2\",{className:\"text-2xl font-bold text-gray-900 dark:text-white mb-6 flex items-center gap-2\",children:[/*#__PURE__*/_jsx(PlayCircle,{className:\"w-5 h-5 text-green-600\"}),\"Active Sessions\"]}),activeSessions.length>0?/*#__PURE__*/_jsx(\"div\",{className:\"space-y-4\",children:activeSessions.map(session=>/*#__PURE__*/_jsx(SessionCard,{session:session,onViewAttendance:()=>handleViewAttendance(session.id),getTimeRemaining:getSessionTimeRemaining,getStatusBadgeClass:getStatusBadgeClass,getStatusLabel:getStatusLabel,expanded:true},session.id))}):/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white dark:bg-gray-900 rounded-xl p-12 text-center shadow-sm border border-gray-200 dark:border-gray-800\",children:[/*#__PURE__*/_jsx(CalendarX,{className:\"w-16 h-16 text-gray-300 dark:text-gray-600 mb-4\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-gray-600 dark:text-gray-400\",children:\"No active sessions\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-sm text-gray-500 dark:text-gray-500 mt-2\",children:\"Sessions will appear here when they start\"})]})]}),activeTab==='scheduled'&&/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsxs(\"h2\",{className:\"text-2xl font-bold text-gray-900 dark:text-white mb-6 flex items-center gap-2\",children:[/*#__PURE__*/_jsx(Calendar,{className:\"w-5 h-5 text-blue-600\"}),\"Scheduled Sessions\"]}),upcomingSessions.length>0?/*#__PURE__*/_jsx(\"div\",{className:\"space-y-4\",children:upcomingSessions.map(session=>{var _getSessionTimeRemain;return/*#__PURE__*/_jsx(\"div\",{className:\"bg-white dark:bg-gray-900 rounded-xl p-6 shadow-sm border border-gray-200 dark:border-gray-800\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center justify-between\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"p\",{className:\"font-semibold text-gray-900 dark:text-white\",children:session.courseTitle}),/*#__PURE__*/_jsx(\"p\",{className:\"text-sm text-gray-600 dark:text-gray-400\",children:session.className}),/*#__PURE__*/_jsxs(\"p\",{className:\"text-xs text-gray-500 dark:text-gray-500 mt-1\",children:[session.date,\" \\u2022 \",session.startTime,\" - \",session.endTime]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"text-right\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"px-3 py-1 rounded-full text-xs font-semibold \".concat(getStatusBadgeClass(session)),children:getStatusLabel(session)}),/*#__PURE__*/_jsx(\"p\",{className:\"text-xs text-gray-500 dark:text-gray-400 mt-2\",children:(_getSessionTimeRemain=getSessionTimeRemaining(session))===null||_getSessionTimeRemain===void 0?void 0:_getSessionTimeRemain.formatted})]})]})},session.id);})}):/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white dark:bg-gray-900 rounded-xl p-12 text-center shadow-sm border border-gray-200 dark:border-gray-800\",children:[/*#__PURE__*/_jsx(Calendar,{className:\"w-16 h-16 text-gray-300 dark:text-gray-600 mb-4\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-gray-600 dark:text-gray-400\",children:\"No scheduled sessions\"}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>setShowCreateModal(true),className:\"mt-4 px-4 py-2 bg-blue-600 text-white rounded-lg text-sm font-semibold hover:bg-blue-700 transition-colors\",children:\"Create New Session\"})]})]}),activeTab==='history'&&/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsxs(\"h2\",{className:\"text-2xl font-bold text-gray-900 dark:text-white mb-6 flex items-center gap-2\",children:[/*#__PURE__*/_jsx(History,{className:\"w-5 h-5 text-gray-600\"}),\"Session History\"]}),pastSessions.length>0?/*#__PURE__*/_jsx(\"div\",{className:\"overflow-x-auto bg-white dark:bg-gray-900 rounded-xl shadow-sm border border-gray-200 dark:border-gray-800\",children:/*#__PURE__*/_jsxs(\"table\",{className:\"w-full text-sm\",children:[/*#__PURE__*/_jsx(\"thead\",{children:/*#__PURE__*/_jsxs(\"tr\",{className:\"border-b border-gray-200 dark:border-gray-700\",children:[/*#__PURE__*/_jsx(\"th\",{className:\"px-4 py-3 text-left font-semibold text-gray-900 dark:text-white\",children:\"Course\"}),/*#__PURE__*/_jsx(\"th\",{className:\"px-4 py-3 text-left font-semibold text-gray-900 dark:text-white\",children:\"Class\"}),/*#__PURE__*/_jsx(\"th\",{className:\"px-4 py-3 text-left font-semibold text-gray-900 dark:text-white\",children:\"Date\"}),/*#__PURE__*/_jsx(\"th\",{className:\"px-4 py-3 text-left font-semibold text-gray-900 dark:text-white\",children:\"Time\"}),/*#__PURE__*/_jsx(\"th\",{className:\"px-4 py-3 text-left font-semibold text-gray-900 dark:text-white\",children:\"Attendance\"}),/*#__PURE__*/_jsx(\"th\",{className:\"px-4 py-3 text-left font-semibold text-gray-900 dark:text-white\",children:\"Status\"}),/*#__PURE__*/_jsx(\"th\",{className:\"px-4 py-3 text-left font-semibold text-gray-900 dark:text-white\",children:\"Action\"})]})}),/*#__PURE__*/_jsx(\"tbody\",{className:\"divide-y divide-gray-200 dark:divide-gray-700\",children:pastSessions.map(session=>/*#__PURE__*/_jsxs(\"tr\",{className:\"hover:bg-gray-50 dark:hover:bg-gray-800 transition-colors\",children:[/*#__PURE__*/_jsx(\"td\",{className:\"px-4 py-3 text-gray-900 dark:text-white font-medium\",children:session.courseTitle}),/*#__PURE__*/_jsx(\"td\",{className:\"px-4 py-3 text-gray-700 dark:text-gray-300\",children:session.className}),/*#__PURE__*/_jsx(\"td\",{className:\"px-4 py-3 text-gray-700 dark:text-gray-300\",children:session.date}),/*#__PURE__*/_jsx(\"td\",{className:\"px-4 py-3 text-gray-700 dark:text-gray-300\",children:session.startTime}),/*#__PURE__*/_jsx(\"td\",{className:\"px-4 py-3 text-gray-700 dark:text-gray-300\",children:session.attendanceCount}),/*#__PURE__*/_jsx(\"td\",{className:\"px-4 py-3\",children:/*#__PURE__*/_jsx(\"span\",{className:\"px-3 py-1 rounded-full text-xs font-semibold \".concat(getStatusBadgeClass(session.status)),children:getStatusLabel(session.status)})}),/*#__PURE__*/_jsx(\"td\",{className:\"px-4 py-3\",children:/*#__PURE__*/_jsx(\"button\",{onClick:()=>handleViewAttendance(session.id),className:\"text-blue-600 dark:text-blue-400 hover:underline text-sm font-semibold\",children:\"View\"})})]},session.id))})]})}):/*#__PURE__*/_jsx(\"div\",{className:\"bg-white dark:bg-gray-900 rounded-xl p-12 text-center shadow-sm border border-gray-200 dark:border-gray-800\",children:/*#__PURE__*/_jsx(\"p\",{className:\"text-gray-600 dark:text-gray-400\",children:\"No session history yet\"})})]}),activeTab==='attendance'&&selectedSession&&/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsxs(\"div\",{className:\"mb-6 flex items-center justify-between\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h2\",{className:\"text-2xl font-bold text-gray-900 dark:text-white\",children:selectedSession.courseTitle}),/*#__PURE__*/_jsxs(\"p\",{className:\"text-sm text-gray-600 dark:text-gray-400\",children:[selectedSession.date,\" \\u2022 \",selectedSession.startTime]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex gap-3\",children:[/*#__PURE__*/_jsxs(\"button\",{onClick:downloadAttendanceCSV,className:\"px-4 py-2 bg-green-600 text-white rounded-lg text-sm font-semibold hover:bg-green-700 transition-colors flex items-center gap-2\",children:[/*#__PURE__*/_jsx(\"svg\",{className:\"w-4 h-4\",fill:\"none\",stroke:\"currentColor\",viewBox:\"0 0 24 24\",children:/*#__PURE__*/_jsx(\"path\",{strokeLinecap:\"round\",strokeLinejoin:\"round\",strokeWidth:2,d:\"M12 10v6m0 0l-3-3m3 3l3-3m2 8H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z\"})}),\"Download CSV\"]}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>setActiveTab('history'),className:\"px-4 py-2 border border-gray-300 dark:border-gray-600 text-gray-700 dark:text-gray-300 rounded-lg text-sm font-semibold hover:bg-gray-100 dark:hover:bg-gray-800 transition-colors\",children:\"Back to History\"})]})]}),sessionAttendance.length>0?/*#__PURE__*/_jsx(\"div\",{className:\"bg-white dark:bg-gray-900 rounded-xl shadow-sm border border-gray-200 dark:border-gray-800 overflow-hidden\",children:/*#__PURE__*/_jsxs(\"table\",{className:\"w-full text-sm\",children:[/*#__PURE__*/_jsx(\"thead\",{children:/*#__PURE__*/_jsxs(\"tr\",{className:\"border-b border-gray-200 dark:border-gray-700 bg-gray-50 dark:bg-gray-800\",children:[/*#__PURE__*/_jsx(\"th\",{className:\"px-4 py-3 text-left font-semibold text-gray-900 dark:text-white\",children:\"Student Name\"}),/*#__PURE__*/_jsx(\"th\",{className:\"px-4 py-3 text-left font-semibold text-gray-900 dark:text-white\",children:\"Matricule\"}),/*#__PURE__*/_jsx(\"th\",{className:\"px-4 py-3 text-left font-semibold text-gray-900 dark:text-white\",children:\"Timestamp\"}),/*#__PURE__*/_jsx(\"th\",{className:\"px-4 py-3 text-left font-semibold text-gray-900 dark:text-white\",children:\"Status\"})]})}),/*#__PURE__*/_jsx(\"tbody\",{className:\"divide-y divide-gray-200 dark:divide-gray-700\",children:sessionAttendance.map(attendance=>/*#__PURE__*/_jsxs(\"tr\",{className:\"hover:bg-gray-50 dark:hover:bg-gray-800 transition-colors\",children:[/*#__PURE__*/_jsx(\"td\",{className:\"px-4 py-3 text-gray-900 dark:text-white font-medium\",children:attendance.studentName}),/*#__PURE__*/_jsx(\"td\",{className:\"px-4 py-3 text-gray-700 dark:text-gray-300\",children:attendance.studentMatricule}),/*#__PURE__*/_jsx(\"td\",{className:\"px-4 py-3 text-gray-700 dark:text-gray-300\",children:attendance.timestamp}),/*#__PURE__*/_jsx(\"td\",{className:\"px-4 py-3\",children:/*#__PURE__*/_jsx(\"span\",{className:\"px-3 py-1 rounded-full text-xs font-semibold \".concat(attendance.status===ATTENDANCE_STATUS.PRESENT?'bg-green-100 dark:bg-green-900/30 text-green-700 dark:text-green-400':attendance.status===ATTENDANCE_STATUS.LATE?'bg-yellow-100 dark:bg-yellow-900/30 text-yellow-700 dark:text-yellow-400':'bg-red-100 dark:bg-red-900/30 text-red-700 dark:text-red-400'),children:attendance.status===ATTENDANCE_STATUS.PRESENT?'Present':attendance.status===ATTENDANCE_STATUS.LATE?'Late':'Absent'})})]},attendance.id))})]})}):/*#__PURE__*/_jsx(\"div\",{className:\"bg-white dark:bg-gray-900 rounded-xl p-12 text-center shadow-sm border border-gray-200 dark:border-gray-800\",children:/*#__PURE__*/_jsx(\"p\",{className:\"text-gray-600 dark:text-gray-400\",children:\"No attendance recorded yet\"})})]})]})})]}),showCreateModal&&/*#__PURE__*/_jsx(\"div\",{className:\"fixed inset-0 bg-black/50 flex items-center justify-center z-50\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white dark:bg-gray-900 rounded-xl p-6 shadow-xl max-w-md w-full mx-4\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center justify-between mb-6\",children:[/*#__PURE__*/_jsx(\"h3\",{className:\"text-lg font-bold text-gray-900 dark:text-white\",children:\"Create New Session\"}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>{setShowCreateModal(false);setCreateError(null);},className:\"text-gray-500 hover:text-gray-700 dark:hover:text-gray-300\",children:/*#__PURE__*/_jsx(X,{className:\"w-5 h-5\"})})]}),createError&&/*#__PURE__*/_jsx(\"div\",{className:\"mb-4 p-3 bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-lg\",children:/*#__PURE__*/_jsx(\"p\",{className:\"text-sm text-red-700 dark:text-red-400\",children:createError})}),/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleCreateSession,className:\"space-y-4\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2\",children:\"Select Course\"}),/*#__PURE__*/_jsxs(\"select\",{value:createForm.courseId,onChange:e=>setCreateForm(_objectSpread(_objectSpread({},createForm),{},{courseId:e.target.value})),className:\"w-full px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-800 text-gray-900 dark:text-white focus:ring-2 focus:ring-blue-500 focus:border-transparent\",children:[/*#__PURE__*/_jsx(\"option\",{value:\"\",children:\"Choose a course...\"}),availableCourses.map(course=>/*#__PURE__*/_jsxs(\"option\",{value:course.id,children:[course.courseTitle,\" (\",course.courseCode,\") - \",course.program,\" - \",course.yearLevel]},course.id))]})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2\",children:\"Date\"}),/*#__PURE__*/_jsx(\"input\",{type:\"date\",value:createForm.date,onChange:e=>setCreateForm(_objectSpread(_objectSpread({},createForm),{},{date:e.target.value})),className:\"w-full px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-800 text-gray-900 dark:text-white focus:ring-2 focus:ring-blue-500 focus:border-transparent\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"grid grid-cols-2 gap-4\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2\",children:\"Start Time\"}),/*#__PURE__*/_jsx(\"input\",{type:\"time\",value:createForm.startTime,onChange:e=>setCreateForm(_objectSpread(_objectSpread({},createForm),{},{startTime:e.target.value})),className:\"w-full px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-800 text-gray-900 dark:text-white focus:ring-2 focus:ring-blue-500 focus:border-transparent\"})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2\",children:\"End Time\"}),/*#__PURE__*/_jsx(\"input\",{type:\"time\",value:createForm.endTime,onChange:e=>setCreateForm(_objectSpread(_objectSpread({},createForm),{},{endTime:e.target.value})),className:\"w-full px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-800 text-gray-900 dark:text-white focus:ring-2 focus:ring-blue-500 focus:border-transparent\"})]})]}),/*#__PURE__*/_jsx(\"div\",{className:\"p-3 bg-blue-50 dark:bg-blue-900/20 border border-blue-200 dark:border-blue-800 rounded-lg\",children:/*#__PURE__*/_jsxs(\"p\",{className:\"text-xs text-blue-700 dark:text-blue-400\",children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Session Lifecycle:\"}),\" Session will be \",/*#__PURE__*/_jsx(\"strong\",{children:\"Scheduled\"}),\" until start time, then automatically become \",/*#__PURE__*/_jsx(\"strong\",{children:\"Open\"}),\" for attendance, and \",/*#__PURE__*/_jsx(\"strong\",{children:\"Close\"}),\" at end time. Students who don't mark attendance will be marked \",/*#__PURE__*/_jsx(\"strong\",{children:\"Absent\"}),\".\"]})}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex gap-3 pt-4\",children:[/*#__PURE__*/_jsx(\"button\",{type:\"button\",onClick:()=>{setShowCreateModal(false);setCreateError(null);setCreateForm({courseId:'',date:new Date().toISOString().split('T')[0],startTime:'08:00',endTime:'10:00'});},className:\"flex-1 px-4 py-2 border border-gray-300 dark:border-gray-600 text-gray-700 dark:text-gray-300 rounded-lg font-semibold hover:bg-gray-100 dark:hover:bg-gray-800 transition-colors\",children:\"Cancel\"}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",disabled:creating,className:\"flex-1 px-4 py-2 bg-blue-600 text-white rounded-lg font-semibold hover:bg-blue-700 disabled:opacity-50 transition-colors flex items-center justify-center gap-2\",children:creating?/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"div\",{className:\"inline-block animate-spin rounded-full h-4 w-4 border-2 border-white border-t-transparent\"}),\"Creating...\"]}):'Create Session'})]})]})]})})]});};/**\r\n * Session Card Component for displaying session details\r\n */const SessionCard=_ref=>{let{session,onViewAttendance,getTimeRemaining,getStatusBadgeClass,getStatusLabel,expanded=false}=_ref;const timeRemaining=getTimeRemaining(session);const now=new Date();const sessionDate=session.session_date;const[startHour,startMin]=session.start_time.split(':').map(Number);const[endHour,endMin]=session.end_time.split(':').map(Number);const startDateTimeUTC=cameroonToUTC(sessionDate,startHour,startMin);const endDateTimeUTC=cameroonToUTC(sessionDate,endHour,endMin);const nowUTC=new Date(now.getTime()-now.getTimezoneOffset()*60*1000);const isOpen=nowUTC>=startDateTimeUTC&&nowUTC<=endDateTimeUTC;return/*#__PURE__*/_jsx(\"div\",{className:\"bg-white dark:bg-gray-900 rounded-xl p-6 shadow-sm border border-gray-200 dark:border-gray-800 \".concat(isOpen?'border-l-4 border-l-green-500':''),children:/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center justify-between\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex-1\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center gap-2 mb-1\",children:[isOpen&&/*#__PURE__*/_jsx(\"span\",{className:\"w-2 h-2 bg-green-500 rounded-full animate-pulse\"}),/*#__PURE__*/_jsx(\"p\",{className:\"font-semibold text-gray-900 dark:text-white\",children:session.courseTitle})]}),/*#__PURE__*/_jsx(\"p\",{className:\"text-sm text-gray-600 dark:text-gray-400\",children:session.className}),/*#__PURE__*/_jsxs(\"p\",{className:\"text-xs text-gray-500 dark:text-gray-500 mt-1\",children:[session.date,\" \\u2022 \",session.startTime,\" - \",session.endTime]}),expanded&&/*#__PURE__*/_jsx(\"div\",{className:\"mt-3 flex items-center gap-4 text-sm\",children:/*#__PURE__*/_jsxs(\"span\",{className:\"text-gray-600 dark:text-gray-400\",children:[/*#__PURE__*/_jsx(\"strong\",{children:session.attendanceCount}),\" students marked\"]})})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"text-right flex flex-col items-end gap-2\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"px-3 py-1 rounded-full text-xs font-semibold \".concat(getStatusBadgeClass(session.status)),children:getStatusLabel(session.status)}),timeRemaining&&/*#__PURE__*/_jsx(\"span\",{className:\"text-xs text-gray-500 dark:text-gray-400\",children:timeRemaining.formatted}),/*#__PURE__*/_jsx(\"button\",{onClick:onViewAttendance,className:\"text-blue-600 dark:text-blue-400 hover:underline text-sm font-semibold\",children:\"View Attendance\"})]})]})});};export default DelegateDashboard;","map":{"version":3,"names":["React","useState","useEffect","useNavigate","useAuth","supabase","delegateFetchAssignedClasses","delegateFetchSessionAttendance","delegateFetchStats","adminFetchAllCourses","createSessionWithValidation","checkOverlappingSessions","useSessionLifecycle","useSessionCountdown","User","LayoutDashboard","GraduationCap","PlayCircle","Calendar","History","CheckCircle","Sun","Moon","LogOut","ChevronLeft","ChevronRight","Plus","CalendarDays","Radio","CalendarX","X","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","DelegateDashboard","_currentUser$email","currentUser","userRole","loading","logout","navigate","cameroonToUTC","date","hour","min","cameroonTime","Date","setHours","getTime","sidebarOpen","setSidebarOpen","darkMode","setDarkMode","saved","localStorage","getItem","JSON","parse","activeTab","setActiveTab","assignedClasses","setAssignedClasses","selectedSession","setSelectedSession","sessionAttendance","setSessionAttendance","stats","setStats","activeSessions","totalSessions","totalMarked","todaySessions","error","loadingData","setLoadingData","showCreateModal","setShowCreateModal","creating","setCreating","availableCourses","setAvailableCourses","createForm","setCreateForm","courseId","toISOString","split","startTime","endTime","createError","setCreateError","successMessage","setSuccessMessage","sessions","upcomingSessions","pastSessions","sessionsLoading","sessionsError","refresh","refreshSessions","getSessionTimeRemaining","id","document","documentElement","classList","add","remove","setItem","stringify","fetchAllData","interval","setInterval","clearInterval","timer","setTimeout","clearTimeout","length","loadCourses","courses","classesData","statsData","Promise","all","classes","console","handleCreateSession","e","preventDefault","now","sessionDateTime","startHour","startMin","map","Number","sessionDateTimeUTC","nowUTC","getTimezoneOffset","data","existingClass","classError","from","select","eq","single","classId","code","course","courseError","newClass","createClassError","insert","class_name","course_title","course_id","delegate_id","hasOverlap","overlappingSessions","concat","s","start_time","join","session","message","handleViewAttendance","sessionId","attendance","alert","find","handleLogout","downloadAttendanceCSV","headers","csvContent","record","studentName","studentMatricule","timestamp","status","blob","Blob","type","link","createElement","url","URL","createObjectURL","setAttribute","courseTitle","style","visibility","body","appendChild","click","removeChild","getStatusBadgeClass","sessionDate","session_date","endHour","endMin","end_time","startDateTimeUTC","endDateTimeUTC","getStatusLabel","className","children","navItems","label","icon","badge","item","onClick","name","email","charAt","toUpperCase","SessionCard","onViewAttendance","getTimeRemaining","cls","courseCode","hasActiveSession","sessionToday","prev","_objectSpread","program","expanded","_getSessionTimeRemain","formatted","attendanceCount","fill","stroke","viewBox","strokeLinecap","strokeLinejoin","strokeWidth","d","ATTENDANCE_STATUS","PRESENT","LATE","onSubmit","value","onChange","target","yearLevel","disabled","_ref","timeRemaining","isOpen"],"sources":["C:/Users/PFI/Desktop/ictuattennce_portal/ATTENDANCE/src/pages/DelegateDashboard.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\r\nimport { useNavigate } from 'react-router-dom';\r\nimport { useAuth } from '../contexts/AuthContext';\r\nimport { supabase } from '../supabase/supabase';\r\nimport {\r\n  delegateFetchAssignedClasses,\r\n  delegateFetchSessionAttendance,\r\n  delegateFetchStats,\r\n  adminFetchAllCourses,\r\n} from '../utils/dashboardQueries';\r\nimport {\r\n  createSessionWithValidation,\r\n  checkOverlappingSessions,\r\n} from '../utils/sessionLifecycle';\r\nimport { useSessionLifecycle, useSessionCountdown } from '../hooks/useSessionLifecycle';\r\nimport {\r\n  User,\r\n  LayoutDashboard,\r\n  GraduationCap,\r\n  PlayCircle,\r\n  Calendar,\r\n  History,\r\n  CheckCircle,\r\n  Sun,\r\n  Moon,\r\n  LogOut,\r\n  ChevronLeft,\r\n  ChevronRight,\r\n  Plus,\r\n  CalendarDays,\r\n  Radio,\r\n  CalendarX,\r\n  X\r\n} from 'lucide-react';\r\n\r\nconst DelegateDashboard = () => {\r\n  const { currentUser, userRole, loading, logout } = useAuth();\r\n  const navigate = useNavigate();\r\n\r\n  // Helper functions for timezone conversion (Africa/Douala - UTC+1)\r\n  const cameroonToUTC = (date, hour, min) => {\r\n    const cameroonTime = new Date(date);\r\n    cameroonTime.setHours(hour, min, 0, 0);\r\n    return new Date(cameroonTime.getTime() - (1 * 60 * 60 * 1000));\r\n  };\r\n\r\n  const [sidebarOpen, setSidebarOpen] = useState(true);\r\n  const [darkMode, setDarkMode] = useState(() => {\r\n    // Check localStorage for saved preference, default to false\r\n    const saved = localStorage.getItem('delegateDarkMode');\r\n    return saved ? JSON.parse(saved) : false;\r\n  });\r\n  const [activeTab, setActiveTab] = useState('overview');\r\n\r\n  // Data states\r\n  const [assignedClasses, setAssignedClasses] = useState([]);\r\n  const [selectedSession, setSelectedSession] = useState(null);\r\n  const [sessionAttendance, setSessionAttendance] = useState([]);\r\n  const [stats, setStats] = useState({\r\n    activeSessions: 0,\r\n    totalSessions: 0,\r\n    totalMarked: 0,\r\n    todaySessions: 0,\r\n    error: null\r\n  });\r\n\r\n  // UI states\r\n  const [loadingData, setLoadingData] = useState(true);\r\n  const [showCreateModal, setShowCreateModal] = useState(false);\r\n  const [creating, setCreating] = useState(false);\r\n  const [availableCourses, setAvailableCourses] = useState([]);\r\n  const [createForm, setCreateForm] = useState({\r\n    courseId: '',\r\n    date: new Date().toISOString().split('T')[0],\r\n    startTime: '08:00',\r\n    endTime: '10:00'\r\n  });\r\n  const [createError, setCreateError] = useState(null);\r\n  const [successMessage, setSuccessMessage] = useState(null);\r\n\r\n  // Use session lifecycle hook for real-time session management\r\n  const {\r\n    sessions,\r\n    activeSessions,\r\n    upcomingSessions,\r\n    pastSessions,\r\n    loading: sessionsLoading,\r\n    error: sessionsError,\r\n    refresh: refreshSessions,\r\n    getSessionTimeRemaining\r\n  } = useSessionLifecycle(currentUser?.id, 'delegate');\r\n\r\n  // Apply dark mode class to document\r\n  useEffect(() => {\r\n    if (darkMode) {\r\n      document.documentElement.classList.add('dark');\r\n    } else {\r\n      document.documentElement.classList.remove('dark');\r\n    }\r\n    // Save preference to localStorage\r\n    localStorage.setItem('delegateDarkMode', JSON.stringify(darkMode));\r\n  }, [darkMode]);\r\n\r\n  // Auth check\r\n  useEffect(() => {\r\n    if (!loading && (!currentUser || userRole !== 'delegate')) {\r\n      navigate('/delegate');\r\n      return;\r\n    }\r\n\r\n    if (!loading && currentUser && userRole === 'delegate') {\r\n      fetchAllData();\r\n      const interval = setInterval(fetchAllData, 30000);\r\n      return () => clearInterval(interval);\r\n    }\r\n  }, [currentUser, userRole, loading, navigate]);\r\n\r\n  // Clear success message after 5 seconds\r\n  useEffect(() => {\r\n    if (successMessage) {\r\n      const timer = setTimeout(() => setSuccessMessage(null), 5000);\r\n      return () => clearTimeout(timer);\r\n    }\r\n  }, [successMessage]);\r\n\r\n  // Load available courses when modal opens\r\n  useEffect(() => {\r\n    if (showCreateModal && availableCourses.length === 0) {\r\n      const loadCourses = async () => {\r\n        const { courses, error } = await adminFetchAllCourses();\r\n        if (!error) {\r\n          setAvailableCourses(courses);\r\n        }\r\n      };\r\n      loadCourses();\r\n    }\r\n  }, [showCreateModal, availableCourses.length]);\r\n\r\n  const fetchAllData = async () => {\r\n    try {\r\n      setLoadingData(true);\r\n      const [classesData, statsData] = await Promise.all([\r\n        delegateFetchAssignedClasses(currentUser.id),\r\n        delegateFetchStats(currentUser.id)\r\n      ]);\r\n\r\n      setAssignedClasses(classesData.classes);\r\n      setStats(statsData);\r\n    } catch (error) {\r\n      console.error('Error fetching delegate data:', error);\r\n    } finally {\r\n      setLoadingData(false);\r\n    }\r\n  };\r\n\r\n  const handleCreateSession = async (e) => {\r\n    e.preventDefault();\r\n    setCreateError(null);\r\n\r\n    if (!createForm.courseId) {\r\n      setCreateError('Please select a course');\r\n      return;\r\n    }\r\n\r\n    // Validate times\r\n    if (createForm.startTime >= createForm.endTime) {\r\n      setCreateError('End time must be after start time');\r\n      return;\r\n    }\r\n\r\n    // Validate start time is not in the past\r\n    const now = new Date();\r\n    const sessionDateTime = new Date(createForm.date);\r\n    const [startHour, startMin] = createForm.startTime.split(':').map(Number);\r\n    sessionDateTime.setHours(startHour, startMin, 0, 0);\r\n\r\n    // Convert to UTC for comparison\r\n    const sessionDateTimeUTC = new Date(sessionDateTime.getTime() - (1 * 60 * 60 * 1000)); // Cameroon to UTC\r\n    const nowUTC = new Date(now.getTime() - (now.getTimezoneOffset() * 60 * 1000));\r\n\r\n    if (sessionDateTimeUTC <= nowUTC) {\r\n      setCreateError('Session start time cannot be in the past');\r\n      return;\r\n    }\r\n\r\n    try {\r\n      setCreating(true);\r\n\r\n      // First, find or create the class for this course and delegate\r\n      let { data: existingClass, error: classError } = await supabase\r\n        .from('classes')\r\n        .select('id')\r\n        .eq('course_id', createForm.courseId)\r\n        .eq('delegate_id', currentUser.id)\r\n        .single();\r\n\r\n      let classId;\r\n      if (classError && classError.code === 'PGRST116') { // No rows returned\r\n        // Create new class\r\n        const { data: course, error: courseError } = await supabase\r\n          .from('courses')\r\n          .select('course_title')\r\n          .eq('id', createForm.courseId)\r\n          .single();\r\n\r\n        if (courseError) throw courseError;\r\n\r\n        const { data: newClass, error: createClassError } = await supabase\r\n          .from('classes')\r\n          .insert({\r\n            class_name: course.course_title,\r\n            course_id: createForm.courseId,\r\n            delegate_id: currentUser.id\r\n          })\r\n          .select('id')\r\n          .single();\r\n\r\n        if (createClassError) throw createClassError;\r\n        classId = newClass.id;\r\n      } else if (classError) {\r\n        throw classError;\r\n      } else {\r\n        classId = existingClass.id;\r\n      }\r\n\r\n      // Check for overlapping sessions\r\n      const { hasOverlap, overlappingSessions } = await checkOverlappingSessions(\r\n        classId,\r\n        createForm.date,\r\n        createForm.startTime,\r\n        createForm.endTime\r\n      );\r\n\r\n      if (hasOverlap) {\r\n        setCreateError(`Session overlaps with existing session(s) at ${overlappingSessions.map(s => s.start_time).join(', ')}`);\r\n        return;\r\n      }\r\n\r\n      // Create session\r\n      const { session, error } = await createSessionWithValidation(\r\n        currentUser.id,\r\n        classId,\r\n        createForm.date,\r\n        createForm.startTime,\r\n        createForm.endTime\r\n      );\r\n\r\n      if (error) {\r\n        setCreateError(error);\r\n        return;\r\n      }\r\n\r\n      setSuccessMessage('Session created successfully!');\r\n      setShowCreateModal(false);\r\n      setCreateForm({\r\n        courseId: '',\r\n        date: new Date().toISOString().split('T')[0],\r\n        startTime: '08:00',\r\n        endTime: '10:00'\r\n      });\r\n      fetchAllData();\r\n      refreshSessions();\r\n    } catch (error) {\r\n      setCreateError(error.message);\r\n    } finally {\r\n      setCreating(false);\r\n    }\r\n  };\r\n\r\n  const handleViewAttendance = async (sessionId) => {\r\n    try {\r\n      const { attendance, error } = await delegateFetchSessionAttendance(sessionId);\r\n      if (error) {\r\n        alert('Error fetching attendance: ' + error);\r\n        return;\r\n      }\r\n      const session = [...activeSessions, ...upcomingSessions, ...pastSessions].find(s => s.id === sessionId);\r\n      setSelectedSession(session);\r\n      setSessionAttendance(attendance);\r\n      setActiveTab('attendance');\r\n    } catch (error) {\r\n      alert('Error: ' + error.message);\r\n    }\r\n  };\r\n\r\n  const handleLogout = async () => {\r\n    try {\r\n      await logout();\r\n      navigate('/login');\r\n    } catch (error) {\r\n      console.error('Logout error:', error);\r\n    }\r\n  };\r\n\r\n  const downloadAttendanceCSV = () => {\r\n    if (!selectedSession || !sessionAttendance.length) {\r\n      alert('No attendance data to download');\r\n      return;\r\n    }\r\n\r\n    // Create CSV content\r\n    const headers = ['Student Name', 'Matricule', 'Timestamp', 'Status'];\r\n    const csvContent = [\r\n      headers.join(','),\r\n      ...sessionAttendance.map(record => [\r\n        `\"${record.studentName}\"`,\r\n        `\"${record.studentMatricule}\"`,\r\n        `\"${record.timestamp}\"`,\r\n        `\"${record.status === 'present' ? 'Present' : record.status === 'late' ? 'Late' : 'Absent'}\"`\r\n      ].join(','))\r\n    ].join('\\n');\r\n\r\n    // Create and download file\r\n    const blob = new Blob([csvContent], { type: 'text/csv;charset=utf-8;' });\r\n    const link = document.createElement('a');\r\n    const url = URL.createObjectURL(blob);\r\n\r\n    link.setAttribute('href', url);\r\n    link.setAttribute('download', `${selectedSession.courseTitle}_${selectedSession.date}_attendance.csv`);\r\n    link.style.visibility = 'hidden';\r\n\r\n    document.body.appendChild(link);\r\n    link.click();\r\n    document.body.removeChild(link);\r\n  };\r\n\r\n  const getStatusBadgeClass = (session) => {\r\n    const now = new Date();\r\n    const sessionDate = session.session_date;\r\n    const [startHour, startMin] = session.start_time.split(':').map(Number);\r\n    const [endHour, endMin] = session.end_time.split(':').map(Number);\r\n\r\n    const startDateTimeUTC = cameroonToUTC(sessionDate, startHour, startMin);\r\n    const endDateTimeUTC = cameroonToUTC(sessionDate, endHour, endMin);\r\n    const nowUTC = new Date(now.getTime() - (now.getTimezoneOffset() * 60 * 1000));\r\n\r\n    if (nowUTC < startDateTimeUTC) {\r\n      return 'bg-blue-100 dark:bg-blue-900/30 text-blue-700 dark:text-blue-400';\r\n    } else if (nowUTC >= startDateTimeUTC && nowUTC <= endDateTimeUTC) {\r\n      return 'bg-green-100 dark:bg-green-900/30 text-green-700 dark:text-green-400';\r\n    } else {\r\n      return 'bg-gray-100 dark:bg-gray-700 text-gray-700 dark:text-gray-400';\r\n    }\r\n  };\r\n\r\n  const getStatusLabel = (session) => {\r\n    const now = new Date();\r\n    const sessionDate = session.session_date;\r\n    const [startHour, startMin] = session.start_time.split(':').map(Number);\r\n    const [endHour, endMin] = session.end_time.split(':').map(Number);\r\n\r\n    const startDateTimeUTC = cameroonToUTC(sessionDate, startHour, startMin);\r\n    const endDateTimeUTC = cameroonToUTC(sessionDate, endHour, endMin);\r\n    const nowUTC = new Date(now.getTime() - (now.getTimezoneOffset() * 60 * 1000));\r\n\r\n    if (nowUTC < startDateTimeUTC) {\r\n      return 'Scheduled';\r\n    } else if (nowUTC >= startDateTimeUTC && nowUTC <= endDateTimeUTC) {\r\n      return 'Open';\r\n    } else {\r\n      return 'Closed';\r\n    }\r\n  };\r\n\r\n  if (loading) {\r\n    return (\r\n      <div className=\"flex items-center justify-center h-screen bg-gradient-to-br from-gray-50 to-gray-100 dark:from-gray-900 dark:to-gray-800\">\r\n        <div className=\"text-center\">\r\n          <div className=\"inline-block animate-spin rounded-full h-12 w-12 border-4 border-blue-300 border-t-blue-600 mb-4\" />\r\n          <p className=\"text-gray-700 dark:text-gray-300 font-medium\">Loading Dashboard...</p>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  if (!currentUser || userRole !== 'delegate') {\r\n    return null;\r\n  }\r\n\r\n  const navItems = [\r\n    { id: 'overview', label: 'Overview', icon: LayoutDashboard },\r\n    { id: 'classes', label: 'My Classes', icon: GraduationCap },\r\n    { id: 'active', label: 'Active Sessions', icon: PlayCircle, badge: activeSessions.length },\r\n    { id: 'scheduled', label: 'Scheduled', icon: Calendar, badge: upcomingSessions.length },\r\n    { id: 'history', label: 'History', icon: History },\r\n    { id: 'attendance', label: 'Attendance', icon: CheckCircle }\r\n  ];\r\n\r\n  return (\r\n    <div className={`flex h-screen overflow-hidden ${darkMode ? 'dark' : ''}`}>\r\n      {/* SIDEBAR */}\r\n      <aside className={`${sidebarOpen ? 'w-64' : 'w-20'} bg-white dark:bg-gray-900 border-r border-gray-200 dark:border-gray-800 flex flex-col transition-all duration-300 shadow-lg`}>\r\n        <div className=\"p-6 border-b border-gray-200 dark:border-gray-800\">\r\n          <div className=\"flex items-center gap-3\">\r\n            <div className=\"w-10 h-10 rounded-lg bg-gradient-to-br from-blue-600 to-blue-700 flex items-center justify-center text-white font-bold\">\r\n              <User className=\"w-6 h-6\" />\r\n            </div>\r\n            {sidebarOpen && (\r\n              <div>\r\n                <p className=\"font-bold text-sm text-gray-900 dark:text-white\">Delegate</p>\r\n                <p className=\"text-xs text-gray-500 dark:text-gray-400\">Portal</p>\r\n              </div>\r\n            )}\r\n          </div>\r\n        </div>\r\n\r\n        <nav className=\"flex-1 overflow-y-auto px-3 py-6 space-y-2\">\r\n          {navItems.map((item) => (\r\n            <button\r\n              key={item.id}\r\n              onClick={() => setActiveTab(item.id)}\r\n              className={`w-full flex items-center gap-3 px-4 py-3 rounded-lg transition-all ${activeTab === item.id\r\n                ? 'bg-blue-50 dark:bg-blue-900/30 text-blue-600 dark:text-blue-400 font-semibold'\r\n                : 'text-gray-700 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-800'\r\n                }`}\r\n            >\r\n              <item.icon className=\"w-5 h-5\" />\r\n              {sidebarOpen && (\r\n                <span className=\"text-sm flex-1 text-left\">{item.label}</span>\r\n              )}\r\n              {sidebarOpen && item.badge > 0 && (\r\n                <span className=\"px-2 py-0.5 bg-blue-500 text-white text-xs rounded-full\">\r\n                  {item.badge}\r\n                </span>\r\n              )}\r\n            </button>\r\n          ))}\r\n        </nav>\r\n\r\n        <div className=\"p-3 border-t border-gray-200 dark:border-gray-800 space-y-2\">\r\n          <button\r\n            onClick={() => setDarkMode(!darkMode)}\r\n            className=\"w-full flex items-center gap-3 px-4 py-3 rounded-lg text-gray-700 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-800 transition-all\"\r\n          >\r\n            {darkMode ? <Sun className=\"w-5 h-5\" /> : <Moon className=\"w-5 h-5\" />}\r\n            {sidebarOpen && <span className=\"text-sm\">Theme</span>}\r\n          </button>\r\n\r\n          <button\r\n            onClick={handleLogout}\r\n            className=\"w-full flex items-center gap-3 px-4 py-3 rounded-lg text-red-600 dark:text-red-400 hover:bg-red-50 dark:hover:bg-red-900/10 transition-all\"\r\n          >\r\n            <LogOut className=\"w-5 h-5\" />\r\n            {sidebarOpen && <span className=\"text-sm font-semibold\">Logout</span>}\r\n          </button>\r\n        </div>\r\n\r\n        <div className=\"p-3 border-t border-gray-200 dark:border-gray-800\">\r\n          <button\r\n            onClick={() => setSidebarOpen(!sidebarOpen)}\r\n            className=\"w-full flex items-center justify-center py-2 rounded-lg text-gray-500 hover:bg-gray-100 dark:hover:bg-gray-800 transition-all\"\r\n          >\r\n            {sidebarOpen ? <ChevronLeft className=\"w-5 h-5\" /> : <ChevronRight className=\"w-5 h-5\" />}\r\n          </button>\r\n        </div>\r\n      </aside>\r\n\r\n      {/* MAIN CONTENT */}\r\n      <div className=\"flex-1 flex flex-col overflow-hidden bg-gray-50 dark:bg-gray-950\">\r\n        {/* TOP BAR */}\r\n        <header className=\"sticky top-0 z-40 bg-white dark:bg-gray-900 border-b border-gray-200 dark:border-gray-800 shadow-sm\">\r\n          <div className=\"px-8 py-4 flex items-center justify-between\">\r\n            <div>\r\n              <h1 className=\"text-2xl font-bold text-gray-900 dark:text-white\">\r\n                Attendance Management Portal\r\n              </h1>\r\n              <p className=\"text-sm text-gray-500 dark:text-gray-400\">\r\n                Welcome, {currentUser?.name || currentUser?.email}\r\n              </p>\r\n            </div>\r\n\r\n            <div className=\"flex items-center gap-4\">\r\n              <button\r\n                className=\"px-4 py-2 bg-blue-600 text-white rounded-lg text-sm font-semibold hover:bg-blue-700 transition-colors flex items-center gap-2\"\r\n                onClick={() => setShowCreateModal(true)}\r\n              >\r\n                <Plus className=\"w-4 h-4\" />\r\n                New Session\r\n              </button>\r\n\r\n              <div className=\"w-10 h-10 rounded-full bg-gradient-to-br from-blue-600 to-blue-700 flex items-center justify-center text-white font-bold cursor-pointer\">\r\n                {currentUser?.email?.charAt(0).toUpperCase()}\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </header>\r\n\r\n        {/* SCROLLABLE CONTENT */}\r\n        <main className=\"flex-1 overflow-y-auto\">\r\n          <div className=\"p-8 max-w-7xl mx-auto\">\r\n            {/* Success Message */}\r\n            {successMessage && (\r\n              <div className=\"mb-6 p-4 bg-green-50 dark:bg-green-900/20 border border-green-200 dark:border-green-800 rounded-lg\">\r\n                <p className=\"text-green-700 dark:text-green-400 font-medium\">{successMessage}</p>\r\n              </div>\r\n            )}\r\n\r\n            {/* Error Message */}\r\n            {sessionsError && (\r\n              <div className=\"mb-6 p-4 bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-lg\">\r\n                <p className=\"text-red-700 dark:text-red-400 font-medium\">{sessionsError}</p>\r\n              </div>\r\n            )}\r\n\r\n            {/* OVERVIEW TAB */}\r\n            {activeTab === 'overview' && (\r\n              <div className=\"space-y-8\">\r\n                {/* KPI CARDS */}\r\n                <div className=\"grid grid-cols-1 md:grid-cols-4 gap-4\">\r\n                  <div className=\"bg-white dark:bg-gray-900 rounded-xl p-6 shadow-sm border border-gray-200 dark:border-gray-800 hover:shadow-lg transition-shadow\">\r\n                    <div className=\"flex items-start justify-between mb-4\">\r\n                      <div>\r\n                        <p className=\"text-sm text-gray-600 dark:text-gray-400 font-medium mb-1\">Active Sessions</p>\r\n                        <p className=\"text-3xl font-bold text-gray-900 dark:text-white\">{activeSessions.length}</p>\r\n                      </div>\r\n                      <div className=\"p-3 bg-green-100 dark:bg-green-900/30 rounded-lg\">\r\n                        <PlayCircle className=\"w-6 h-6 text-green-600 dark:text-green-400\" />\r\n                      </div>\r\n                    </div>\r\n                    <p className=\"text-xs text-gray-500 dark:text-gray-400\">Currently open for attendance</p>\r\n                  </div>\r\n\r\n                  <div className=\"bg-white dark:bg-gray-900 rounded-xl p-6 shadow-sm border border-gray-200 dark:border-gray-800 hover:shadow-lg transition-shadow\">\r\n                    <div className=\"flex items-start justify-between mb-4\">\r\n                      <div>\r\n                        <p className=\"text-sm text-gray-600 dark:text-gray-400 font-medium mb-1\">Scheduled</p>\r\n                        <p className=\"text-3xl font-bold text-gray-900 dark:text-white\">{upcomingSessions.length}</p>\r\n                      </div>\r\n                      <div className=\"p-3 bg-blue-100 dark:bg-blue-900/30 rounded-lg\">\r\n                        <Calendar className=\"w-6 h-6 text-blue-600 dark:text-blue-400\" />\r\n                      </div>\r\n                    </div>\r\n                    <p className=\"text-xs text-gray-500 dark:text-gray-400\">Upcoming sessions</p>\r\n                  </div>\r\n\r\n                  <div className=\"bg-white dark:bg-gray-900 rounded-xl p-6 shadow-sm border border-gray-200 dark:border-gray-800 hover:shadow-lg transition-shadow\">\r\n                    <div className=\"flex items-start justify-between mb-4\">\r\n                      <div>\r\n                        <p className=\"text-sm text-gray-600 dark:text-gray-400 font-medium mb-1\">Total Sessions</p>\r\n                        <p className=\"text-3xl font-bold text-gray-900 dark:text-white\">{stats.totalSessions}</p>\r\n                      </div>\r\n                      <div className=\"p-3 bg-indigo-100 dark:bg-indigo-900/30 rounded-lg\">\r\n                        <CalendarDays className=\"w-6 h-6 text-indigo-600 dark:text-indigo-400\" />\r\n                      </div>\r\n                    </div>\r\n                    <p className=\"text-xs text-gray-500 dark:text-gray-400\">All time</p>\r\n                  </div>\r\n\r\n                  <div className=\"bg-white dark:bg-gray-900 rounded-xl p-6 shadow-sm border border-gray-200 dark:border-gray-800 hover:shadow-lg transition-shadow\">\r\n                    <div className=\"flex items-start justify-between mb-4\">\r\n                      <div>\r\n                        <p className=\"text-sm text-gray-600 dark:text-gray-400 font-medium mb-1\">Attendance Marked</p>\r\n                        <p className=\"text-3xl font-bold text-gray-900 dark:text-white\">{stats.totalMarked}</p>\r\n                      </div>\r\n                      <div className=\"p-3 bg-amber-100 dark:bg-amber-900/30 rounded-lg\">\r\n                        <CheckCircle className=\"w-6 h-6 text-amber-600 dark:text-amber-400\" />\r\n                      </div>\r\n                    </div>\r\n                    <p className=\"text-xs text-gray-500 dark:text-gray-400\">Total records</p>\r\n                  </div>\r\n                </div>\r\n\r\n                {/* Active Sessions Alert */}\r\n                {activeSessions.length > 0 && (\r\n                  <div className=\"p-4 bg-green-50 dark:bg-green-900/20 border border-green-200 dark:border-green-800 rounded-xl\">\r\n                    <div className=\"flex items-center gap-3\">\r\n                      <Radio className=\"w-6 h-6 text-green-600 dark:text-green-400 animate-pulse\" />\r\n                      <div>\r\n                        <p className=\"font-semibold text-green-900 dark:text-green-300\">\r\n                          {activeSessions.length} Session{activeSessions.length > 1 ? 's' : ''} Currently Active\r\n                        </p>\r\n                        <p className=\"text-sm text-green-700 dark:text-green-400\">\r\n                          Students can mark attendance now. Sessions will auto-close at end time.\r\n                        </p>\r\n                      </div>\r\n                    </div>\r\n                  </div>\r\n                )}\r\n\r\n                {/* Active Sessions List */}\r\n                {activeSessions.length > 0 && (\r\n                  <div className=\"bg-white dark:bg-gray-900 rounded-xl p-6 shadow-sm border border-gray-200 dark:border-gray-800\">\r\n                    <h3 className=\"text-lg font-bold text-gray-900 dark:text-white mb-6 flex items-center gap-2\">\r\n                      <PlayCircle className=\"w-5 h-5 text-green-600\" />\r\n                      Active Sessions\r\n                    </h3>\r\n                    <div className=\"space-y-4\">\r\n                      {activeSessions.map((session) => (\r\n                        <SessionCard\r\n                          key={session.id}\r\n                          session={session}\r\n                          onViewAttendance={() => handleViewAttendance(session.id)}\r\n                          getTimeRemaining={getSessionTimeRemaining}\r\n                          getStatusBadgeClass={getStatusBadgeClass}\r\n                          getStatusLabel={getStatusLabel}\r\n                        />\r\n                      ))}\r\n                    </div>\r\n                  </div>\r\n                )}\r\n\r\n                {/* ASSIGNED CLASSES */}\r\n                <div className=\"bg-white dark:bg-gray-900 rounded-xl p-6 shadow-sm border border-gray-200 dark:border-gray-800\">\r\n                  <h3 className=\"text-lg font-bold text-gray-900 dark:text-white mb-6\">My Assigned Classes</h3>\r\n\r\n                  {assignedClasses.length > 0 ? (\r\n                    <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4\">\r\n                      {assignedClasses.map((cls) => (\r\n                        <div key={cls.id} className=\"p-4 rounded-lg border border-gray-200 dark:border-gray-700 hover:shadow-lg transition-shadow\">\r\n                          <div className=\"flex items-start justify-between mb-3\">\r\n                            <div>\r\n                              <p className=\"font-semibold text-gray-900 dark:text-white\">{cls.courseTitle}</p>\r\n                              <p className=\"text-xs text-gray-500 dark:text-gray-400\">{cls.courseCode}</p>\r\n                            </div>\r\n                            <span className={`px-2 py-1 rounded-full text-xs font-semibold ${cls.hasActiveSession\r\n                              ? 'bg-green-100 dark:bg-green-900/30 text-green-700 dark:text-green-400'\r\n                              : 'bg-gray-100 dark:bg-gray-700 text-gray-700 dark:text-gray-400'\r\n                              }`}>\r\n                              {cls.sessionToday}\r\n                            </span>\r\n                          </div>\r\n                          <p className=\"text-sm text-gray-600 dark:text-gray-400 mb-4\">{cls.className}</p>\r\n                          <button\r\n                            onClick={() => {\r\n                              setCreateForm(prev => ({ ...prev, classId: cls.id }));\r\n                              setShowCreateModal(true);\r\n                            }}\r\n                            className=\"w-full px-3 py-2 bg-blue-100 dark:bg-blue-900/30 text-blue-700 dark:text-blue-400 rounded-lg text-sm font-semibold hover:bg-blue-200 dark:hover:bg-blue-900/50 transition-colors\"\r\n                          >\r\n                            Open Session\r\n                          </button>\r\n                        </div>\r\n                      ))}\r\n                    </div>\r\n                  ) : (\r\n                    <div className=\"text-center py-12\">\r\n                      <p className=\"text-gray-500 dark:text-gray-400\">No classes assigned yet</p>\r\n                    </div>\r\n                  )}\r\n                </div>\r\n              </div>\r\n            )}\r\n\r\n            {/* CLASSES TAB */}\r\n            {activeTab === 'classes' && (\r\n              <div>\r\n                <h2 className=\"text-2xl font-bold text-gray-900 dark:text-white mb-6\">My Classes</h2>\r\n                {assignedClasses.length > 0 ? (\r\n                  <div className=\"grid grid-cols-1 lg:grid-cols-2 gap-6\">\r\n                    {assignedClasses.map((cls) => (\r\n                      <div key={cls.id} className=\"bg-white dark:bg-gray-900 rounded-xl p-6 shadow-sm border border-gray-200 dark:border-gray-800\">\r\n                        <div className=\"flex items-start justify-between mb-4\">\r\n                          <div>\r\n                            <h3 className=\"text-lg font-bold text-gray-900 dark:text-white\">{cls.courseTitle}</h3>\r\n                            <p className=\"text-sm text-gray-600 dark:text-gray-400\">{cls.courseCode}</p>\r\n                          </div>\r\n                          <span className=\"px-3 py-1 bg-blue-100 dark:bg-blue-900/30 text-blue-700 dark:text-blue-400 rounded-full text-xs font-semibold\">\r\n                            {cls.program}\r\n                          </span>\r\n                        </div>\r\n                        <p className=\"text-gray-700 dark:text-gray-300 mb-4\">{cls.className}</p>\r\n                        <button\r\n                          onClick={() => {\r\n                            setCreateForm(prev => ({ ...prev, classId: cls.id }));\r\n                            setShowCreateModal(true);\r\n                          }}\r\n                          className=\"w-full px-4 py-2 bg-blue-600 text-white rounded-lg text-sm font-semibold hover:bg-blue-700 transition-colors\"\r\n                        >\r\n                          Create Session\r\n                        </button>\r\n                      </div>\r\n                    ))}\r\n                  </div>\r\n                ) : (\r\n                  <div className=\"bg-white dark:bg-gray-900 rounded-xl p-12 text-center shadow-sm border border-gray-200 dark:border-gray-800\">\r\n                    <p className=\"text-gray-600 dark:text-gray-400\">No classes assigned</p>\r\n                  </div>\r\n                )}\r\n              </div>\r\n            )}\r\n\r\n            {/* ACTIVE SESSIONS TAB */}\r\n            {activeTab === 'active' && (\r\n              <div>\r\n                <h2 className=\"text-2xl font-bold text-gray-900 dark:text-white mb-6 flex items-center gap-2\">\r\n                  <PlayCircle className=\"w-5 h-5 text-green-600\" />\r\n                  Active Sessions\r\n                </h2>\r\n                {activeSessions.length > 0 ? (\r\n                  <div className=\"space-y-4\">\r\n                    {activeSessions.map((session) => (\r\n                      <SessionCard\r\n                        key={session.id}\r\n                        session={session}\r\n                        onViewAttendance={() => handleViewAttendance(session.id)}\r\n                        getTimeRemaining={getSessionTimeRemaining}\r\n                        getStatusBadgeClass={getStatusBadgeClass}\r\n                        getStatusLabel={getStatusLabel}\r\n                        expanded\r\n                      />\r\n                    ))}\r\n                  </div>\r\n                ) : (\r\n                  <div className=\"bg-white dark:bg-gray-900 rounded-xl p-12 text-center shadow-sm border border-gray-200 dark:border-gray-800\">\r\n                    <CalendarX className=\"w-16 h-16 text-gray-300 dark:text-gray-600 mb-4\" />\r\n                    <p className=\"text-gray-600 dark:text-gray-400\">No active sessions</p>\r\n                    <p className=\"text-sm text-gray-500 dark:text-gray-500 mt-2\">\r\n                      Sessions will appear here when they start\r\n                    </p>\r\n                  </div>\r\n                )}\r\n              </div>\r\n            )}\r\n\r\n            {/* SCHEDULED SESSIONS TAB */}\r\n            {activeTab === 'scheduled' && (\r\n              <div>\r\n                <h2 className=\"text-2xl font-bold text-gray-900 dark:text-white mb-6 flex items-center gap-2\">\r\n                  <Calendar className=\"w-5 h-5 text-blue-600\" />\r\n                  Scheduled Sessions\r\n                </h2>\r\n                {upcomingSessions.length > 0 ? (\r\n                  <div className=\"space-y-4\">\r\n                    {upcomingSessions.map((session) => (\r\n                      <div\r\n                        key={session.id}\r\n                        className=\"bg-white dark:bg-gray-900 rounded-xl p-6 shadow-sm border border-gray-200 dark:border-gray-800\"\r\n                      >\r\n                        <div className=\"flex items-center justify-between\">\r\n                          <div>\r\n                            <p className=\"font-semibold text-gray-900 dark:text-white\">{session.courseTitle}</p>\r\n                            <p className=\"text-sm text-gray-600 dark:text-gray-400\">{session.className}</p>\r\n                            <p className=\"text-xs text-gray-500 dark:text-gray-500 mt-1\">\r\n                              {session.date}  {session.startTime} - {session.endTime}\r\n                            </p>\r\n                          </div>\r\n                          <div className=\"text-right\">\r\n                            <span className={`px-3 py-1 rounded-full text-xs font-semibold ${getStatusBadgeClass(session)}`}>\r\n                              {getStatusLabel(session)}\r\n                            </span>\r\n                            <p className=\"text-xs text-gray-500 dark:text-gray-400 mt-2\">\r\n                              {getSessionTimeRemaining(session)?.formatted}\r\n                            </p>\r\n                          </div>\r\n                        </div>\r\n                      </div>\r\n                    ))}\r\n                  </div>\r\n                ) : (\r\n                  <div className=\"bg-white dark:bg-gray-900 rounded-xl p-12 text-center shadow-sm border border-gray-200 dark:border-gray-800\">\r\n                    <Calendar className=\"w-16 h-16 text-gray-300 dark:text-gray-600 mb-4\" />\r\n                    <p className=\"text-gray-600 dark:text-gray-400\">No scheduled sessions</p>\r\n                    <button\r\n                      onClick={() => setShowCreateModal(true)}\r\n                      className=\"mt-4 px-4 py-2 bg-blue-600 text-white rounded-lg text-sm font-semibold hover:bg-blue-700 transition-colors\"\r\n                    >\r\n                      Create New Session\r\n                    </button>\r\n                  </div>\r\n                )}\r\n              </div>\r\n            )}\r\n\r\n            {/* HISTORY TAB */}\r\n            {activeTab === 'history' && (\r\n              <div>\r\n                <h2 className=\"text-2xl font-bold text-gray-900 dark:text-white mb-6 flex items-center gap-2\">\r\n                  <History className=\"w-5 h-5 text-gray-600\" />\r\n                  Session History\r\n                </h2>\r\n                {pastSessions.length > 0 ? (\r\n                  <div className=\"overflow-x-auto bg-white dark:bg-gray-900 rounded-xl shadow-sm border border-gray-200 dark:border-gray-800\">\r\n                    <table className=\"w-full text-sm\">\r\n                      <thead>\r\n                        <tr className=\"border-b border-gray-200 dark:border-gray-700\">\r\n                          <th className=\"px-4 py-3 text-left font-semibold text-gray-900 dark:text-white\">Course</th>\r\n                          <th className=\"px-4 py-3 text-left font-semibold text-gray-900 dark:text-white\">Class</th>\r\n                          <th className=\"px-4 py-3 text-left font-semibold text-gray-900 dark:text-white\">Date</th>\r\n                          <th className=\"px-4 py-3 text-left font-semibold text-gray-900 dark:text-white\">Time</th>\r\n                          <th className=\"px-4 py-3 text-left font-semibold text-gray-900 dark:text-white\">Attendance</th>\r\n                          <th className=\"px-4 py-3 text-left font-semibold text-gray-900 dark:text-white\">Status</th>\r\n                          <th className=\"px-4 py-3 text-left font-semibold text-gray-900 dark:text-white\">Action</th>\r\n                        </tr>\r\n                      </thead>\r\n                      <tbody className=\"divide-y divide-gray-200 dark:divide-gray-700\">\r\n                        {pastSessions.map((session) => (\r\n                          <tr key={session.id} className=\"hover:bg-gray-50 dark:hover:bg-gray-800 transition-colors\">\r\n                            <td className=\"px-4 py-3 text-gray-900 dark:text-white font-medium\">{session.courseTitle}</td>\r\n                            <td className=\"px-4 py-3 text-gray-700 dark:text-gray-300\">{session.className}</td>\r\n                            <td className=\"px-4 py-3 text-gray-700 dark:text-gray-300\">{session.date}</td>\r\n                            <td className=\"px-4 py-3 text-gray-700 dark:text-gray-300\">{session.startTime}</td>\r\n                            <td className=\"px-4 py-3 text-gray-700 dark:text-gray-300\">{session.attendanceCount}</td>\r\n                            <td className=\"px-4 py-3\">\r\n                              <span className={`px-3 py-1 rounded-full text-xs font-semibold ${getStatusBadgeClass(session.status)}`}>\r\n                                {getStatusLabel(session.status)}\r\n                              </span>\r\n                            </td>\r\n                            <td className=\"px-4 py-3\">\r\n                              <button\r\n                                onClick={() => handleViewAttendance(session.id)}\r\n                                className=\"text-blue-600 dark:text-blue-400 hover:underline text-sm font-semibold\"\r\n                              >\r\n                                View\r\n                              </button>\r\n                            </td>\r\n                          </tr>\r\n                        ))}\r\n                      </tbody>\r\n                    </table>\r\n                  </div>\r\n                ) : (\r\n                  <div className=\"bg-white dark:bg-gray-900 rounded-xl p-12 text-center shadow-sm border border-gray-200 dark:border-gray-800\">\r\n                    <p className=\"text-gray-600 dark:text-gray-400\">No session history yet</p>\r\n                  </div>\r\n                )}\r\n              </div>\r\n            )}\r\n\r\n            {/* ATTENDANCE TAB */}\r\n            {activeTab === 'attendance' && selectedSession && (\r\n              <div>\r\n                <div className=\"mb-6 flex items-center justify-between\">\r\n                  <div>\r\n                    <h2 className=\"text-2xl font-bold text-gray-900 dark:text-white\">{selectedSession.courseTitle}</h2>\r\n                    <p className=\"text-sm text-gray-600 dark:text-gray-400\">{selectedSession.date}  {selectedSession.startTime}</p>\r\n                  </div>\r\n                  <div className=\"flex gap-3\">\r\n                    <button\r\n                      onClick={downloadAttendanceCSV}\r\n                      className=\"px-4 py-2 bg-green-600 text-white rounded-lg text-sm font-semibold hover:bg-green-700 transition-colors flex items-center gap-2\"\r\n                    >\r\n                      <svg className=\"w-4 h-4\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\r\n                        <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M12 10v6m0 0l-3-3m3 3l3-3m2 8H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z\" />\r\n                      </svg>\r\n                      Download CSV\r\n                    </button>\r\n                    <button\r\n                      onClick={() => setActiveTab('history')}\r\n                      className=\"px-4 py-2 border border-gray-300 dark:border-gray-600 text-gray-700 dark:text-gray-300 rounded-lg text-sm font-semibold hover:bg-gray-100 dark:hover:bg-gray-800 transition-colors\"\r\n                    >\r\n                      Back to History\r\n                    </button>\r\n                  </div>\r\n                </div>\r\n\r\n                {sessionAttendance.length > 0 ? (\r\n                  <div className=\"bg-white dark:bg-gray-900 rounded-xl shadow-sm border border-gray-200 dark:border-gray-800 overflow-hidden\">\r\n                    <table className=\"w-full text-sm\">\r\n                      <thead>\r\n                        <tr className=\"border-b border-gray-200 dark:border-gray-700 bg-gray-50 dark:bg-gray-800\">\r\n                          <th className=\"px-4 py-3 text-left font-semibold text-gray-900 dark:text-white\">Student Name</th>\r\n                          <th className=\"px-4 py-3 text-left font-semibold text-gray-900 dark:text-white\">Matricule</th>\r\n                          <th className=\"px-4 py-3 text-left font-semibold text-gray-900 dark:text-white\">Timestamp</th>\r\n                          <th className=\"px-4 py-3 text-left font-semibold text-gray-900 dark:text-white\">Status</th>\r\n                        </tr>\r\n                      </thead>\r\n                      <tbody className=\"divide-y divide-gray-200 dark:divide-gray-700\">\r\n                        {sessionAttendance.map((attendance) => (\r\n                          <tr key={attendance.id} className=\"hover:bg-gray-50 dark:hover:bg-gray-800 transition-colors\">\r\n                            <td className=\"px-4 py-3 text-gray-900 dark:text-white font-medium\">{attendance.studentName}</td>\r\n                            <td className=\"px-4 py-3 text-gray-700 dark:text-gray-300\">{attendance.studentMatricule}</td>\r\n                            <td className=\"px-4 py-3 text-gray-700 dark:text-gray-300\">{attendance.timestamp}</td>\r\n                            <td className=\"px-4 py-3\">\r\n                              <span className={`px-3 py-1 rounded-full text-xs font-semibold ${attendance.status === ATTENDANCE_STATUS.PRESENT\r\n                                ? 'bg-green-100 dark:bg-green-900/30 text-green-700 dark:text-green-400'\r\n                                : attendance.status === ATTENDANCE_STATUS.LATE\r\n                                  ? 'bg-yellow-100 dark:bg-yellow-900/30 text-yellow-700 dark:text-yellow-400'\r\n                                  : 'bg-red-100 dark:bg-red-900/30 text-red-700 dark:text-red-400'\r\n                                }`}>\r\n                                {attendance.status === ATTENDANCE_STATUS.PRESENT ? 'Present' :\r\n                                  attendance.status === ATTENDANCE_STATUS.LATE ? 'Late' : 'Absent'}\r\n                              </span>\r\n                            </td>\r\n                          </tr>\r\n                        ))}\r\n                      </tbody>\r\n                    </table>\r\n                  </div>\r\n                ) : (\r\n                  <div className=\"bg-white dark:bg-gray-900 rounded-xl p-12 text-center shadow-sm border border-gray-200 dark:border-gray-800\">\r\n                    <p className=\"text-gray-600 dark:text-gray-400\">No attendance recorded yet</p>\r\n                  </div>\r\n                )}\r\n              </div>\r\n            )}\r\n          </div>\r\n        </main>\r\n      </div>\r\n\r\n      {/* CREATE SESSION MODAL */}\r\n      {showCreateModal && (\r\n        <div className=\"fixed inset-0 bg-black/50 flex items-center justify-center z-50\">\r\n          <div className=\"bg-white dark:bg-gray-900 rounded-xl p-6 shadow-xl max-w-md w-full mx-4\">\r\n            <div className=\"flex items-center justify-between mb-6\">\r\n              <h3 className=\"text-lg font-bold text-gray-900 dark:text-white\">Create New Session</h3>\r\n              <button onClick={() => {\r\n                setShowCreateModal(false);\r\n                setCreateError(null);\r\n              }} className=\"text-gray-500 hover:text-gray-700 dark:hover:text-gray-300\">\r\n                <X className=\"w-5 h-5\" />\r\n              </button>\r\n            </div>\r\n\r\n            {createError && (\r\n              <div className=\"mb-4 p-3 bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-lg\">\r\n                <p className=\"text-sm text-red-700 dark:text-red-400\">{createError}</p>\r\n              </div>\r\n            )}\r\n\r\n            <form onSubmit={handleCreateSession} className=\"space-y-4\">\r\n              <div>\r\n                <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2\">Select Course</label>\r\n                <select\r\n                  value={createForm.courseId}\r\n                  onChange={(e) => setCreateForm({ ...createForm, courseId: e.target.value })}\r\n                  className=\"w-full px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-800 text-gray-900 dark:text-white focus:ring-2 focus:ring-blue-500 focus:border-transparent\"\r\n                >\r\n                  <option value=\"\">Choose a course...</option>\r\n                  {availableCourses.map((course) => (\r\n                    <option key={course.id} value={course.id}>\r\n                      {course.courseTitle} ({course.courseCode}) - {course.program} - {course.yearLevel}\r\n                    </option>\r\n                  ))}\r\n                </select>\r\n              </div>\r\n\r\n              <div>\r\n                <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2\">Date</label>\r\n                <input\r\n                  type=\"date\"\r\n                  value={createForm.date}\r\n                  onChange={(e) => setCreateForm({ ...createForm, date: e.target.value })}\r\n                  className=\"w-full px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-800 text-gray-900 dark:text-white focus:ring-2 focus:ring-blue-500 focus:border-transparent\"\r\n                />\r\n              </div>\r\n\r\n              <div className=\"grid grid-cols-2 gap-4\">\r\n                <div>\r\n                  <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2\">Start Time</label>\r\n                  <input\r\n                    type=\"time\"\r\n                    value={createForm.startTime}\r\n                    onChange={(e) => setCreateForm({ ...createForm, startTime: e.target.value })}\r\n                    className=\"w-full px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-800 text-gray-900 dark:text-white focus:ring-2 focus:ring-blue-500 focus:border-transparent\"\r\n                  />\r\n                </div>\r\n                <div>\r\n                  <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2\">End Time</label>\r\n                  <input\r\n                    type=\"time\"\r\n                    value={createForm.endTime}\r\n                    onChange={(e) => setCreateForm({ ...createForm, endTime: e.target.value })}\r\n                    className=\"w-full px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-800 text-gray-900 dark:text-white focus:ring-2 focus:ring-blue-500 focus:border-transparent\"\r\n                  />\r\n                </div>\r\n              </div>\r\n\r\n              <div className=\"p-3 bg-blue-50 dark:bg-blue-900/20 border border-blue-200 dark:border-blue-800 rounded-lg\">\r\n                <p className=\"text-xs text-blue-700 dark:text-blue-400\">\r\n                  <strong>Session Lifecycle:</strong> Session will be <strong>Scheduled</strong> until start time,\r\n                  then automatically become <strong>Open</strong> for attendance, and <strong>Close</strong> at end time.\r\n                  Students who don't mark attendance will be marked <strong>Absent</strong>.\r\n                </p>\r\n              </div>\r\n\r\n              <div className=\"flex gap-3 pt-4\">\r\n                <button\r\n                  type=\"button\"\r\n                  onClick={() => {\r\n                    setShowCreateModal(false);\r\n                    setCreateError(null);\r\n                    setCreateForm({\r\n                      courseId: '',\r\n                      date: new Date().toISOString().split('T')[0],\r\n                      startTime: '08:00',\r\n                      endTime: '10:00'\r\n                    });\r\n                  }}\r\n                  className=\"flex-1 px-4 py-2 border border-gray-300 dark:border-gray-600 text-gray-700 dark:text-gray-300 rounded-lg font-semibold hover:bg-gray-100 dark:hover:bg-gray-800 transition-colors\"\r\n                >\r\n                  Cancel\r\n                </button>\r\n                <button\r\n                  type=\"submit\"\r\n                  disabled={creating}\r\n                  className=\"flex-1 px-4 py-2 bg-blue-600 text-white rounded-lg font-semibold hover:bg-blue-700 disabled:opacity-50 transition-colors flex items-center justify-center gap-2\"\r\n                >\r\n                  {creating ? (\r\n                    <>\r\n                      <div className=\"inline-block animate-spin rounded-full h-4 w-4 border-2 border-white border-t-transparent\" />\r\n                      Creating...\r\n                    </>\r\n                  ) : (\r\n                    'Create Session'\r\n                  )}\r\n                </button>\r\n              </div>\r\n            </form>\r\n          </div>\r\n        </div>\r\n      )}\r\n    </div>\r\n  );\r\n};\r\n\r\n/**\r\n * Session Card Component for displaying session details\r\n */\r\nconst SessionCard = ({ session, onViewAttendance, getTimeRemaining, getStatusBadgeClass, getStatusLabel, expanded = false }) => {\r\n  const timeRemaining = getTimeRemaining(session);\r\n  const now = new Date();\r\n  const sessionDate = session.session_date;\r\n  const [startHour, startMin] = session.start_time.split(':').map(Number);\r\n  const [endHour, endMin] = session.end_time.split(':').map(Number);\r\n\r\n  const startDateTimeUTC = cameroonToUTC(sessionDate, startHour, startMin);\r\n  const endDateTimeUTC = cameroonToUTC(sessionDate, endHour, endMin);\r\n  const nowUTC = new Date(now.getTime() - (now.getTimezoneOffset() * 60 * 1000));\r\n\r\n  const isOpen = nowUTC >= startDateTimeUTC && nowUTC <= endDateTimeUTC;\r\n\r\n  return (\r\n    <div className={`bg-white dark:bg-gray-900 rounded-xl p-6 shadow-sm border border-gray-200 dark:border-gray-800 ${isOpen ? 'border-l-4 border-l-green-500' : ''\r\n      }`}>\r\n      <div className=\"flex items-center justify-between\">\r\n        <div className=\"flex-1\">\r\n          <div className=\"flex items-center gap-2 mb-1\">\r\n            {isOpen && (\r\n              <span className=\"w-2 h-2 bg-green-500 rounded-full animate-pulse\" />\r\n            )}\r\n            <p className=\"font-semibold text-gray-900 dark:text-white\">{session.courseTitle}</p>\r\n          </div>\r\n          <p className=\"text-sm text-gray-600 dark:text-gray-400\">{session.className}</p>\r\n          <p className=\"text-xs text-gray-500 dark:text-gray-500 mt-1\">\r\n            {session.date}  {session.startTime} - {session.endTime}\r\n          </p>\r\n          {expanded && (\r\n            <div className=\"mt-3 flex items-center gap-4 text-sm\">\r\n              <span className=\"text-gray-600 dark:text-gray-400\">\r\n                <strong>{session.attendanceCount}</strong> students marked\r\n              </span>\r\n            </div>\r\n          )}\r\n        </div>\r\n        <div className=\"text-right flex flex-col items-end gap-2\">\r\n          <span className={`px-3 py-1 rounded-full text-xs font-semibold ${getStatusBadgeClass(session.status)}`}>\r\n            {getStatusLabel(session.status)}\r\n          </span>\r\n          {timeRemaining && (\r\n            <span className=\"text-xs text-gray-500 dark:text-gray-400\">\r\n              {timeRemaining.formatted}\r\n            </span>\r\n          )}\r\n          <button\r\n            onClick={onViewAttendance}\r\n            className=\"text-blue-600 dark:text-blue-400 hover:underline text-sm font-semibold\"\r\n          >\r\n            View Attendance\r\n          </button>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default DelegateDashboard;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}