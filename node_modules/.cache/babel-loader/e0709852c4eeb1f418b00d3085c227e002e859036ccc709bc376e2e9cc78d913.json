{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\PFI\\\\Desktop\\\\ATTENDANCE\\\\ATTENDANCE\\\\src\\\\pages\\\\StudentMarkAttendance.js\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect } from 'react';\nimport { useNavigate, useLocation } from 'react-router-dom';\nimport { supabase } from '../supabase/supabase';\nimport { useAuth } from '../contexts/AuthContext';\nimport Layout from '../components/Layout';\nimport Card from '../components/Card';\nimport Alert from '../components/Alert';\nimport Badge from '../components/Badge';\nimport { jsxDEV as _jsxDEV, Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nconst StudentMarkAttendance = () => {\n  _s();\n  const {\n    currentUser,\n    userRole,\n    loading\n  } = useAuth();\n  const navigate = useNavigate();\n  const location = useLocation();\n  const [activeSessions, setActiveSessions] = useState([]);\n  const [sessionsLoading, setSessionsLoading] = useState(true);\n  const [submittedAttendance, setSubmittedAttendance] = useState({});\n  const [marking, setMarking] = useState({});\n  const [error, setError] = useState(null);\n  const [success, setSuccess] = useState(null);\n  useEffect(() => {\n    if (loading) return;\n    if (!currentUser || userRole !== 'student') {\n      navigate('/student');\n      return;\n    }\n    fetchActiveSessions();\n\n    // Refresh sessions every 10 seconds\n    const interval = setInterval(fetchActiveSessions, 10000);\n    return () => clearInterval(interval);\n  }, [currentUser, userRole, loading, navigate]);\n  const fetchActiveSessions = async () => {\n    try {\n      setSessionsLoading(true);\n      setError(null);\n\n      // Get student's class\n      const {\n        data: userData,\n        error: userError\n      } = await supabase.from('users').select('class_id').eq('id', currentUser.id).single();\n      if (userError) throw userError;\n      if (!userData.class_id) {\n        setActiveSessions([]);\n        return;\n      }\n\n      // Get active sessions for student's class\n      const {\n        data: sessions,\n        error: sessionsError\n      } = await supabase.from('sessions').select(`\n          id,\n          token,\n          created_at,\n          expires_at,\n          class_id,\n          classes (\n            class_name\n          )\n        `).eq('class_id', userData.class_id).gt('expires_at', new Date().toISOString()).order('created_at', {\n        ascending: false\n      });\n      if (sessionsError) throw sessionsError;\n      setActiveSessions(sessions || []);\n\n      // Check which sessions the student has already submitted for\n      if (currentUser !== null && currentUser !== void 0 && currentUser.id && sessions && sessions.length > 0) {\n        const {\n          data: submissions,\n          error: submissionsError\n        } = await supabase.from('attendance').select('session_id, status').eq('student_id', currentUser.id).in('session_id', sessions.map(s => s.id));\n        if (!submissionsError && submissions) {\n          const submitted = {};\n          submissions.forEach(sub => {\n            submitted[sub.session_id] = sub.status;\n          });\n          setSubmittedAttendance(submitted);\n        }\n      }\n    } catch (err) {\n      console.error('Error fetching sessions:', err);\n      setError(err.message);\n    } finally {\n      setSessionsLoading(false);\n    }\n  };\n  const determineAttendanceStatus = session => {\n    // Safety check\n    if (!session || !session.end_time) {\n      console.warn('âš ï¸ Session or end_time is missing:', session);\n      return 'present'; // Default to present if data is missing\n    }\n\n    // Get the session date and end time\n    const [endHour, endMin] = session.end_time.split(':');\n\n    // Build end time for today\n    const sessionDate = new Date(session.created_at).toISOString().split('T')[0];\n    const endTimeStr = `${sessionDate}T${session.end_time}:00`;\n    const sessionEndTime = new Date(endTimeStr);\n    const now = new Date();\n\n    // If current time is AFTER session end time, mark as LATE\n    // Otherwise, mark as PRESENT\n    return now > sessionEndTime ? 'late' : 'present';\n  };\n  const handleMarkAttendance = async sessionId => {\n    try {\n      setMarking(prev => ({\n        ...prev,\n        [sessionId]: true\n      }));\n      setError(null);\n      setSuccess(null);\n\n      // Check if already submitted\n      if (submittedAttendance[sessionId]) {\n        setError(`You have already marked attendance for this session`);\n        setMarking(prev => ({\n          ...prev,\n          [sessionId]: false\n        }));\n        return;\n      }\n\n      // Find the session to determine status\n      const session = activeSessions.find(s => s.id === sessionId);\n      if (!session) {\n        setError('Session not found');\n        setMarking(prev => ({\n          ...prev,\n          [sessionId]: false\n        }));\n        return;\n      }\n      const status = determineAttendanceStatus(session);\n\n      // Insert attendance record\n      const {\n        error: insertError\n      } = await supabase.from('attendance').insert([{\n        session_id: sessionId,\n        student_id: currentUser.id,\n        status: status,\n        timestamp: new Date().toISOString()\n      }]);\n      if (insertError) throw insertError;\n\n      // Update local state\n      setSubmittedAttendance(prev => ({\n        ...prev,\n        [sessionId]: status\n      }));\n\n      // Show success message\n      setSuccess(`âœ… Attendance marked as ${status.toUpperCase()}`);\n\n      // Clear success message after 3 seconds\n      setTimeout(() => setSuccess(null), 3000);\n    } catch (err) {\n      console.error('Error marking attendance:', err);\n      setError(`âŒ Error: ${err.message}`);\n    } finally {\n      setMarking(prev => ({\n        ...prev,\n        [sessionId]: false\n      }));\n    }\n  };\n  if (loading) {\n    return /*#__PURE__*/_jsxDEV(Layout, {\n      role: \"student\",\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          display: 'flex',\n          alignItems: 'center',\n          justifyContent: 'center',\n          height: '400px'\n        },\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          style: {\n            textAlign: 'center'\n          },\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            style: {\n              animation: 'spin 1s linear infinite',\n              fontSize: '32px',\n              marginBottom: '15px'\n            },\n            children: \"\\u23F3\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 183,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            style: {\n              fontSize: '16px',\n              color: '#666'\n            },\n            children: \"Loading attendance sessions...\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 184,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 182,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 181,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 180,\n      columnNumber: 7\n    }, this);\n  }\n  if (!currentUser || userRole !== 'student') return null;\n  return /*#__PURE__*/_jsxDEV(Layout, {\n    role: \"student\",\n    children: /*#__PURE__*/_jsxDEV(\"div\", {\n      style: {\n        maxWidth: '1000px',\n        margin: '0 auto'\n      },\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          marginBottom: '32px'\n        },\n        children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n          style: {\n            margin: '0 0 8px 0',\n            fontSize: '32px',\n            fontWeight: '700',\n            color: '#1f2937'\n          },\n          children: \"\\uD83D\\uDCDD Mark Attendance\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 198,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          style: {\n            margin: '0',\n            fontSize: '16px',\n            color: '#6b7280'\n          },\n          children: \"Track and submit your attendance for active sessions\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 201,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 197,\n        columnNumber: 9\n      }, this), error && /*#__PURE__*/_jsxDEV(Alert, {\n        type: \"error\",\n        message: error\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 207,\n        columnNumber: 19\n      }, this), success && /*#__PURE__*/_jsxDEV(Alert, {\n        type: \"success\",\n        message: success\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 208,\n        columnNumber: 21\n      }, this), sessionsLoading ? /*#__PURE__*/_jsxDEV(Card, {\n        style: {\n          boxShadow: '0 1px 3px rgba(0,0,0,0.1)'\n        },\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          style: {\n            padding: '40px',\n            textAlign: 'center'\n          },\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            style: {\n              fontSize: '48px',\n              marginBottom: '16px',\n              animation: 'spin 2s linear infinite'\n            },\n            children: \"\\u23F3\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 214,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n            style: {\n              margin: '0',\n              fontSize: '16px',\n              color: '#6b7280'\n            },\n            children: \"Fetching your active attendance sessions...\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 215,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 213,\n          columnNumber: 13\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 212,\n        columnNumber: 11\n      }, this) : activeSessions.length === 0 ?\n      /*#__PURE__*/\n      // No Sessions State\n      _jsxDEV(_Fragment, {\n        children: [/*#__PURE__*/_jsxDEV(Card, {\n          style: {\n            boxShadow: '0 1px 3px rgba(0,0,0,0.1)',\n            marginBottom: '24px'\n          },\n          children: /*#__PURE__*/_jsxDEV(\"div\", {\n            style: {\n              padding: '48px 32px',\n              textAlign: 'center'\n            },\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              style: {\n                fontSize: '64px',\n                marginBottom: '16px'\n              },\n              children: \"\\uD83D\\uDCED\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 225,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"h2\", {\n              style: {\n                margin: '0 0 8px 0',\n                fontSize: '24px',\n                fontWeight: '600',\n                color: '#1f2937'\n              },\n              children: \"No Active Sessions Yet\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 226,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n              style: {\n                margin: '0 0 16px 0',\n                fontSize: '16px',\n                color: '#6b7280',\n                maxWidth: '400px',\n                marginLeft: 'auto',\n                marginRight: 'auto'\n              },\n              children: \"There are currently no active attendance sessions for your enrolled courses. Check back soon!\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 229,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n              onClick: fetchActiveSessions,\n              style: {\n                padding: '10px 24px',\n                backgroundColor: '#3b82f6',\n                color: 'white',\n                border: 'none',\n                borderRadius: '6px',\n                fontSize: '14px',\n                fontWeight: '600',\n                cursor: 'pointer',\n                transition: 'background-color 0.2s'\n              },\n              onMouseEnter: e => e.target.style.backgroundColor = '#2563eb',\n              onMouseLeave: e => e.target.style.backgroundColor = '#3b82f6',\n              children: \"\\uD83D\\uDD04 Refresh\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 232,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 224,\n            columnNumber: 15\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 223,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          style: {\n            display: 'grid',\n            gridTemplateColumns: 'repeat(auto-fit, minmax(280px, 1fr))',\n            gap: '16px',\n            marginBottom: '24px'\n          },\n          children: [/*#__PURE__*/_jsxDEV(Card, {\n            style: {\n              boxShadow: '0 1px 3px rgba(0,0,0,0.1)'\n            },\n            children: /*#__PURE__*/_jsxDEV(\"div\", {\n              style: {\n                padding: '24px'\n              },\n              children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                style: {\n                  fontSize: '32px',\n                  marginBottom: '12px'\n                },\n                children: \"\\u2705\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 262,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                style: {\n                  margin: '0 0 4px 0',\n                  fontSize: '14px',\n                  color: '#6b7280'\n                },\n                children: \"Attendance Status\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 263,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                style: {\n                  margin: '0',\n                  fontSize: '20px',\n                  fontWeight: '700',\n                  color: '#1f2937'\n                },\n                children: \"0 Sessions\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 264,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 261,\n              columnNumber: 17\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 260,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(Card, {\n            style: {\n              boxShadow: '0 1px 3px rgba(0,0,0,0.1)'\n            },\n            children: /*#__PURE__*/_jsxDEV(\"div\", {\n              style: {\n                padding: '24px'\n              },\n              children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                style: {\n                  fontSize: '32px',\n                  marginBottom: '12px'\n                },\n                children: \"\\uD83D\\uDCCA\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 269,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                style: {\n                  margin: '0 0 4px 0',\n                  fontSize: '14px',\n                  color: '#6b7280'\n                },\n                children: \"Attendance Rate\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 270,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                style: {\n                  margin: '0',\n                  fontSize: '20px',\n                  fontWeight: '700',\n                  color: '#1f2937'\n                },\n                children: \"-- %\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 271,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 268,\n              columnNumber: 17\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 267,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(Card, {\n            style: {\n              boxShadow: '0 1px 3px rgba(0,0,0,0.1)'\n            },\n            children: /*#__PURE__*/_jsxDEV(\"div\", {\n              style: {\n                padding: '24px'\n              },\n              children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                style: {\n                  fontSize: '32px',\n                  marginBottom: '12px'\n                },\n                children: \"\\u23F0\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 276,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                style: {\n                  margin: '0 0 4px 0',\n                  fontSize: '14px',\n                  color: '#6b7280'\n                },\n                children: \"Last Updated\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 277,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                style: {\n                  margin: '0',\n                  fontSize: '20px',\n                  fontWeight: '700',\n                  color: '#1f2937'\n                },\n                children: \"Just Now\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 278,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 275,\n              columnNumber: 17\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 274,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 254,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true) :\n      /*#__PURE__*/\n      // Active Sessions\n      _jsxDEV(\"div\", {\n        style: {\n          marginBottom: '32px'\n        },\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          style: {\n            marginBottom: '20px'\n          },\n          children: /*#__PURE__*/_jsxDEV(\"h2\", {\n            style: {\n              margin: '0',\n              fontSize: '20px',\n              fontWeight: '700',\n              color: '#1f2937'\n            },\n            children: [\"Active Sessions (\", activeSessions.length, \")\"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 287,\n            columnNumber: 15\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 286,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          style: {\n            display: 'grid',\n            gridTemplateColumns: '1fr',\n            gap: '16px'\n          },\n          children: activeSessions.map(session => {\n            var _session$classes;\n            const isSubmitted = submittedAttendance[session.id];\n            const isMarking = marking[session.id];\n            const status = determineAttendanceStatus(session);\n            const startTime = new Date(session.created_at);\n            const expireTime = new Date(session.expires_at);\n            const now = new Date();\n            const timeRemaining = Math.max(0, Math.floor((expireTime - now) / 1000 / 60));\n            return /*#__PURE__*/_jsxDEV(Card, {\n              style: {\n                boxShadow: '0 1px 3px rgba(0,0,0,0.1)',\n                borderLeft: `4px solid ${isSubmitted ? '#10b981' : '#3b82f6'}`,\n                borderRadius: '8px'\n              },\n              children: /*#__PURE__*/_jsxDEV(\"div\", {\n                style: {\n                  padding: '24px'\n                },\n                children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                  style: {\n                    display: 'flex',\n                    justifyContent: 'space-between',\n                    alignItems: 'start',\n                    marginBottom: '16px'\n                  },\n                  children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                    style: {\n                      flex: 1\n                    },\n                    children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n                      style: {\n                        margin: '0 0 6px 0',\n                        fontSize: '18px',\n                        fontWeight: '700',\n                        color: '#1f2937'\n                      },\n                      children: [\"\\uD83D\\uDCDA \", ((_session$classes = session.classes) === null || _session$classes === void 0 ? void 0 : _session$classes.class_name) || 'Unknown Class']\n                    }, void 0, true, {\n                      fileName: _jsxFileName,\n                      lineNumber: 314,\n                      columnNumber: 27\n                    }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                      style: {\n                        margin: '0',\n                        fontSize: '13px',\n                        color: '#6b7280',\n                        fontFamily: 'monospace'\n                      },\n                      children: [\"Session: \", session.token.substring(0, 12), \"...\"]\n                    }, void 0, true, {\n                      fileName: _jsxFileName,\n                      lineNumber: 317,\n                      columnNumber: 27\n                    }, this)]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 313,\n                    columnNumber: 25\n                  }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                    style: {\n                      textAlign: 'right'\n                    },\n                    children: [isSubmitted && /*#__PURE__*/_jsxDEV(\"div\", {\n                      style: {\n                        padding: '6px 12px',\n                        backgroundColor: isSubmitted === 'present' ? '#d1fae5' : '#fef3c7',\n                        color: isSubmitted === 'present' ? '#065f46' : '#92400e',\n                        borderRadius: '20px',\n                        fontSize: '12px',\n                        fontWeight: '600',\n                        textTransform: 'uppercase',\n                        display: 'inline-block'\n                      },\n                      children: isSubmitted === 'present' ? 'âœ… Present' : 'â±ï¸ Late'\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 323,\n                      columnNumber: 29\n                    }, this), !isSubmitted && /*#__PURE__*/_jsxDEV(\"div\", {\n                      style: {\n                        padding: '6px 12px',\n                        backgroundColor: '#dbeafe',\n                        color: '#1e40af',\n                        borderRadius: '20px',\n                        fontSize: '12px',\n                        fontWeight: '600',\n                        textTransform: 'uppercase',\n                        display: 'inline-block'\n                      },\n                      children: \"\\u23F3 Active\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 337,\n                      columnNumber: 29\n                    }, this)]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 321,\n                    columnNumber: 25\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 312,\n                  columnNumber: 23\n                }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                  style: {\n                    display: 'grid',\n                    gridTemplateColumns: 'repeat(auto-fit, minmax(150px, 1fr))',\n                    gap: '16px',\n                    marginBottom: '20px',\n                    padding: '16px',\n                    backgroundColor: '#f9fafb',\n                    borderRadius: '6px'\n                  },\n                  children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                    children: [/*#__PURE__*/_jsxDEV(\"p\", {\n                      style: {\n                        margin: '0 0 4px 0',\n                        fontSize: '12px',\n                        color: '#6b7280',\n                        fontWeight: '600'\n                      },\n                      children: \"Started\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 364,\n                      columnNumber: 27\n                    }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                      style: {\n                        margin: '0',\n                        fontSize: '14px',\n                        fontWeight: '500',\n                        color: '#1f2937'\n                      },\n                      children: startTime.toLocaleTimeString('en-US', {\n                        hour: '2-digit',\n                        minute: '2-digit'\n                      })\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 365,\n                      columnNumber: 27\n                    }, this)]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 363,\n                    columnNumber: 25\n                  }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                    children: [/*#__PURE__*/_jsxDEV(\"p\", {\n                      style: {\n                        margin: '0 0 4px 0',\n                        fontSize: '12px',\n                        color: '#6b7280',\n                        fontWeight: '600'\n                      },\n                      children: \"Expires In\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 370,\n                      columnNumber: 27\n                    }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                      style: {\n                        margin: '0',\n                        fontSize: '14px',\n                        fontWeight: '500',\n                        color: '#1f2937'\n                      },\n                      children: [timeRemaining, \"m remaining\"]\n                    }, void 0, true, {\n                      fileName: _jsxFileName,\n                      lineNumber: 371,\n                      columnNumber: 27\n                    }, this)]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 369,\n                    columnNumber: 25\n                  }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                    children: [/*#__PURE__*/_jsxDEV(\"p\", {\n                      style: {\n                        margin: '0 0 4px 0',\n                        fontSize: '12px',\n                        color: '#6b7280',\n                        fontWeight: '600'\n                      },\n                      children: \"Status\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 376,\n                      columnNumber: 27\n                    }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                      style: {\n                        margin: '0',\n                        fontSize: '14px',\n                        fontWeight: '500',\n                        color: '#1f2937'\n                      },\n                      children: !isSubmitted ? `Will mark as ${status.toUpperCase()}` : `Marked as ${isSubmitted.toUpperCase()}`\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 377,\n                      columnNumber: 27\n                    }, this)]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 375,\n                    columnNumber: 25\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 354,\n                  columnNumber: 23\n                }, this), !isSubmitted && /*#__PURE__*/_jsxDEV(\"div\", {\n                  style: {\n                    padding: '12px',\n                    backgroundColor: '#eff6ff',\n                    borderRadius: '6px',\n                    marginBottom: '16px',\n                    borderLeft: '3px solid #3b82f6'\n                  },\n                  children: /*#__PURE__*/_jsxDEV(\"p\", {\n                    style: {\n                      margin: '0',\n                      fontSize: '13px',\n                      color: '#1e40af'\n                    },\n                    children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n                      children: \"\\u26A0\\uFE0F Note:\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 393,\n                      columnNumber: 29\n                    }, this), \" You can mark attendance only ONCE per session. You will be marked as \", status.toUpperCase(), \" based on the current time. Submit before session ends!\"]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 392,\n                    columnNumber: 27\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 385,\n                  columnNumber: 25\n                }, this), isSubmitted && /*#__PURE__*/_jsxDEV(\"div\", {\n                  style: {\n                    padding: '12px',\n                    backgroundColor: '#d1fae5',\n                    borderRadius: '6px',\n                    marginBottom: '16px',\n                    borderLeft: '3px solid #10b981'\n                  },\n                  children: /*#__PURE__*/_jsxDEV(\"p\", {\n                    style: {\n                      margin: '0',\n                      fontSize: '13px',\n                      color: '#065f46'\n                    },\n                    children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n                      children: \"\\u2705 Already Marked:\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 408,\n                      columnNumber: 29\n                    }, this), \" You submitted attendance as \", isSubmitted.toUpperCase(), \". You cannot mark again for this session.\"]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 407,\n                    columnNumber: 27\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 400,\n                  columnNumber: 25\n                }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                  onClick: () => handleMarkAttendance(session.id),\n                  disabled: isSubmitted || isMarking,\n                  style: {\n                    width: '100%',\n                    padding: '12px 16px',\n                    backgroundColor: isSubmitted ? '#d1d5db' : '#3b82f6',\n                    color: 'white',\n                    border: 'none',\n                    borderRadius: '6px',\n                    fontSize: '15px',\n                    fontWeight: '600',\n                    cursor: isSubmitted || isMarking ? 'not-allowed' : 'pointer',\n                    opacity: isSubmitted || isMarking ? 0.6 : 1,\n                    transition: 'background-color 0.2s'\n                  },\n                  onMouseEnter: e => {\n                    if (!isSubmitted && !isMarking) {\n                      e.target.style.backgroundColor = '#2563eb';\n                    }\n                  },\n                  onMouseLeave: e => {\n                    if (!isSubmitted && !isMarking) {\n                      e.target.style.backgroundColor = '#3b82f6';\n                    }\n                  },\n                  children: isMarking ? 'â³ Submitting...' : isSubmitted ? `âœ“ MARKED ALREADY (${isSubmitted.toUpperCase()})` : `âœ… Mark ${status.toUpperCase()}`\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 414,\n                  columnNumber: 23\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 311,\n                columnNumber: 21\n              }, this)\n            }, session.id, false, {\n              fileName: _jsxFileName,\n              lineNumber: 303,\n              columnNumber: 19\n            }, this);\n          })\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 292,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 285,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(Card, {\n        style: {\n          boxShadow: '0 1px 3px rgba(0,0,0,0.1)',\n          marginTop: '32px'\n        },\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          style: {\n            padding: '24px'\n          },\n          children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n            style: {\n              margin: '0 0 24px 0',\n              fontSize: '18px',\n              fontWeight: '700',\n              color: '#1f2937'\n            },\n            children: \"\\uD83D\\uDCCB How Attendance Works\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 454,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            style: {\n              display: 'grid',\n              gridTemplateColumns: 'repeat(auto-fit, minmax(300px, 1fr))',\n              gap: '20px'\n            },\n            children: [{\n              step: '1',\n              title: 'Instructor Starts Session',\n              desc: 'Your instructor creates an attendance session in their dashboard',\n              icon: 'ğŸ‘¨â€ğŸ«'\n            }, {\n              step: '2',\n              title: 'Session Appears Here',\n              desc: 'Active sessions automatically show on this page in real-time',\n              icon: 'ğŸ”„'\n            }, {\n              step: '3',\n              title: 'Submit Attendance',\n              desc: 'Click the \"Mark\" button to submit your attendance',\n              icon: 'ğŸ‘†'\n            }, {\n              step: '4',\n              title: 'Automatic Status',\n              desc: 'PRESENT if within 15 min, otherwise LATE',\n              icon: 'â±ï¸'\n            }, {\n              step: '5',\n              title: 'Immutable Record',\n              desc: 'Once submitted, your attendance record cannot be changed',\n              icon: 'ğŸ”’'\n            }, {\n              step: '6',\n              title: 'Check Your History',\n              desc: 'View all your attendance records in your history page',\n              icon: 'ğŸ“Š'\n            }].map((item, idx) => /*#__PURE__*/_jsxDEV(\"div\", {\n              style: {\n                padding: '20px',\n                backgroundColor: '#f9fafb',\n                borderRadius: '8px',\n                border: '1px solid #e5e7eb'\n              },\n              children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                style: {\n                  display: 'flex',\n                  alignItems: 'center',\n                  marginBottom: '12px',\n                  gap: '12px'\n                },\n                children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                  style: {\n                    width: '32px',\n                    height: '32px',\n                    borderRadius: '50%',\n                    backgroundColor: '#3b82f6',\n                    color: 'white',\n                    display: 'flex',\n                    alignItems: 'center',\n                    justifyContent: 'center',\n                    fontWeight: '700',\n                    fontSize: '14px'\n                  },\n                  children: item.step\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 516,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                  style: {\n                    fontSize: '20px'\n                  },\n                  children: item.icon\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 530,\n                  columnNumber: 21\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 510,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"h3\", {\n                style: {\n                  margin: '0 0 6px 0',\n                  fontSize: '14px',\n                  fontWeight: '700',\n                  color: '#1f2937'\n                },\n                children: item.title\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 532,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                style: {\n                  margin: '0',\n                  fontSize: '13px',\n                  color: '#6b7280',\n                  lineHeight: '1.5'\n                },\n                children: item.desc\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 535,\n                columnNumber: 19\n              }, this)]\n            }, idx, true, {\n              fileName: _jsxFileName,\n              lineNumber: 501,\n              columnNumber: 17\n            }, this))\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 458,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 453,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 452,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 195,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 194,\n    columnNumber: 5\n  }, this);\n};\n_s(StudentMarkAttendance, \"8Ph4urfoyY3osXLtpS06s/p9CnE=\", false, function () {\n  return [useAuth, useNavigate, useLocation];\n});\n_c = StudentMarkAttendance;\nexport default StudentMarkAttendance;\nvar _c;\n$RefreshReg$(_c, \"StudentMarkAttendance\");","map":{"version":3,"names":["React","useState","useEffect","useNavigate","useLocation","supabase","useAuth","Layout","Card","Alert","Badge","jsxDEV","_jsxDEV","Fragment","_Fragment","StudentMarkAttendance","_s","currentUser","userRole","loading","navigate","location","activeSessions","setActiveSessions","sessionsLoading","setSessionsLoading","submittedAttendance","setSubmittedAttendance","marking","setMarking","error","setError","success","setSuccess","fetchActiveSessions","interval","setInterval","clearInterval","data","userData","userError","from","select","eq","id","single","class_id","sessions","sessionsError","gt","Date","toISOString","order","ascending","length","submissions","submissionsError","in","map","s","submitted","forEach","sub","session_id","status","err","console","message","determineAttendanceStatus","session","end_time","warn","endHour","endMin","split","sessionDate","created_at","endTimeStr","sessionEndTime","now","handleMarkAttendance","sessionId","prev","find","insertError","insert","student_id","timestamp","toUpperCase","setTimeout","role","children","style","display","alignItems","justifyContent","height","textAlign","animation","fontSize","marginBottom","fileName","_jsxFileName","lineNumber","columnNumber","color","maxWidth","margin","fontWeight","type","boxShadow","padding","marginLeft","marginRight","onClick","backgroundColor","border","borderRadius","cursor","transition","onMouseEnter","e","target","onMouseLeave","gridTemplateColumns","gap","_session$classes","isSubmitted","isMarking","startTime","expireTime","expires_at","timeRemaining","Math","max","floor","borderLeft","flex","classes","class_name","fontFamily","token","substring","textTransform","toLocaleTimeString","hour","minute","disabled","width","opacity","marginTop","step","title","desc","icon","item","idx","lineHeight","_c","$RefreshReg$"],"sources":["C:/Users/PFI/Desktop/ATTENDANCE/ATTENDANCE/src/pages/StudentMarkAttendance.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\r\nimport { useNavigate, useLocation } from 'react-router-dom';\r\nimport { supabase } from '../supabase/supabase';\r\nimport { useAuth } from '../contexts/AuthContext';\r\nimport Layout from '../components/Layout';\r\nimport Card from '../components/Card';\r\nimport Alert from '../components/Alert';\r\nimport Badge from '../components/Badge';\r\n\r\nconst StudentMarkAttendance = () => {\r\n  const { currentUser, userRole, loading } = useAuth();\r\n  const navigate = useNavigate();\r\n  const location = useLocation();\r\n  const [activeSessions, setActiveSessions] = useState([]);\r\n  const [sessionsLoading, setSessionsLoading] = useState(true);\r\n  const [submittedAttendance, setSubmittedAttendance] = useState({});\r\n  const [marking, setMarking] = useState({});\r\n  const [error, setError] = useState(null);\r\n  const [success, setSuccess] = useState(null);\r\n\r\n  useEffect(() => {\r\n    if (loading) return;\r\n\r\n    if (!currentUser || userRole !== 'student') {\r\n      navigate('/student');\r\n      return;\r\n    }\r\n\r\n    fetchActiveSessions();\r\n\r\n    // Refresh sessions every 10 seconds\r\n    const interval = setInterval(fetchActiveSessions, 10000);\r\n    return () => clearInterval(interval);\r\n  }, [currentUser, userRole, loading, navigate]);\r\n\r\n  const fetchActiveSessions = async () => {\r\n    try {\r\n      setSessionsLoading(true);\r\n      setError(null);\r\n\r\n      // Get student's class\r\n      const { data: userData, error: userError } = await supabase\r\n        .from('users')\r\n        .select('class_id')\r\n        .eq('id', currentUser.id)\r\n        .single();\r\n\r\n      if (userError) throw userError;\r\n\r\n      if (!userData.class_id) {\r\n        setActiveSessions([]);\r\n        return;\r\n      }\r\n\r\n      // Get active sessions for student's class\r\n      const { data: sessions, error: sessionsError } = await supabase\r\n        .from('sessions')\r\n        .select(`\r\n          id,\r\n          token,\r\n          created_at,\r\n          expires_at,\r\n          class_id,\r\n          classes (\r\n            class_name\r\n          )\r\n        `)\r\n        .eq('class_id', userData.class_id)\r\n        .gt('expires_at', new Date().toISOString())\r\n        .order('created_at', { ascending: false });\r\n\r\n      if (sessionsError) throw sessionsError;\r\n\r\n      setActiveSessions(sessions || []);\r\n\r\n      // Check which sessions the student has already submitted for\r\n      if (currentUser?.id && sessions && sessions.length > 0) {\r\n        const { data: submissions, error: submissionsError } = await supabase\r\n          .from('attendance')\r\n          .select('session_id, status')\r\n          .eq('student_id', currentUser.id)\r\n          .in('session_id', sessions.map(s => s.id));\r\n\r\n        if (!submissionsError && submissions) {\r\n          const submitted = {};\r\n          submissions.forEach(sub => {\r\n            submitted[sub.session_id] = sub.status;\r\n          });\r\n          setSubmittedAttendance(submitted);\r\n        }\r\n      }\r\n    } catch (err) {\r\n      console.error('Error fetching sessions:', err);\r\n      setError(err.message);\r\n    } finally {\r\n      setSessionsLoading(false);\r\n    }\r\n  };\r\n\r\n  const determineAttendanceStatus = (session) => {\r\n    // Safety check\r\n    if (!session || !session.end_time) {\r\n      console.warn('âš ï¸ Session or end_time is missing:', session);\r\n      return 'present'; // Default to present if data is missing\r\n    }\r\n\r\n    // Get the session date and end time\r\n    const [endHour, endMin] = session.end_time.split(':');\r\n    \r\n    // Build end time for today\r\n    const sessionDate = new Date(session.created_at).toISOString().split('T')[0];\r\n    const endTimeStr = `${sessionDate}T${session.end_time}:00`;\r\n    const sessionEndTime = new Date(endTimeStr);\r\n    \r\n    const now = new Date();\r\n\r\n    // If current time is AFTER session end time, mark as LATE\r\n    // Otherwise, mark as PRESENT\r\n    return now > sessionEndTime ? 'late' : 'present';\r\n  };\r\n\r\n  const handleMarkAttendance = async (sessionId) => {\r\n    try {\r\n      setMarking(prev => ({ ...prev, [sessionId]: true }));\r\n      setError(null);\r\n      setSuccess(null);\r\n\r\n      // Check if already submitted\r\n      if (submittedAttendance[sessionId]) {\r\n        setError(`You have already marked attendance for this session`);\r\n        setMarking(prev => ({ ...prev, [sessionId]: false }));\r\n        return;\r\n      }\r\n\r\n      // Find the session to determine status\r\n      const session = activeSessions.find(s => s.id === sessionId);\r\n      if (!session) {\r\n        setError('Session not found');\r\n        setMarking(prev => ({ ...prev, [sessionId]: false }));\r\n        return;\r\n      }\r\n\r\n      const status = determineAttendanceStatus(session);\r\n\r\n      // Insert attendance record\r\n      const { error: insertError } = await supabase\r\n        .from('attendance')\r\n        .insert([\r\n          {\r\n            session_id: sessionId,\r\n            student_id: currentUser.id,\r\n            status: status,\r\n            timestamp: new Date().toISOString(),\r\n          }\r\n        ]);\r\n\r\n      if (insertError) throw insertError;\r\n\r\n      // Update local state\r\n      setSubmittedAttendance(prev => ({\r\n        ...prev,\r\n        [sessionId]: status\r\n      }));\r\n\r\n      // Show success message\r\n      setSuccess(`âœ… Attendance marked as ${status.toUpperCase()}`);\r\n\r\n      // Clear success message after 3 seconds\r\n      setTimeout(() => setSuccess(null), 3000);\r\n    } catch (err) {\r\n      console.error('Error marking attendance:', err);\r\n      setError(`âŒ Error: ${err.message}`);\r\n    } finally {\r\n      setMarking(prev => ({ ...prev, [sessionId]: false }));\r\n    }\r\n  };\r\n\r\n  if (loading) {\r\n    return (\r\n      <Layout role=\"student\">\r\n        <div style={{ display: 'flex', alignItems: 'center', justifyContent: 'center', height: '400px' }}>\r\n          <div style={{ textAlign: 'center' }}>\r\n            <div style={{ animation: 'spin 1s linear infinite', fontSize: '32px', marginBottom: '15px' }}>â³</div>\r\n            <div style={{ fontSize: '16px', color: '#666' }}>Loading attendance sessions...</div>\r\n          </div>\r\n        </div>\r\n      </Layout>\r\n    );\r\n  }\r\n\r\n  if (!currentUser || userRole !== 'student') return null;\r\n\r\n  return (\r\n    <Layout role=\"student\">\r\n      <div style={{ maxWidth: '1000px', margin: '0 auto' }}>\r\n        {/* Header */}\r\n        <div style={{ marginBottom: '32px' }}>\r\n          <h1 style={{ margin: '0 0 8px 0', fontSize: '32px', fontWeight: '700', color: '#1f2937' }}>\r\n            ğŸ“ Mark Attendance\r\n          </h1>\r\n          <p style={{ margin: '0', fontSize: '16px', color: '#6b7280' }}>\r\n            Track and submit your attendance for active sessions\r\n          </p>\r\n        </div>\r\n\r\n        {/* Alerts */}\r\n        {error && <Alert type=\"error\" message={error} />}\r\n        {success && <Alert type=\"success\" message={success} />}\r\n\r\n        {/* Loading State */}\r\n        {sessionsLoading ? (\r\n          <Card style={{ boxShadow: '0 1px 3px rgba(0,0,0,0.1)' }}>\r\n            <div style={{ padding: '40px', textAlign: 'center' }}>\r\n              <div style={{ fontSize: '48px', marginBottom: '16px', animation: 'spin 2s linear infinite' }}>â³</div>\r\n              <p style={{ margin: '0', fontSize: '16px', color: '#6b7280' }}>\r\n                Fetching your active attendance sessions...\r\n              </p>\r\n            </div>\r\n          </Card>\r\n        ) : activeSessions.length === 0 ? (\r\n          // No Sessions State\r\n          <>\r\n            <Card style={{ boxShadow: '0 1px 3px rgba(0,0,0,0.1)', marginBottom: '24px' }}>\r\n              <div style={{ padding: '48px 32px', textAlign: 'center' }}>\r\n                <div style={{ fontSize: '64px', marginBottom: '16px' }}>ğŸ“­</div>\r\n                <h2 style={{ margin: '0 0 8px 0', fontSize: '24px', fontWeight: '600', color: '#1f2937' }}>\r\n                  No Active Sessions Yet\r\n                </h2>\r\n                <p style={{ margin: '0 0 16px 0', fontSize: '16px', color: '#6b7280', maxWidth: '400px', marginLeft: 'auto', marginRight: 'auto' }}>\r\n                  There are currently no active attendance sessions for your enrolled courses. Check back soon!\r\n                </p>\r\n                <button\r\n                  onClick={fetchActiveSessions}\r\n                  style={{\r\n                    padding: '10px 24px',\r\n                    backgroundColor: '#3b82f6',\r\n                    color: 'white',\r\n                    border: 'none',\r\n                    borderRadius: '6px',\r\n                    fontSize: '14px',\r\n                    fontWeight: '600',\r\n                    cursor: 'pointer',\r\n                    transition: 'background-color 0.2s'\r\n                  }}\r\n                  onMouseEnter={(e) => e.target.style.backgroundColor = '#2563eb'}\r\n                  onMouseLeave={(e) => e.target.style.backgroundColor = '#3b82f6'}\r\n                >\r\n                  ğŸ”„ Refresh\r\n                </button>\r\n              </div>\r\n            </Card>\r\n\r\n            {/* Status Cards */}\r\n            <div style={{\r\n              display: 'grid',\r\n              gridTemplateColumns: 'repeat(auto-fit, minmax(280px, 1fr))',\r\n              gap: '16px',\r\n              marginBottom: '24px'\r\n            }}>\r\n              <Card style={{ boxShadow: '0 1px 3px rgba(0,0,0,0.1)' }}>\r\n                <div style={{ padding: '24px' }}>\r\n                  <div style={{ fontSize: '32px', marginBottom: '12px' }}>âœ…</div>\r\n                  <p style={{ margin: '0 0 4px 0', fontSize: '14px', color: '#6b7280' }}>Attendance Status</p>\r\n                  <p style={{ margin: '0', fontSize: '20px', fontWeight: '700', color: '#1f2937' }}>0 Sessions</p>\r\n                </div>\r\n              </Card>\r\n              <Card style={{ boxShadow: '0 1px 3px rgba(0,0,0,0.1)' }}>\r\n                <div style={{ padding: '24px' }}>\r\n                  <div style={{ fontSize: '32px', marginBottom: '12px' }}>ğŸ“Š</div>\r\n                  <p style={{ margin: '0 0 4px 0', fontSize: '14px', color: '#6b7280' }}>Attendance Rate</p>\r\n                  <p style={{ margin: '0', fontSize: '20px', fontWeight: '700', color: '#1f2937' }}>-- %</p>\r\n                </div>\r\n              </Card>\r\n              <Card style={{ boxShadow: '0 1px 3px rgba(0,0,0,0.1)' }}>\r\n                <div style={{ padding: '24px' }}>\r\n                  <div style={{ fontSize: '32px', marginBottom: '12px' }}>â°</div>\r\n                  <p style={{ margin: '0 0 4px 0', fontSize: '14px', color: '#6b7280' }}>Last Updated</p>\r\n                  <p style={{ margin: '0', fontSize: '20px', fontWeight: '700', color: '#1f2937' }}>Just Now</p>\r\n                </div>\r\n              </Card>\r\n            </div>\r\n          </>\r\n        ) : (\r\n          // Active Sessions\r\n          <div style={{ marginBottom: '32px' }}>\r\n            <div style={{ marginBottom: '20px' }}>\r\n              <h2 style={{ margin: '0', fontSize: '20px', fontWeight: '700', color: '#1f2937' }}>\r\n                Active Sessions ({activeSessions.length})\r\n              </h2>\r\n            </div>\r\n\r\n            <div style={{ display: 'grid', gridTemplateColumns: '1fr', gap: '16px' }}>\r\n              {activeSessions.map(session => {\r\n                const isSubmitted = submittedAttendance[session.id];\r\n                const isMarking = marking[session.id];\r\n                const status = determineAttendanceStatus(session);\r\n                const startTime = new Date(session.created_at);\r\n                const expireTime = new Date(session.expires_at);\r\n                const now = new Date();\r\n                const timeRemaining = Math.max(0, Math.floor((expireTime - now) / 1000 / 60));\r\n\r\n                return (\r\n                  <Card\r\n                    key={session.id}\r\n                    style={{\r\n                      boxShadow: '0 1px 3px rgba(0,0,0,0.1)',\r\n                      borderLeft: `4px solid ${isSubmitted ? '#10b981' : '#3b82f6'}`,\r\n                      borderRadius: '8px'\r\n                    }}\r\n                  >\r\n                    <div style={{ padding: '24px' }}>\r\n                      <div style={{ display: 'flex', justifyContent: 'space-between', alignItems: 'start', marginBottom: '16px' }}>\r\n                        <div style={{ flex: 1 }}>\r\n                          <h3 style={{ margin: '0 0 6px 0', fontSize: '18px', fontWeight: '700', color: '#1f2937' }}>\r\n                            ğŸ“š {session.classes?.class_name || 'Unknown Class'}\r\n                          </h3>\r\n                          <p style={{ margin: '0', fontSize: '13px', color: '#6b7280', fontFamily: 'monospace' }}>\r\n                            Session: {session.token.substring(0, 12)}...\r\n                          </p>\r\n                        </div>\r\n                        <div style={{ textAlign: 'right' }}>\r\n                          {isSubmitted && (\r\n                            <div style={{\r\n                              padding: '6px 12px',\r\n                              backgroundColor: isSubmitted === 'present' ? '#d1fae5' : '#fef3c7',\r\n                              color: isSubmitted === 'present' ? '#065f46' : '#92400e',\r\n                              borderRadius: '20px',\r\n                              fontSize: '12px',\r\n                              fontWeight: '600',\r\n                              textTransform: 'uppercase',\r\n                              display: 'inline-block'\r\n                            }}>\r\n                              {isSubmitted === 'present' ? 'âœ… Present' : 'â±ï¸ Late'}\r\n                            </div>\r\n                          )}\r\n                          {!isSubmitted && (\r\n                            <div style={{\r\n                              padding: '6px 12px',\r\n                              backgroundColor: '#dbeafe',\r\n                              color: '#1e40af',\r\n                              borderRadius: '20px',\r\n                              fontSize: '12px',\r\n                              fontWeight: '600',\r\n                              textTransform: 'uppercase',\r\n                              display: 'inline-block'\r\n                            }}>\r\n                              â³ Active\r\n                            </div>\r\n                          )}\r\n                        </div>\r\n                      </div>\r\n\r\n                      {/* Session Details Grid */}\r\n                      <div style={{\r\n                        display: 'grid',\r\n                        gridTemplateColumns: 'repeat(auto-fit, minmax(150px, 1fr))',\r\n                        gap: '16px',\r\n                        marginBottom: '20px',\r\n                        padding: '16px',\r\n                        backgroundColor: '#f9fafb',\r\n                        borderRadius: '6px'\r\n                      }}>\r\n                        <div>\r\n                          <p style={{ margin: '0 0 4px 0', fontSize: '12px', color: '#6b7280', fontWeight: '600' }}>Started</p>\r\n                          <p style={{ margin: '0', fontSize: '14px', fontWeight: '500', color: '#1f2937' }}>\r\n                            {startTime.toLocaleTimeString('en-US', { hour: '2-digit', minute: '2-digit' })}\r\n                          </p>\r\n                        </div>\r\n                        <div>\r\n                          <p style={{ margin: '0 0 4px 0', fontSize: '12px', color: '#6b7280', fontWeight: '600' }}>Expires In</p>\r\n                          <p style={{ margin: '0', fontSize: '14px', fontWeight: '500', color: '#1f2937' }}>\r\n                            {timeRemaining}m remaining\r\n                          </p>\r\n                        </div>\r\n                        <div>\r\n                          <p style={{ margin: '0 0 4px 0', fontSize: '12px', color: '#6b7280', fontWeight: '600' }}>Status</p>\r\n                          <p style={{ margin: '0', fontSize: '14px', fontWeight: '500', color: '#1f2937' }}>\r\n                            {!isSubmitted ? `Will mark as ${status.toUpperCase()}` : `Marked as ${isSubmitted.toUpperCase()}`}\r\n                          </p>\r\n                        </div>\r\n                      </div>\r\n\r\n                      {/* Info Box */}\r\n                      {!isSubmitted && (\r\n                        <div style={{\r\n                          padding: '12px',\r\n                          backgroundColor: '#eff6ff',\r\n                          borderRadius: '6px',\r\n                          marginBottom: '16px',\r\n                          borderLeft: '3px solid #3b82f6'\r\n                        }}>\r\n                          <p style={{ margin: '0', fontSize: '13px', color: '#1e40af' }}>\r\n                            <strong>âš ï¸ Note:</strong> You can mark attendance only ONCE per session. You will be marked as {status.toUpperCase()} based on the current time. Submit before session ends!\r\n                          </p>\r\n                        </div>\r\n                      )}\r\n\r\n                      {/* Already Submitted Info Box */}\r\n                      {isSubmitted && (\r\n                        <div style={{\r\n                          padding: '12px',\r\n                          backgroundColor: '#d1fae5',\r\n                          borderRadius: '6px',\r\n                          marginBottom: '16px',\r\n                          borderLeft: '3px solid #10b981'\r\n                        }}>\r\n                          <p style={{ margin: '0', fontSize: '13px', color: '#065f46' }}>\r\n                            <strong>âœ… Already Marked:</strong> You submitted attendance as {isSubmitted.toUpperCase()}. You cannot mark again for this session.\r\n                          </p>\r\n                        </div>\r\n                      )}\r\n\r\n                      {/* Action Button */}\r\n                      <button\r\n                        onClick={() => handleMarkAttendance(session.id)}\r\n                        disabled={isSubmitted || isMarking}\r\n                        style={{\r\n                          width: '100%',\r\n                          padding: '12px 16px',\r\n                          backgroundColor: isSubmitted ? '#d1d5db' : '#3b82f6',\r\n                          color: 'white',\r\n                          border: 'none',\r\n                          borderRadius: '6px',\r\n                          fontSize: '15px',\r\n                          fontWeight: '600',\r\n                          cursor: isSubmitted || isMarking ? 'not-allowed' : 'pointer',\r\n                          opacity: isSubmitted || isMarking ? 0.6 : 1,\r\n                          transition: 'background-color 0.2s'\r\n                        }}\r\n                        onMouseEnter={(e) => {\r\n                          if (!isSubmitted && !isMarking) {\r\n                            e.target.style.backgroundColor = '#2563eb';\r\n                          }\r\n                        }}\r\n                        onMouseLeave={(e) => {\r\n                          if (!isSubmitted && !isMarking) {\r\n                            e.target.style.backgroundColor = '#3b82f6';\r\n                          }\r\n                        }}\r\n                      >\r\n                        {isMarking ? 'â³ Submitting...' : isSubmitted ? `âœ“ MARKED ALREADY (${isSubmitted.toUpperCase()})` : `âœ… Mark ${status.toUpperCase()}`}\r\n                      </button>\r\n                    </div>\r\n                  </Card>\r\n                );\r\n              })}\r\n            </div>\r\n          </div>\r\n        )}\r\n\r\n        {/* How It Works Section */}\r\n        <Card style={{ boxShadow: '0 1px 3px rgba(0,0,0,0.1)', marginTop: '32px' }}>\r\n          <div style={{ padding: '24px' }}>\r\n            <h2 style={{ margin: '0 0 24px 0', fontSize: '18px', fontWeight: '700', color: '#1f2937' }}>\r\n              ğŸ“‹ How Attendance Works\r\n            </h2>\r\n\r\n            <div style={{\r\n              display: 'grid',\r\n              gridTemplateColumns: 'repeat(auto-fit, minmax(300px, 1fr))',\r\n              gap: '20px'\r\n            }}>\r\n              {[\r\n                {\r\n                  step: '1',\r\n                  title: 'Instructor Starts Session',\r\n                  desc: 'Your instructor creates an attendance session in their dashboard',\r\n                  icon: 'ğŸ‘¨â€ğŸ«'\r\n                },\r\n                {\r\n                  step: '2',\r\n                  title: 'Session Appears Here',\r\n                  desc: 'Active sessions automatically show on this page in real-time',\r\n                  icon: 'ğŸ”„'\r\n                },\r\n                {\r\n                  step: '3',\r\n                  title: 'Submit Attendance',\r\n                  desc: 'Click the \"Mark\" button to submit your attendance',\r\n                  icon: 'ğŸ‘†'\r\n                },\r\n                {\r\n                  step: '4',\r\n                  title: 'Automatic Status',\r\n                  desc: 'PRESENT if within 15 min, otherwise LATE',\r\n                  icon: 'â±ï¸'\r\n                },\r\n                {\r\n                  step: '5',\r\n                  title: 'Immutable Record',\r\n                  desc: 'Once submitted, your attendance record cannot be changed',\r\n                  icon: 'ğŸ”’'\r\n                },\r\n                {\r\n                  step: '6',\r\n                  title: 'Check Your History',\r\n                  desc: 'View all your attendance records in your history page',\r\n                  icon: 'ğŸ“Š'\r\n                }\r\n              ].map((item, idx) => (\r\n                <div\r\n                  key={idx}\r\n                  style={{\r\n                    padding: '20px',\r\n                    backgroundColor: '#f9fafb',\r\n                    borderRadius: '8px',\r\n                    border: '1px solid #e5e7eb'\r\n                  }}\r\n                >\r\n                  <div style={{\r\n                    display: 'flex',\r\n                    alignItems: 'center',\r\n                    marginBottom: '12px',\r\n                    gap: '12px'\r\n                  }}>\r\n                    <div style={{\r\n                      width: '32px',\r\n                      height: '32px',\r\n                      borderRadius: '50%',\r\n                      backgroundColor: '#3b82f6',\r\n                      color: 'white',\r\n                      display: 'flex',\r\n                      alignItems: 'center',\r\n                      justifyContent: 'center',\r\n                      fontWeight: '700',\r\n                      fontSize: '14px'\r\n                    }}>\r\n                      {item.step}\r\n                    </div>\r\n                    <div style={{ fontSize: '20px' }}>{item.icon}</div>\r\n                  </div>\r\n                  <h3 style={{ margin: '0 0 6px 0', fontSize: '14px', fontWeight: '700', color: '#1f2937' }}>\r\n                    {item.title}\r\n                  </h3>\r\n                  <p style={{ margin: '0', fontSize: '13px', color: '#6b7280', lineHeight: '1.5' }}>\r\n                    {item.desc}\r\n                  </p>\r\n                </div>\r\n              ))}\r\n            </div>\r\n          </div>\r\n        </Card>\r\n      </div>\r\n    </Layout>\r\n  );\r\n};\r\n\r\nexport default StudentMarkAttendance;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}