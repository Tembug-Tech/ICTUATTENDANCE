{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\PFI\\\\Desktop\\\\ATTENDANCE\\\\ATTENDANCE\\\\src\\\\pages\\\\AdminDashboard.js\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect } from 'react';\nimport { useNavigate } from 'react-router-dom';\nimport { supabase } from '../supabase/supabase';\nimport { useAuth } from '../contexts/AuthContext';\nimport Layout from '../components/Layout';\nimport StatCard from '../components/StatCard';\nimport Card from '../components/Card';\nimport Table from '../components/Table';\nimport Badge from '../components/Badge';\nimport Button from '../components/Button';\nimport Alert from '../components/Alert';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst AdminDashboard = () => {\n  _s();\n  const {\n    currentUser,\n    userRole,\n    loading\n  } = useAuth();\n  const navigate = useNavigate();\n  const [stats, setStats] = useState({\n    totalStudents: 0,\n    totalDelegates: 0,\n    totalClasses: 0,\n    totalSessions: 0\n  });\n  const [students, setStudents] = useState([]);\n  const [delegates, setDelegates] = useState([]);\n  const [sessions, setSessions] = useState([]);\n  const [loadingData, setLoadingData] = useState(true);\n  const [showAddDelegate, setShowAddDelegate] = useState(false);\n  const [newDelegate, setNewDelegate] = useState({\n    name: '',\n    matricule: '',\n    email: '',\n    password: ''\n  });\n  const [addingDelegate, setAddingDelegate] = useState(false);\n  const [error, setError] = useState(null);\n  const [success, setSuccess] = useState(null);\n  useEffect(() => {\n    if (loading) return;\n    if (!currentUser || userRole !== 'admin') {\n      navigate('/admin');\n      return;\n    }\n    fetchData();\n  }, [currentUser, userRole, loading, navigate]);\n  const fetchData = async () => {\n    try {\n      setLoadingData(true);\n\n      // Fetch stats\n      const [studentsRes, delegatesRes, classesRes, sessionsRes] = await Promise.all([supabase.from('users').select('id', {\n        count: 'exact'\n      }).eq('role', 'student'), supabase.from('users').select('id', {\n        count: 'exact'\n      }).eq('role', 'delegate'), supabase.from('classes').select('id', {\n        count: 'exact'\n      }), supabase.from('sessions').select('id', {\n        count: 'exact'\n      })]);\n      setStats({\n        totalStudents: studentsRes.count || 0,\n        totalDelegates: delegatesRes.count || 0,\n        totalClasses: classesRes.count || 0,\n        totalSessions: sessionsRes.count || 0\n      });\n\n      // Fetch students with attendance counts\n      const {\n        data: studentsData\n      } = await supabase.from('users').select(`\n          id,\n          name,\n          matricule,\n          created_at\n        `).eq('role', 'student').order('created_at', {\n        ascending: false\n      });\n\n      // Get attendance counts for each student\n      const studentsWithAttendance = await Promise.all((studentsData || []).map(async student => {\n        const {\n          data: attendanceData\n        } = await supabase.from('attendance').select('id').eq('student_id', student.id);\n        return {\n          ...student,\n          totalAttendance: (attendanceData === null || attendanceData === void 0 ? void 0 : attendanceData.length) || 0\n        };\n      }));\n      setStudents(studentsWithAttendance);\n\n      // Fetch delegates\n      const {\n        data: delegatesData\n      } = await supabase.from('users').select(`\n          id,\n          name,\n          matricule,\n          created_at\n        `).eq('role', 'delegate').order('created_at', {\n        ascending: false\n      });\n      setDelegates(delegatesData || []);\n\n      // Fetch sessions with attendance counts\n      const {\n        data: sessionsData\n      } = await supabase.from('sessions').select(`\n          id,\n          token,\n          created_at,\n          expires_at,\n          classes (\n            class_name\n          )\n        `).order('created_at', {\n        ascending: false\n      }).limit(20);\n\n      // Get attendance counts for each session\n      const sessionsWithCounts = await Promise.all((sessionsData || []).map(async session => {\n        const {\n          data: attendanceData\n        } = await supabase.from('attendance').select('id').eq('session_id', session.id);\n        return {\n          ...session,\n          attendanceCount: (attendanceData === null || attendanceData === void 0 ? void 0 : attendanceData.length) || 0,\n          isActive: new Date(session.expires_at) > new Date()\n        };\n      }));\n      setSessions(sessionsWithCounts);\n    } catch (err) {\n      console.error('Error fetching data:', err);\n    } finally {\n      setLoadingData(false);\n    }\n  };\n  const handleAddDelegate = async () => {\n    if (!newDelegate.name || !newDelegate.matricule || !newDelegate.email || !newDelegate.password) {\n      setError('Please fill in all fields');\n      return;\n    }\n    try {\n      setAddingDelegate(true);\n      setError(null);\n\n      // Create auth user\n      const {\n        data: authData,\n        error: authError\n      } = await supabase.auth.admin.createUser({\n        email: newDelegate.email,\n        password: newDelegate.password,\n        email_confirm: true\n      });\n      if (authError) throw authError;\n\n      // Create user record\n      const {\n        error: userError\n      } = await supabase.from('users').insert({\n        id: authData.user.id,\n        name: newDelegate.name,\n        matricule: newDelegate.matricule,\n        role: 'delegate'\n      });\n      if (userError) throw userError;\n      setSuccess('‚úÖ Delegate added successfully!');\n      setShowAddDelegate(false);\n      setNewDelegate({\n        name: '',\n        matricule: '',\n        email: '',\n        password: ''\n      });\n      fetchData();\n      setTimeout(() => setSuccess(null), 3000);\n    } catch (err) {\n      console.error('Error adding delegate:', err);\n      setError(`‚ùå Error: ${err.message}`);\n    } finally {\n      setAddingDelegate(false);\n    }\n  };\n  if (loading || loadingData) {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"flex items-center justify-center h-screen bg-blue-50\",\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"text-center\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"inline-block animate-spin rounded-full h-16 w-16 border-4 border-blue-200 border-t-blue-600 mb-4\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 198,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          className: \"text-gray-600 font-medium\",\n          children: \"Loading dashboard...\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 199,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 197,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 196,\n      columnNumber: 7\n    }, this);\n  }\n  if (!currentUser || userRole !== 'admin') {\n    return null;\n  }\n  return /*#__PURE__*/_jsxDEV(Layout, {\n    role: \"admin\",\n    children: /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"space-y-8\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n          className: \"text-3xl font-bold mb-2\",\n          children: \"Admin Dashboard\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 213,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          className: \"text-gray-600\",\n          children: \"System management and attendance overview\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 214,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 212,\n        columnNumber: 9\n      }, this), error && /*#__PURE__*/_jsxDEV(Alert, {\n        type: \"error\",\n        title: \"Error\",\n        message: error\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 218,\n        columnNumber: 11\n      }, this), success && /*#__PURE__*/_jsxDEV(Alert, {\n        type: \"success\",\n        title: \"Success\",\n        message: success\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 222,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6\",\n        children: [/*#__PURE__*/_jsxDEV(StatCard, {\n          title: \"Total Students\",\n          value: stats.totalStudents,\n          icon: \"\\uD83D\\uDC65\",\n          color: \"blue\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 227,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(StatCard, {\n          title: \"Total Delegates\",\n          value: stats.totalDelegates,\n          icon: \"\\uD83E\\uDDD1\\u200D\\uD83D\\uDCBC\",\n          color: \"green\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 228,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(StatCard, {\n          title: \"Total Classes\",\n          value: stats.totalClasses,\n          icon: \"\\uD83D\\uDCDA\",\n          color: \"amber\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 229,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(StatCard, {\n          title: \"Total Sessions\",\n          value: stats.totalSessions,\n          icon: \"\\uD83D\\uDCCB\",\n          color: \"purple\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 230,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 226,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Card, {\n        title: \"\\u2795 Add New Delegate\",\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"space-y-4\",\n          children: [/*#__PURE__*/_jsxDEV(Button, {\n            variant: \"primary\",\n            onClick: () => setShowAddDelegate(!showAddDelegate),\n            children: showAddDelegate ? '‚úï Cancel' : '+ Add Delegate'\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 236,\n            columnNumber: 13\n          }, this), showAddDelegate && /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"space-y-4 p-4 bg-blue-50 rounded-lg border border-blue-200\",\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"grid grid-cols-1 md:grid-cols-2 gap-4\",\n              children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                  className: \"block text-sm font-semibold text-gray-700 mb-2\",\n                  children: \"Full Name:\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 247,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n                  type: \"text\",\n                  value: newDelegate.name,\n                  onChange: e => setNewDelegate(prev => ({\n                    ...prev,\n                    name: e.target.value\n                  })),\n                  placeholder: \"Enter full name\",\n                  className: \"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 250,\n                  columnNumber: 21\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 246,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                  className: \"block text-sm font-semibold text-gray-700 mb-2\",\n                  children: \"Matricule:\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 260,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n                  type: \"text\",\n                  value: newDelegate.matricule,\n                  onChange: e => setNewDelegate(prev => ({\n                    ...prev,\n                    matricule: e.target.value\n                  })),\n                  placeholder: \"Enter matricule\",\n                  className: \"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 263,\n                  columnNumber: 21\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 259,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                  className: \"block text-sm font-semibold text-gray-700 mb-2\",\n                  children: \"Email:\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 273,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n                  type: \"email\",\n                  value: newDelegate.email,\n                  onChange: e => setNewDelegate(prev => ({\n                    ...prev,\n                    email: e.target.value\n                  })),\n                  placeholder: \"delegate@ictuniversity.edu.cm\",\n                  className: \"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 276,\n                  columnNumber: 21\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 272,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                  className: \"block text-sm font-semibold text-gray-700 mb-2\",\n                  children: \"Password:\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 286,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n                  type: \"password\",\n                  value: newDelegate.password,\n                  onChange: e => setNewDelegate(prev => ({\n                    ...prev,\n                    password: e.target.value\n                  })),\n                  placeholder: \"Enter password\",\n                  className: \"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 289,\n                  columnNumber: 21\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 285,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 245,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(Button, {\n              variant: \"primary\",\n              onClick: handleAddDelegate,\n              disabled: addingDelegate,\n              children: addingDelegate ? '‚è≥ Adding...' : '‚úÖ Add Delegate'\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 299,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 244,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 235,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 234,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Card, {\n        title: \"\\uD83D\\uDCCA Student Attendance Records\",\n        children: students.length > 0 ? /*#__PURE__*/_jsxDEV(Table, {\n          columns: [{\n            key: 'name',\n            label: 'Name'\n          }, {\n            key: 'matricule',\n            label: 'Matricule'\n          }, {\n            key: 'totalAttendance',\n            label: 'Total Attendance'\n          }, {\n            key: 'created_at',\n            label: 'Registered',\n            render: date => new Date(date).toLocaleDateString()\n          }],\n          data: students,\n          searchable: true,\n          paginated: true,\n          itemsPerPage: 10\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 314,\n          columnNumber: 13\n        }, this) : /*#__PURE__*/_jsxDEV(\"p\", {\n          className: \"text-gray-600\",\n          children: \"No students registered\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 327,\n          columnNumber: 13\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 312,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Card, {\n        title: \"\\uD83D\\uDC68\\u200D\\uD83C\\uDFEB Delegate Management\",\n        children: delegates.length > 0 ? /*#__PURE__*/_jsxDEV(Table, {\n          columns: [{\n            key: 'name',\n            label: 'Name'\n          }, {\n            key: 'matricule',\n            label: 'Matricule'\n          }, {\n            key: 'created_at',\n            label: 'Registered',\n            render: date => new Date(date).toLocaleDateString()\n          }],\n          data: delegates,\n          searchable: true,\n          paginated: true,\n          itemsPerPage: 10\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 334,\n          columnNumber: 13\n        }, this) : /*#__PURE__*/_jsxDEV(\"p\", {\n          className: \"text-gray-600\",\n          children: \"No delegates registered\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 346,\n          columnNumber: 13\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 332,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Card, {\n        title: \"\\uD83D\\uDCCB Attendance Sessions Summary\",\n        children: sessions.length > 0 ? /*#__PURE__*/_jsxDEV(Table, {\n          columns: [{\n            key: 'classes.class_name',\n            label: 'Course'\n          }, {\n            key: 'created_at',\n            label: 'Date',\n            render: date => new Date(date).toLocaleDateString()\n          }, {\n            key: 'created_at',\n            label: 'Time',\n            render: date => new Date(date).toLocaleTimeString()\n          }, {\n            key: 'attendanceCount',\n            label: 'Students Marked'\n          }, {\n            key: 'isActive',\n            label: 'Status',\n            render: isActive => /*#__PURE__*/_jsxDEV(Badge, {\n              label: isActive ? 'ACTIVE' : 'CLOSED',\n              variant: isActive ? 'success' : 'danger'\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 362,\n              columnNumber: 41\n            }, this)\n          }],\n          data: sessions,\n          searchable: true,\n          paginated: true,\n          itemsPerPage: 10\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 353,\n          columnNumber: 13\n        }, this) : /*#__PURE__*/_jsxDEV(\"p\", {\n          className: \"text-gray-600\",\n          children: \"No attendance sessions created\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 371,\n          columnNumber: 13\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 351,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 211,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 210,\n    columnNumber: 5\n  }, this);\n};\n_s(AdminDashboard, \"SYOg5uqV9JnKGD+xqJbNXdqo3uc=\", false, function () {\n  return [useAuth, useNavigate];\n});\n_c = AdminDashboard;\nexport default AdminDashboard;\nvar _c;\n$RefreshReg$(_c, \"AdminDashboard\");","map":{"version":3,"names":["React","useState","useEffect","useNavigate","supabase","useAuth","Layout","StatCard","Card","Table","Badge","Button","Alert","jsxDEV","_jsxDEV","AdminDashboard","_s","currentUser","userRole","loading","navigate","stats","setStats","totalStudents","totalDelegates","totalClasses","totalSessions","students","setStudents","delegates","setDelegates","sessions","setSessions","loadingData","setLoadingData","showAddDelegate","setShowAddDelegate","newDelegate","setNewDelegate","name","matricule","email","password","addingDelegate","setAddingDelegate","error","setError","success","setSuccess","fetchData","studentsRes","delegatesRes","classesRes","sessionsRes","Promise","all","from","select","count","eq","data","studentsData","order","ascending","studentsWithAttendance","map","student","attendanceData","id","totalAttendance","length","delegatesData","sessionsData","limit","sessionsWithCounts","session","attendanceCount","isActive","Date","expires_at","err","console","handleAddDelegate","authData","authError","auth","admin","createUser","email_confirm","userError","insert","user","role","setTimeout","message","className","children","fileName","_jsxFileName","lineNumber","columnNumber","type","title","value","icon","color","variant","onClick","onChange","e","prev","target","placeholder","disabled","columns","key","label","render","date","toLocaleDateString","searchable","paginated","itemsPerPage","toLocaleTimeString","_c","$RefreshReg$"],"sources":["C:/Users/PFI/Desktop/ATTENDANCE/ATTENDANCE/src/pages/AdminDashboard.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\r\nimport { useNavigate } from 'react-router-dom';\r\nimport { supabase } from '../supabase/supabase';\r\nimport { useAuth } from '../contexts/AuthContext';\r\nimport Layout from '../components/Layout';\r\nimport StatCard from '../components/StatCard';\r\nimport Card from '../components/Card';\r\nimport Table from '../components/Table';\r\nimport Badge from '../components/Badge';\r\nimport Button from '../components/Button';\r\nimport Alert from '../components/Alert';\r\n\r\nconst AdminDashboard = () => {\r\n  const { currentUser, userRole, loading } = useAuth();\r\n  const navigate = useNavigate();\r\n  const [stats, setStats] = useState({\r\n    totalStudents: 0,\r\n    totalDelegates: 0,\r\n    totalClasses: 0,\r\n    totalSessions: 0,\r\n  });\r\n  const [students, setStudents] = useState([]);\r\n  const [delegates, setDelegates] = useState([]);\r\n  const [sessions, setSessions] = useState([]);\r\n  const [loadingData, setLoadingData] = useState(true);\r\n  const [showAddDelegate, setShowAddDelegate] = useState(false);\r\n  const [newDelegate, setNewDelegate] = useState({\r\n    name: '',\r\n    matricule: '',\r\n    email: '',\r\n    password: ''\r\n  });\r\n  const [addingDelegate, setAddingDelegate] = useState(false);\r\n  const [error, setError] = useState(null);\r\n  const [success, setSuccess] = useState(null);\r\n\r\n  useEffect(() => {\r\n    if (loading) return;\r\n\r\n    if (!currentUser || userRole !== 'admin') {\r\n      navigate('/admin');\r\n      return;\r\n    }\r\n\r\n    fetchData();\r\n  }, [currentUser, userRole, loading, navigate]);\r\n\r\n  const fetchData = async () => {\r\n    try {\r\n      setLoadingData(true);\r\n\r\n      // Fetch stats\r\n      const [studentsRes, delegatesRes, classesRes, sessionsRes] = await Promise.all([\r\n        supabase.from('users').select('id', { count: 'exact' }).eq('role', 'student'),\r\n        supabase.from('users').select('id', { count: 'exact' }).eq('role', 'delegate'),\r\n        supabase.from('classes').select('id', { count: 'exact' }),\r\n        supabase.from('sessions').select('id', { count: 'exact' }),\r\n      ]);\r\n\r\n      setStats({\r\n        totalStudents: studentsRes.count || 0,\r\n        totalDelegates: delegatesRes.count || 0,\r\n        totalClasses: classesRes.count || 0,\r\n        totalSessions: sessionsRes.count || 0,\r\n      });\r\n\r\n      // Fetch students with attendance counts\r\n      const { data: studentsData } = await supabase\r\n        .from('users')\r\n        .select(`\r\n          id,\r\n          name,\r\n          matricule,\r\n          created_at\r\n        `)\r\n        .eq('role', 'student')\r\n        .order('created_at', { ascending: false });\r\n\r\n      // Get attendance counts for each student\r\n      const studentsWithAttendance = await Promise.all(\r\n        (studentsData || []).map(async (student) => {\r\n          const { data: attendanceData } = await supabase\r\n            .from('attendance')\r\n            .select('id')\r\n            .eq('student_id', student.id);\r\n\r\n          return {\r\n            ...student,\r\n            totalAttendance: attendanceData?.length || 0\r\n          };\r\n        })\r\n      );\r\n\r\n      setStudents(studentsWithAttendance);\r\n\r\n      // Fetch delegates\r\n      const { data: delegatesData } = await supabase\r\n        .from('users')\r\n        .select(`\r\n          id,\r\n          name,\r\n          matricule,\r\n          created_at\r\n        `)\r\n        .eq('role', 'delegate')\r\n        .order('created_at', { ascending: false });\r\n\r\n      setDelegates(delegatesData || []);\r\n\r\n      // Fetch sessions with attendance counts\r\n      const { data: sessionsData } = await supabase\r\n        .from('sessions')\r\n        .select(`\r\n          id,\r\n          token,\r\n          created_at,\r\n          expires_at,\r\n          classes (\r\n            class_name\r\n          )\r\n        `)\r\n        .order('created_at', { ascending: false })\r\n        .limit(20);\r\n\r\n      // Get attendance counts for each session\r\n      const sessionsWithCounts = await Promise.all(\r\n        (sessionsData || []).map(async (session) => {\r\n          const { data: attendanceData } = await supabase\r\n            .from('attendance')\r\n            .select('id')\r\n            .eq('session_id', session.id);\r\n\r\n          return {\r\n            ...session,\r\n            attendanceCount: attendanceData?.length || 0,\r\n            isActive: new Date(session.expires_at) > new Date()\r\n          };\r\n        })\r\n      );\r\n\r\n      setSessions(sessionsWithCounts);\r\n    } catch (err) {\r\n      console.error('Error fetching data:', err);\r\n    } finally {\r\n      setLoadingData(false);\r\n    }\r\n  };\r\n\r\n  const handleAddDelegate = async () => {\r\n    if (!newDelegate.name || !newDelegate.matricule || !newDelegate.email || !newDelegate.password) {\r\n      setError('Please fill in all fields');\r\n      return;\r\n    }\r\n\r\n    try {\r\n      setAddingDelegate(true);\r\n      setError(null);\r\n\r\n      // Create auth user\r\n      const { data: authData, error: authError } = await supabase.auth.admin.createUser({\r\n        email: newDelegate.email,\r\n        password: newDelegate.password,\r\n        email_confirm: true\r\n      });\r\n\r\n      if (authError) throw authError;\r\n\r\n      // Create user record\r\n      const { error: userError } = await supabase\r\n        .from('users')\r\n        .insert({\r\n          id: authData.user.id,\r\n          name: newDelegate.name,\r\n          matricule: newDelegate.matricule,\r\n          role: 'delegate'\r\n        });\r\n\r\n      if (userError) throw userError;\r\n\r\n      setSuccess('‚úÖ Delegate added successfully!');\r\n      setShowAddDelegate(false);\r\n      setNewDelegate({ name: '', matricule: '', email: '', password: '' });\r\n      fetchData();\r\n\r\n      setTimeout(() => setSuccess(null), 3000);\r\n    } catch (err) {\r\n      console.error('Error adding delegate:', err);\r\n      setError(`‚ùå Error: ${err.message}`);\r\n    } finally {\r\n      setAddingDelegate(false);\r\n    }\r\n  };\r\n\r\n  if (loading || loadingData) {\r\n    return (\r\n      <div className=\"flex items-center justify-center h-screen bg-blue-50\">\r\n        <div className=\"text-center\">\r\n          <div className=\"inline-block animate-spin rounded-full h-16 w-16 border-4 border-blue-200 border-t-blue-600 mb-4\" />\r\n          <p className=\"text-gray-600 font-medium\">Loading dashboard...</p>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  if (!currentUser || userRole !== 'admin') {\r\n    return null;\r\n  }\r\n\r\n  return (\r\n    <Layout role=\"admin\">\r\n      <div className=\"space-y-8\">\r\n        <div>\r\n          <h1 className=\"text-3xl font-bold mb-2\">Admin Dashboard</h1>\r\n          <p className=\"text-gray-600\">System management and attendance overview</p>\r\n        </div>\r\n\r\n        {error && (\r\n          <Alert type=\"error\" title=\"Error\" message={error} />\r\n        )}\r\n\r\n        {success && (\r\n          <Alert type=\"success\" title=\"Success\" message={success} />\r\n        )}\r\n\r\n        {/* Statistics Cards */}\r\n        <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6\">\r\n          <StatCard title=\"Total Students\" value={stats.totalStudents} icon=\"üë•\" color=\"blue\" />\r\n          <StatCard title=\"Total Delegates\" value={stats.totalDelegates} icon=\"üßë‚Äçüíº\" color=\"green\" />\r\n          <StatCard title=\"Total Classes\" value={stats.totalClasses} icon=\"üìö\" color=\"amber\" />\r\n          <StatCard title=\"Total Sessions\" value={stats.totalSessions} icon=\"üìã\" color=\"purple\" />\r\n        </div>\r\n\r\n        {/* Add Delegate */}\r\n        <Card title=\"‚ûï Add New Delegate\">\r\n          <div className=\"space-y-4\">\r\n            <Button\r\n              variant=\"primary\"\r\n              onClick={() => setShowAddDelegate(!showAddDelegate)}\r\n            >\r\n              {showAddDelegate ? '‚úï Cancel' : '+ Add Delegate'}\r\n            </Button>\r\n\r\n            {showAddDelegate && (\r\n              <div className=\"space-y-4 p-4 bg-blue-50 rounded-lg border border-blue-200\">\r\n                <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\r\n                  <div>\r\n                    <label className=\"block text-sm font-semibold text-gray-700 mb-2\">\r\n                      Full Name:\r\n                    </label>\r\n                    <input\r\n                      type=\"text\"\r\n                      value={newDelegate.name}\r\n                      onChange={(e) => setNewDelegate(prev => ({ ...prev, name: e.target.value }))}\r\n                      placeholder=\"Enter full name\"\r\n                      className=\"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500\"\r\n                    />\r\n                  </div>\r\n\r\n                  <div>\r\n                    <label className=\"block text-sm font-semibold text-gray-700 mb-2\">\r\n                      Matricule:\r\n                    </label>\r\n                    <input\r\n                      type=\"text\"\r\n                      value={newDelegate.matricule}\r\n                      onChange={(e) => setNewDelegate(prev => ({ ...prev, matricule: e.target.value }))}\r\n                      placeholder=\"Enter matricule\"\r\n                      className=\"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500\"\r\n                    />\r\n                  </div>\r\n\r\n                  <div>\r\n                    <label className=\"block text-sm font-semibold text-gray-700 mb-2\">\r\n                      Email:\r\n                    </label>\r\n                    <input\r\n                      type=\"email\"\r\n                      value={newDelegate.email}\r\n                      onChange={(e) => setNewDelegate(prev => ({ ...prev, email: e.target.value }))}\r\n                      placeholder=\"delegate@ictuniversity.edu.cm\"\r\n                      className=\"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500\"\r\n                    />\r\n                  </div>\r\n\r\n                  <div>\r\n                    <label className=\"block text-sm font-semibold text-gray-700 mb-2\">\r\n                      Password:\r\n                    </label>\r\n                    <input\r\n                      type=\"password\"\r\n                      value={newDelegate.password}\r\n                      onChange={(e) => setNewDelegate(prev => ({ ...prev, password: e.target.value }))}\r\n                      placeholder=\"Enter password\"\r\n                      className=\"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500\"\r\n                    />\r\n                  </div>\r\n                </div>\r\n\r\n                <Button\r\n                  variant=\"primary\"\r\n                  onClick={handleAddDelegate}\r\n                  disabled={addingDelegate}\r\n                >\r\n                  {addingDelegate ? '‚è≥ Adding...' : '‚úÖ Add Delegate'}\r\n                </Button>\r\n              </div>\r\n            )}\r\n          </div>\r\n        </Card>\r\n\r\n        {/* Student Attendance Records */}\r\n        <Card title=\"üìä Student Attendance Records\">\r\n          {students.length > 0 ? (\r\n            <Table\r\n              columns={[\r\n                { key: 'name', label: 'Name' },\r\n                { key: 'matricule', label: 'Matricule' },\r\n                { key: 'totalAttendance', label: 'Total Attendance' },\r\n                { key: 'created_at', label: 'Registered', render: (date) => new Date(date).toLocaleDateString() },\r\n              ]}\r\n              data={students}\r\n              searchable\r\n              paginated\r\n              itemsPerPage={10}\r\n            />\r\n          ) : (\r\n            <p className=\"text-gray-600\">No students registered</p>\r\n          )}\r\n        </Card>\r\n\r\n        {/* Delegate Management */}\r\n        <Card title=\"üë®‚Äçüè´ Delegate Management\">\r\n          {delegates.length > 0 ? (\r\n            <Table\r\n              columns={[\r\n                { key: 'name', label: 'Name' },\r\n                { key: 'matricule', label: 'Matricule' },\r\n                { key: 'created_at', label: 'Registered', render: (date) => new Date(date).toLocaleDateString() },\r\n              ]}\r\n              data={delegates}\r\n              searchable\r\n              paginated\r\n              itemsPerPage={10}\r\n            />\r\n          ) : (\r\n            <p className=\"text-gray-600\">No delegates registered</p>\r\n          )}\r\n        </Card>\r\n\r\n        {/* Attendance Sessions Summary */}\r\n        <Card title=\"üìã Attendance Sessions Summary\">\r\n          {sessions.length > 0 ? (\r\n            <Table\r\n              columns={[\r\n                { key: 'classes.class_name', label: 'Course' },\r\n                { key: 'created_at', label: 'Date', render: (date) => new Date(date).toLocaleDateString() },\r\n                { key: 'created_at', label: 'Time', render: (date) => new Date(date).toLocaleTimeString() },\r\n                { key: 'attendanceCount', label: 'Students Marked' },\r\n                {\r\n                  key: 'isActive',\r\n                  label: 'Status',\r\n                  render: (isActive) => <Badge label={isActive ? 'ACTIVE' : 'CLOSED'} variant={isActive ? 'success' : 'danger'} />,\r\n                },\r\n              ]}\r\n              data={sessions}\r\n              searchable\r\n              paginated\r\n              itemsPerPage={10}\r\n            />\r\n          ) : (\r\n            <p className=\"text-gray-600\">No attendance sessions created</p>\r\n          )}\r\n        </Card>\r\n      </div>\r\n    </Layout>\r\n  );\r\n};\r\n\r\nexport default AdminDashboard;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}