{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\PFI\\\\Desktop\\\\ATTENDANCE\\\\ATTENDANCE\\\\src\\\\pages\\\\StudentDashboard.js\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect, useCallback } from 'react';\nimport { useNavigate } from 'react-router-dom';\nimport { supabase } from '../supabase/supabase';\nimport { useAuth } from '../contexts/AuthContext';\nimport Layout from '../components/Layout';\nimport Card from '../components/Card';\nimport Button from '../components/Button';\nimport Badge from '../components/Badge';\nimport Alert from '../components/Alert';\nimport Table from '../components/Table';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst StudentDashboard = () => {\n  _s();\n  var _selectedSection$clas;\n  const {\n    currentUser,\n    userRole,\n    loading\n  } = useAuth();\n  const navigate = useNavigate();\n  const [activeSections, setActiveSections] = useState([]);\n  const [sectionsLoading, setSectionsLoading] = useState(true);\n  const [courses, setCourses] = useState([]);\n  const [coursesLoading, setCoursesLoading] = useState(true);\n  const [selectedSection, setSelectedSection] = useState(null);\n  const [attendanceHistory, setAttendanceHistory] = useState({});\n  const [historyLoading, setHistoryLoading] = useState(false);\n  const [marking, setMarking] = useState(false);\n  const [error, setError] = useState(null);\n  const [success, setSuccess] = useState(null);\n\n  // Protect route - only allow students\n  useEffect(() => {\n    if (loading) return;\n    if (!currentUser || userRole !== 'student') {\n      navigate('/student');\n      return;\n    }\n    fetchCourses();\n    fetchActiveSections();\n  }, [currentUser, userRole, loading, navigate]);\n  const fetchCourses = async () => {\n    try {\n      setCoursesLoading(true);\n\n      // Get student's class (enrollment)\n      const {\n        data: userData\n      } = await supabase.from('users').select('class_id').eq('id', currentUser.id).single();\n      if (!(userData !== null && userData !== void 0 && userData.class_id)) {\n        setCourses([]);\n        return;\n      }\n\n      // Get class details\n      const {\n        data: classData\n      } = await supabase.from('classes').select('id, class_name').eq('id', userData.class_id).single();\n      if (classData) {\n        // For now, treat class as course\n        const course = {\n          id: classData.id,\n          name: classData.class_name,\n          totalAttended: 0\n        };\n\n        // Get attendance count for this course\n        const {\n          data: sessions\n        } = await supabase.from('sessions').select('id').eq('class_id', classData.id);\n        if (sessions && sessions.length > 0) {\n          const {\n            data: attendanceRecords\n          } = await supabase.from('attendance').select('id').eq('student_id', currentUser.id).in('session_id', sessions.map(s => s.id));\n          course.totalAttended = (attendanceRecords === null || attendanceRecords === void 0 ? void 0 : attendanceRecords.length) || 0;\n        }\n        setCourses([course]);\n      }\n    } catch (err) {\n      console.error('Error fetching courses:', err);\n      setCourses([]);\n    } finally {\n      setCoursesLoading(false);\n    }\n  };\n  const fetchActiveSections = async () => {\n    try {\n      setSectionsLoading(true);\n\n      // Get student's class\n      const {\n        data: userData\n      } = await supabase.from('users').select('class_id').eq('id', currentUser.id).single();\n      if (!(userData !== null && userData !== void 0 && userData.class_id)) {\n        setActiveSections([]);\n        return;\n      }\n\n      // Get active sessions for student's class\n      const {\n        data: sessions\n      } = await supabase.from('sessions').select(`\n          id,\n          token,\n          created_at,\n          expires_at,\n          class_id,\n          classes (\n            class_name\n          )\n        `).eq('class_id', userData.class_id).gt('expires_at', new Date().toISOString());\n      setActiveSections(sessions || []);\n    } catch (err) {\n      console.error('Error fetching active sections:', err);\n      setActiveSections([]);\n    } finally {\n      setSectionsLoading(false);\n    }\n  };\n  const fetchAttendanceHistory = async courseId => {\n    try {\n      setHistoryLoading(true);\n      const {\n        data: sessions\n      } = await supabase.from('sessions').select('id, created_at').eq('class_id', courseId);\n      if (!sessions || sessions.length === 0) {\n        setAttendanceHistory(prev => ({\n          ...prev,\n          [courseId]: []\n        }));\n        return;\n      }\n      const {\n        data: attendanceRecords\n      } = await supabase.from('attendance').select(`\n          id,\n          timestamp,\n          status,\n          sessions (\n            created_at\n          )\n        `).eq('student_id', currentUser.id).in('session_id', sessions.map(s => s.id)).order('timestamp', {\n        ascending: false\n      });\n      const history = (attendanceRecords === null || attendanceRecords === void 0 ? void 0 : attendanceRecords.map(record => {\n        var _record$sessions;\n        return {\n          id: record.id,\n          date: new Date((_record$sessions = record.sessions) === null || _record$sessions === void 0 ? void 0 : _record$sessions.created_at).toLocaleDateString(),\n          status: record.status || 'absent'\n        };\n      })) || [];\n      setAttendanceHistory(prev => ({\n        ...prev,\n        [courseId]: history\n      }));\n    } catch (err) {\n      console.error('Error fetching attendance history:', err);\n      setAttendanceHistory(prev => ({\n        ...prev,\n        [courseId]: []\n      }));\n    } finally {\n      setHistoryLoading(false);\n    }\n  };\n  const handleMarkAttendance = async () => {\n    if (!selectedSection) {\n      setError('Please select a section first');\n      return;\n    }\n    try {\n      setMarking(true);\n      setError(null);\n      setSuccess(null);\n\n      // Check if already marked today for this section\n      const today = new Date().toDateString();\n      const {\n        data: existingAttendance\n      } = await supabase.from('attendance').select('id').eq('student_id', currentUser.id).eq('session_id', selectedSection.id);\n      if (existingAttendance && existingAttendance.length > 0) {\n        setError('You have already marked attendance for this section today');\n        return;\n      }\n\n      // Mark attendance\n      const {\n        error: insertError\n      } = await supabase.from('attendance').insert([{\n        session_id: selectedSection.id,\n        student_id: currentUser.id,\n        status: 'present',\n        timestamp: new Date().toISOString()\n      }]);\n      if (insertError) throw insertError;\n      setSuccess('‚úÖ Attendance marked successfully!');\n\n      // Refresh data\n      fetchCourses();\n      fetchActiveSections();\n      setTimeout(() => setSuccess(null), 3000);\n    } catch (err) {\n      console.error('Error marking attendance:', err);\n      setError(`‚ùå Error: ${err.message}`);\n    } finally {\n      setMarking(false);\n    }\n  };\n  const handleCourseClick = course => {\n    fetchAttendanceHistory(course.id);\n  };\n  if (loading) {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"flex items-center justify-center h-screen bg-blue-50\",\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"text-center\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"inline-block animate-spin rounded-full h-16 w-16 border-4 border-blue-200 border-t-blue-600 mb-4\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 241,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          className: \"text-gray-600 font-medium\",\n          children: \"Loading dashboard...\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 242,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 240,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 239,\n      columnNumber: 7\n    }, this);\n  }\n  if (!currentUser || userRole !== 'student') {\n    return null;\n  }\n  return /*#__PURE__*/_jsxDEV(Layout, {\n    role: \"student\",\n    children: /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"space-y-8\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n          className: \"text-3xl font-bold mb-2\",\n          children: \"Student Dashboard\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 256,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          className: \"text-gray-600\",\n          children: \"Mark your attendance and view your courses\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 257,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 255,\n        columnNumber: 9\n      }, this), error && /*#__PURE__*/_jsxDEV(Alert, {\n        type: \"error\",\n        title: \"Error\",\n        message: error\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 261,\n        columnNumber: 11\n      }, this), success && /*#__PURE__*/_jsxDEV(Alert, {\n        type: \"success\",\n        title: \"Success\",\n        message: success\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 265,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(Card, {\n        title: \"\\u2705 Mark Attendance\",\n        children: sectionsLoading ? /*#__PURE__*/_jsxDEV(\"p\", {\n          className: \"text-gray-600\",\n          children: \"Loading active sections...\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 271,\n          columnNumber: 13\n        }, this) : activeSections.length > 0 ? /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"space-y-4\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            children: [/*#__PURE__*/_jsxDEV(\"label\", {\n              className: \"block text-sm font-medium text-gray-700 mb-2\",\n              children: \"Select Active Section\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 275,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"select\", {\n              value: (selectedSection === null || selectedSection === void 0 ? void 0 : selectedSection.id) || '',\n              onChange: e => {\n                const section = activeSections.find(s => s.id === e.target.value);\n                setSelectedSection(section);\n              },\n              className: \"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500\",\n              children: [/*#__PURE__*/_jsxDEV(\"option\", {\n                value: \"\",\n                children: \"Choose a section...\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 286,\n                columnNumber: 19\n              }, this), activeSections.map(section => {\n                var _section$classes;\n                return /*#__PURE__*/_jsxDEV(\"option\", {\n                  value: section.id,\n                  children: [(_section$classes = section.classes) === null || _section$classes === void 0 ? void 0 : _section$classes.class_name, \" - \", new Date(section.created_at).toLocaleDateString()]\n                }, section.id, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 288,\n                  columnNumber: 21\n                }, this);\n              })]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 278,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 274,\n            columnNumber: 15\n          }, this), selectedSection && /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"bg-blue-50 p-4 rounded-lg\",\n            children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n              className: \"font-semibold text-blue-900\",\n              children: (_selectedSection$clas = selectedSection.classes) === null || _selectedSection$clas === void 0 ? void 0 : _selectedSection$clas.class_name\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 297,\n              columnNumber: 19\n            }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n              className: \"text-sm text-blue-700\",\n              children: [\"Started: \", new Date(selectedSection.created_at).toLocaleString()]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 300,\n              columnNumber: 19\n            }, this), /*#__PURE__*/_jsxDEV(Button, {\n              variant: \"primary\",\n              onClick: handleMarkAttendance,\n              disabled: marking,\n              className: \"mt-3\",\n              children: marking ? '‚è≥ Marking...' : '‚úÖ Mark Present'\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 303,\n              columnNumber: 19\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 296,\n            columnNumber: 17\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 273,\n          columnNumber: 13\n        }, this) : /*#__PURE__*/_jsxDEV(\"p\", {\n          className: \"text-gray-600\",\n          children: \"No active sections available for attendance marking\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 315,\n          columnNumber: 13\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 269,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Card, {\n        title: \"\\uD83D\\uDCDA My Courses\",\n        children: coursesLoading ? /*#__PURE__*/_jsxDEV(\"p\", {\n          className: \"text-gray-600\",\n          children: \"Loading courses...\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 322,\n          columnNumber: 13\n        }, this) : courses.length > 0 ? /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"grid grid-cols-1 md:grid-cols-2 gap-6\",\n          children: courses.map(course => /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"p-4 bg-white rounded-lg border border-gray-200 cursor-pointer hover:shadow-md transition\",\n            onClick: () => handleCourseClick(course),\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"flex justify-between items-start mb-3\",\n              children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n                className: \"font-semibold text-gray-900\",\n                children: course.name\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 332,\n                columnNumber: 21\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"flex items-center\",\n                children: /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"w-12 h-12 bg-blue-100 rounded-full flex items-center justify-center\",\n                  children: /*#__PURE__*/_jsxDEV(\"span\", {\n                    className: \"text-lg font-bold text-blue-600\",\n                    children: course.totalAttended\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 335,\n                    columnNumber: 25\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 334,\n                  columnNumber: 23\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 333,\n                columnNumber: 21\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 331,\n              columnNumber: 19\n            }, this), attendanceHistory[course.id] && /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"mt-3\",\n              children: [/*#__PURE__*/_jsxDEV(\"h4\", {\n                className: \"text-sm font-medium text-gray-700 mb-2\",\n                children: \"Recent Attendance:\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 342,\n                columnNumber: 23\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"space-y-1\",\n                children: attendanceHistory[course.id].slice(0, 3).map(record => /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"flex justify-between text-sm\",\n                  children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                    children: record.date\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 346,\n                    columnNumber: 29\n                  }, this), /*#__PURE__*/_jsxDEV(Badge, {\n                    label: record.status.toUpperCase(),\n                    variant: record.status === 'present' ? 'success' : 'danger'\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 347,\n                    columnNumber: 29\n                  }, this)]\n                }, record.id, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 345,\n                  columnNumber: 27\n                }, this))\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 343,\n                columnNumber: 23\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 341,\n              columnNumber: 21\n            }, this)]\n          }, course.id, true, {\n            fileName: _jsxFileName,\n            lineNumber: 326,\n            columnNumber: 17\n          }, this))\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 324,\n          columnNumber: 13\n        }, this) : /*#__PURE__*/_jsxDEV(\"p\", {\n          className: \"text-gray-600\",\n          children: \"No registered courses\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 360,\n          columnNumber: 13\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 320,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 254,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 253,\n    columnNumber: 5\n  }, this);\n};\n_s(StudentDashboard, \"ppQ5wFir9xjFAzC6wouI6TmPAFY=\", false, function () {\n  return [useAuth, useNavigate];\n});\n_c = StudentDashboard;\nexport default StudentDashboard;\nvar _c;\n$RefreshReg$(_c, \"StudentDashboard\");","map":{"version":3,"names":["React","useState","useEffect","useCallback","useNavigate","supabase","useAuth","Layout","Card","Button","Badge","Alert","Table","jsxDEV","_jsxDEV","StudentDashboard","_s","_selectedSection$clas","currentUser","userRole","loading","navigate","activeSections","setActiveSections","sectionsLoading","setSectionsLoading","courses","setCourses","coursesLoading","setCoursesLoading","selectedSection","setSelectedSection","attendanceHistory","setAttendanceHistory","historyLoading","setHistoryLoading","marking","setMarking","error","setError","success","setSuccess","fetchCourses","fetchActiveSections","data","userData","from","select","eq","id","single","class_id","classData","course","name","class_name","totalAttended","sessions","length","attendanceRecords","in","map","s","err","console","gt","Date","toISOString","fetchAttendanceHistory","courseId","prev","order","ascending","history","record","_record$sessions","date","created_at","toLocaleDateString","status","handleMarkAttendance","today","toDateString","existingAttendance","insertError","insert","session_id","student_id","timestamp","setTimeout","message","handleCourseClick","className","children","fileName","_jsxFileName","lineNumber","columnNumber","role","type","title","value","onChange","e","section","find","target","_section$classes","classes","toLocaleString","variant","onClick","disabled","slice","label","toUpperCase","_c","$RefreshReg$"],"sources":["C:/Users/PFI/Desktop/ATTENDANCE/ATTENDANCE/src/pages/StudentDashboard.js"],"sourcesContent":["import React, { useState, useEffect, useCallback } from 'react';\r\nimport { useNavigate } from 'react-router-dom';\r\nimport { supabase } from '../supabase/supabase';\r\nimport { useAuth } from '../contexts/AuthContext';\r\nimport Layout from '../components/Layout';\r\nimport Card from '../components/Card';\r\nimport Button from '../components/Button';\r\nimport Badge from '../components/Badge';\r\nimport Alert from '../components/Alert';\r\nimport Table from '../components/Table';\r\n\r\nconst StudentDashboard = () => {\r\n  const { currentUser, userRole, loading } = useAuth();\r\n  const navigate = useNavigate();\r\n  const [activeSections, setActiveSections] = useState([]);\r\n  const [sectionsLoading, setSectionsLoading] = useState(true);\r\n  const [courses, setCourses] = useState([]);\r\n  const [coursesLoading, setCoursesLoading] = useState(true);\r\n  const [selectedSection, setSelectedSection] = useState(null);\r\n  const [attendanceHistory, setAttendanceHistory] = useState({});\r\n  const [historyLoading, setHistoryLoading] = useState(false);\r\n  const [marking, setMarking] = useState(false);\r\n  const [error, setError] = useState(null);\r\n  const [success, setSuccess] = useState(null);\r\n\r\n  // Protect route - only allow students\r\n  useEffect(() => {\r\n    if (loading) return;\r\n\r\n    if (!currentUser || userRole !== 'student') {\r\n      navigate('/student');\r\n      return;\r\n    }\r\n\r\n    fetchCourses();\r\n    fetchActiveSections();\r\n  }, [currentUser, userRole, loading, navigate]);\r\n\r\n  const fetchCourses = async () => {\r\n    try {\r\n      setCoursesLoading(true);\r\n\r\n      // Get student's class (enrollment)\r\n      const { data: userData } = await supabase\r\n        .from('users')\r\n        .select('class_id')\r\n        .eq('id', currentUser.id)\r\n        .single();\r\n\r\n      if (!userData?.class_id) {\r\n        setCourses([]);\r\n        return;\r\n      }\r\n\r\n      // Get class details\r\n      const { data: classData } = await supabase\r\n        .from('classes')\r\n        .select('id, class_name')\r\n        .eq('id', userData.class_id)\r\n        .single();\r\n\r\n      if (classData) {\r\n        // For now, treat class as course\r\n        const course = {\r\n          id: classData.id,\r\n          name: classData.class_name,\r\n          totalAttended: 0\r\n        };\r\n\r\n        // Get attendance count for this course\r\n        const { data: sessions } = await supabase\r\n          .from('sessions')\r\n          .select('id')\r\n          .eq('class_id', classData.id);\r\n\r\n        if (sessions && sessions.length > 0) {\r\n          const { data: attendanceRecords } = await supabase\r\n            .from('attendance')\r\n            .select('id')\r\n            .eq('student_id', currentUser.id)\r\n            .in('session_id', sessions.map(s => s.id));\r\n\r\n          course.totalAttended = attendanceRecords?.length || 0;\r\n        }\r\n\r\n        setCourses([course]);\r\n      }\r\n    } catch (err) {\r\n      console.error('Error fetching courses:', err);\r\n      setCourses([]);\r\n    } finally {\r\n      setCoursesLoading(false);\r\n    }\r\n  };\r\n\r\n  const fetchActiveSections = async () => {\r\n    try {\r\n      setSectionsLoading(true);\r\n\r\n      // Get student's class\r\n      const { data: userData } = await supabase\r\n        .from('users')\r\n        .select('class_id')\r\n        .eq('id', currentUser.id)\r\n        .single();\r\n\r\n      if (!userData?.class_id) {\r\n        setActiveSections([]);\r\n        return;\r\n      }\r\n\r\n      // Get active sessions for student's class\r\n      const { data: sessions } = await supabase\r\n        .from('sessions')\r\n        .select(`\r\n          id,\r\n          token,\r\n          created_at,\r\n          expires_at,\r\n          class_id,\r\n          classes (\r\n            class_name\r\n          )\r\n        `)\r\n        .eq('class_id', userData.class_id)\r\n        .gt('expires_at', new Date().toISOString());\r\n\r\n      setActiveSections(sessions || []);\r\n    } catch (err) {\r\n      console.error('Error fetching active sections:', err);\r\n      setActiveSections([]);\r\n    } finally {\r\n      setSectionsLoading(false);\r\n    }\r\n  };\r\n\r\n  const fetchAttendanceHistory = async (courseId) => {\r\n    try {\r\n      setHistoryLoading(true);\r\n\r\n      const { data: sessions } = await supabase\r\n        .from('sessions')\r\n        .select('id, created_at')\r\n        .eq('class_id', courseId);\r\n\r\n      if (!sessions || sessions.length === 0) {\r\n        setAttendanceHistory(prev => ({ ...prev, [courseId]: [] }));\r\n        return;\r\n      }\r\n\r\n      const { data: attendanceRecords } = await supabase\r\n        .from('attendance')\r\n        .select(`\r\n          id,\r\n          timestamp,\r\n          status,\r\n          sessions (\r\n            created_at\r\n          )\r\n        `)\r\n        .eq('student_id', currentUser.id)\r\n        .in('session_id', sessions.map(s => s.id))\r\n        .order('timestamp', { ascending: false });\r\n\r\n      const history = attendanceRecords?.map(record => ({\r\n        id: record.id,\r\n        date: new Date(record.sessions?.created_at).toLocaleDateString(),\r\n        status: record.status || 'absent'\r\n      })) || [];\r\n\r\n      setAttendanceHistory(prev => ({ ...prev, [courseId]: history }));\r\n    } catch (err) {\r\n      console.error('Error fetching attendance history:', err);\r\n      setAttendanceHistory(prev => ({ ...prev, [courseId]: [] }));\r\n    } finally {\r\n      setHistoryLoading(false);\r\n    }\r\n  };\r\n\r\n  const handleMarkAttendance = async () => {\r\n    if (!selectedSection) {\r\n      setError('Please select a section first');\r\n      return;\r\n    }\r\n\r\n    try {\r\n      setMarking(true);\r\n      setError(null);\r\n      setSuccess(null);\r\n\r\n      // Check if already marked today for this section\r\n      const today = new Date().toDateString();\r\n      const { data: existingAttendance } = await supabase\r\n        .from('attendance')\r\n        .select('id')\r\n        .eq('student_id', currentUser.id)\r\n        .eq('session_id', selectedSection.id);\r\n\r\n      if (existingAttendance && existingAttendance.length > 0) {\r\n        setError('You have already marked attendance for this section today');\r\n        return;\r\n      }\r\n\r\n      // Mark attendance\r\n      const { error: insertError } = await supabase\r\n        .from('attendance')\r\n        .insert([\r\n          {\r\n            session_id: selectedSection.id,\r\n            student_id: currentUser.id,\r\n            status: 'present',\r\n            timestamp: new Date().toISOString(),\r\n          }\r\n        ]);\r\n\r\n      if (insertError) throw insertError;\r\n\r\n      setSuccess('‚úÖ Attendance marked successfully!');\r\n\r\n      // Refresh data\r\n      fetchCourses();\r\n      fetchActiveSections();\r\n\r\n      setTimeout(() => setSuccess(null), 3000);\r\n    } catch (err) {\r\n      console.error('Error marking attendance:', err);\r\n      setError(`‚ùå Error: ${err.message}`);\r\n    } finally {\r\n      setMarking(false);\r\n    }\r\n  };\r\n\r\n  const handleCourseClick = (course) => {\r\n    fetchAttendanceHistory(course.id);\r\n  };\r\n\r\n  if (loading) {\r\n    return (\r\n      <div className=\"flex items-center justify-center h-screen bg-blue-50\">\r\n        <div className=\"text-center\">\r\n          <div className=\"inline-block animate-spin rounded-full h-16 w-16 border-4 border-blue-200 border-t-blue-600 mb-4\" />\r\n          <p className=\"text-gray-600 font-medium\">Loading dashboard...</p>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  if (!currentUser || userRole !== 'student') {\r\n    return null;\r\n  }\r\n\r\n  return (\r\n    <Layout role=\"student\">\r\n      <div className=\"space-y-8\">\r\n        <div>\r\n          <h1 className=\"text-3xl font-bold mb-2\">Student Dashboard</h1>\r\n          <p className=\"text-gray-600\">Mark your attendance and view your courses</p>\r\n        </div>\r\n\r\n        {error && (\r\n          <Alert type=\"error\" title=\"Error\" message={error} />\r\n        )}\r\n\r\n        {success && (\r\n          <Alert type=\"success\" title=\"Success\" message={success} />\r\n        )}\r\n\r\n        {/* Mark Attendance for Active Section */}\r\n        <Card title=\"‚úÖ Mark Attendance\">\r\n          {sectionsLoading ? (\r\n            <p className=\"text-gray-600\">Loading active sections...</p>\r\n          ) : activeSections.length > 0 ? (\r\n            <div className=\"space-y-4\">\r\n              <div>\r\n                <label className=\"block text-sm font-medium text-gray-700 mb-2\">\r\n                  Select Active Section\r\n                </label>\r\n                <select\r\n                  value={selectedSection?.id || ''}\r\n                  onChange={(e) => {\r\n                    const section = activeSections.find(s => s.id === e.target.value);\r\n                    setSelectedSection(section);\r\n                  }}\r\n                  className=\"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500\"\r\n                >\r\n                  <option value=\"\">Choose a section...</option>\r\n                  {activeSections.map(section => (\r\n                    <option key={section.id} value={section.id}>\r\n                      {section.classes?.class_name} - {new Date(section.created_at).toLocaleDateString()}\r\n                    </option>\r\n                  ))}\r\n                </select>\r\n              </div>\r\n\r\n              {selectedSection && (\r\n                <div className=\"bg-blue-50 p-4 rounded-lg\">\r\n                  <h3 className=\"font-semibold text-blue-900\">\r\n                    {selectedSection.classes?.class_name}\r\n                  </h3>\r\n                  <p className=\"text-sm text-blue-700\">\r\n                    Started: {new Date(selectedSection.created_at).toLocaleString()}\r\n                  </p>\r\n                  <Button\r\n                    variant=\"primary\"\r\n                    onClick={handleMarkAttendance}\r\n                    disabled={marking}\r\n                    className=\"mt-3\"\r\n                  >\r\n                    {marking ? '‚è≥ Marking...' : '‚úÖ Mark Present'}\r\n                  </Button>\r\n                </div>\r\n              )}\r\n            </div>\r\n          ) : (\r\n            <p className=\"text-gray-600\">No active sections available for attendance marking</p>\r\n          )}\r\n        </Card>\r\n\r\n        {/* Registered Courses */}\r\n        <Card title=\"üìö My Courses\">\r\n          {coursesLoading ? (\r\n            <p className=\"text-gray-600\">Loading courses...</p>\r\n          ) : courses.length > 0 ? (\r\n            <div className=\"grid grid-cols-1 md:grid-cols-2 gap-6\">\r\n              {courses.map((course) => (\r\n                <div\r\n                  key={course.id}\r\n                  className=\"p-4 bg-white rounded-lg border border-gray-200 cursor-pointer hover:shadow-md transition\"\r\n                  onClick={() => handleCourseClick(course)}\r\n                >\r\n                  <div className=\"flex justify-between items-start mb-3\">\r\n                    <h3 className=\"font-semibold text-gray-900\">{course.name}</h3>\r\n                    <div className=\"flex items-center\">\r\n                      <div className=\"w-12 h-12 bg-blue-100 rounded-full flex items-center justify-center\">\r\n                        <span className=\"text-lg font-bold text-blue-600\">{course.totalAttended}</span>\r\n                      </div>\r\n                    </div>\r\n                  </div>\r\n\r\n                  {attendanceHistory[course.id] && (\r\n                    <div className=\"mt-3\">\r\n                      <h4 className=\"text-sm font-medium text-gray-700 mb-2\">Recent Attendance:</h4>\r\n                      <div className=\"space-y-1\">\r\n                        {attendanceHistory[course.id].slice(0, 3).map((record) => (\r\n                          <div key={record.id} className=\"flex justify-between text-sm\">\r\n                            <span>{record.date}</span>\r\n                            <Badge\r\n                              label={record.status.toUpperCase()}\r\n                              variant={record.status === 'present' ? 'success' : 'danger'}\r\n                            />\r\n                          </div>\r\n                        ))}\r\n                      </div>\r\n                    </div>\r\n                  )}\r\n                </div>\r\n              ))}\r\n            </div>\r\n          ) : (\r\n            <p className=\"text-gray-600\">No registered courses</p>\r\n          )}\r\n        </Card>\r\n      </div>\r\n    </Layout>\r\n  );\r\n};\r\n\r\nexport default StudentDashboard;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}