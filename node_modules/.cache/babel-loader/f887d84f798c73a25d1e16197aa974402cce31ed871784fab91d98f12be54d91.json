{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\PFI\\\\Desktop\\\\ATTENDANCE\\\\ATTENDANCE\\\\src\\\\pages\\\\StudentDashboard.js\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect } from 'react';\nimport { useNavigate } from 'react-router-dom';\nimport { supabase } from '../supabase/supabase';\nimport { useAuth } from '../contexts/AuthContext';\nimport Layout from '../components/Layout';\nimport Card from '../components/Card';\nimport Button from '../components/Button';\nimport Badge from '../components/Badge';\nimport Alert from '../components/Alert';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst StudentDashboard = () => {\n  _s();\n  var _selectedSession, _selectedSession$clas, _selectedSession$clas2, _selectedSession$clas3, _selectedSession$clas4;\n  const {\n    currentUser,\n    userRole,\n    loading\n  } = useAuth();\n  const navigate = useNavigate();\n\n  // Active session state\n  const [activeSession, setActiveSession] = useState(null);\n  const [sessionsLoading, setSessionsLoading] = useState(true);\n  const [marking, setMarking] = useState(false);\n  const [timeRemaining, setTimeRemaining] = useState(null);\n\n  // Attendance summary\n  const [attendanceSummary, setAttendanceSummary] = useState({\n    totalAttended: 0,\n    totalSessions: 0,\n    percentage: 0\n  });\n  const [summaryLoading, setSummaryLoading] = useState(true);\n\n  // Course attendance\n  const [courseAttendance, setCourseAttendance] = useState([]);\n  const [courseLoading, setCourseLoading] = useState(true);\n\n  // UI state\n  const [error, setError] = useState(null);\n  const [success, setSuccess] = useState(null);\n\n  // Protect route - only allow students\n  useEffect(() => {\n    if (loading) return;\n    if (!currentUser || userRole !== 'student') {\n      navigate('/student');\n      return;\n    }\n    fetchActiveSession();\n    fetchAttendanceSummary();\n    fetchCourseAttendance();\n  }, [currentUser, userRole, loading, navigate]);\n\n  // Timer for session countdown\n  useEffect(() => {\n    if (!activeSession) return;\n    const timer = setInterval(() => {\n      const now = new Date();\n      const [endHour, endMin] = activeSession.end_time.split(':');\n      const sessionDate = new Date(activeSession.session_date);\n      const endTime = new Date(sessionDate);\n      endTime.setHours(parseInt(endHour), parseInt(endMin), 0);\n      const diffMs = endTime - now;\n      if (diffMs <= 0) {\n        setTimeRemaining(null);\n        setActiveSession(null);\n        clearInterval(timer);\n      } else {\n        const minutes = Math.floor(diffMs / 60000);\n        const seconds = Math.floor(diffMs % 60000 / 1000);\n        setTimeRemaining(`${minutes} min ${seconds} sec remaining`);\n      }\n    }, 1000);\n    return () => clearInterval(timer);\n  }, [activeSession]);\n  const fetchActiveSession = async () => {\n    try {\n      setSessionsLoading(true);\n      const now = new Date();\n\n      // Get the next/currently active session\n      const {\n        data,\n        error\n      } = await supabase.from('sessions').select(`\n          id,\n          session_date,\n          start_time,\n          end_time,\n          classes (\n            id,\n            class_name,\n            delegate_id,\n            users!delegate_id (\n              name\n            ),\n            courses (\n              course_code,\n              course_title\n            )\n          )\n        `).order('start_time', {\n        ascending: false\n      });\n      if (error) throw error;\n\n      // Find the first active session (current or upcoming)\n      const active = (data || []).find(session => {\n        if (!session.session_date || !session.end_time) return false;\n        const sessionDate = new Date(session.session_date);\n        const [startHour, startMin] = session.start_time.split(':');\n        const [endHour, endMin] = session.end_time.split(':');\n        const sessionStart = new Date(sessionDate);\n        sessionStart.setHours(parseInt(startHour), parseInt(startMin), 0);\n        const sessionEnd = new Date(sessionDate);\n        sessionEnd.setHours(parseInt(endHour), parseInt(endMin), 0);\n\n        // Show if currently happening\n        return now >= sessionStart && now <= sessionEnd;\n      });\n      setActiveSession(active || null);\n    } catch (err) {\n      console.error('Error fetching active session:', err);\n      setActiveSession(null);\n    } finally {\n      setSessionsLoading(false);\n    }\n  };\n  const fetchAttendanceSummary = async () => {\n    try {\n      setSummaryLoading(true);\n\n      // Get attendance records\n      const {\n        data: records\n      } = await supabase.from('attendance').select('id').eq('student_id', currentUser.id);\n\n      // Get all sessions\n      const {\n        data: sessions\n      } = await supabase.from('sessions').select('id');\n      const totalAttended = (records || []).length;\n      const totalSessions = (sessions || []).length;\n      const percentage = totalSessions > 0 ? Math.round(totalAttended / totalSessions * 100) : 0;\n      setAttendanceSummary({\n        totalAttended,\n        totalSessions,\n        percentage\n      });\n    } catch (err) {\n      console.error('Error fetching summary:', err);\n    } finally {\n      setSummaryLoading(false);\n    }\n  };\n  const fetchCourseAttendance = async () => {\n    try {\n      setCourseLoading(true);\n      const {\n        data: records\n      } = await supabase.from('attendance').select(`\n          id,\n          sessions (\n            classes (\n              courses (\n                id,\n                course_code,\n                course_title\n              )\n            )\n          )\n        `).eq('student_id', currentUser.id);\n\n      // Group by course and count\n      const courseMap = {};\n      (records || []).forEach(record => {\n        var _record$sessions, _record$sessions$clas;\n        const course = (_record$sessions = record.sessions) === null || _record$sessions === void 0 ? void 0 : (_record$sessions$clas = _record$sessions.classes) === null || _record$sessions$clas === void 0 ? void 0 : _record$sessions$clas.courses;\n        if (course && !courseMap[course.id]) {\n          courseMap[course.id] = {\n            id: course.id,\n            code: course.course_code,\n            title: course.course_title,\n            attended: 0\n          };\n        }\n        if (course) {\n          courseMap[course.id].attended++;\n        }\n      });\n\n      // Get total sessions per course\n      const {\n        data: allSessions\n      } = await supabase.from('sessions').select(`\n          id,\n          classes (\n            courses (id)\n          )\n        `);\n      Object.values(courseMap).forEach(course => {\n        const total = (allSessions || []).filter(s => {\n          var _s$classes, _s$classes$courses;\n          return ((_s$classes = s.classes) === null || _s$classes === void 0 ? void 0 : (_s$classes$courses = _s$classes.courses) === null || _s$classes$courses === void 0 ? void 0 : _s$classes$courses.id) === course.id;\n        }).length;\n        course.total = total || course.attended;\n        course.percentage = course.total > 0 ? Math.round(course.attended / course.total * 100) : 0;\n        course.eligible = course.percentage >= 75;\n      });\n      setCourseAttendance(Object.values(courseMap));\n    } catch (err) {\n      console.error('Error fetching course attendance:', err);\n    } finally {\n      setCourseLoading(false);\n    }\n  };\n  const handleMarkAttendance = async () => {\n    if (!activeSession) {\n      setError('No active session to mark');\n      return;\n    }\n    try {\n      setMarking(true);\n      setError(null);\n\n      // Validate session time\n      const now = new Date();\n      const [startHour, startMin] = activeSession.start_time.split(':');\n      const [endHour, endMin] = activeSession.end_time.split(':');\n      const startTime = new Date();\n      startTime.setHours(parseInt(startHour), parseInt(startMin), 0);\n      const endTime = new Date();\n      endTime.setHours(parseInt(endHour), parseInt(endMin), 59);\n      if (now < startTime || now > endTime) {\n        setError('Attendance can only be marked during the session time window');\n        return;\n      }\n\n      // Check for existing attendance\n      const {\n        data: existing\n      } = await supabase.from('attendance').select('id').eq('session_id', activeSession.id).eq('student_id', currentUser.id).single();\n      if (existing) {\n        setError('You have already marked attendance for this session');\n        return;\n      }\n\n      // Insert attendance\n      const {\n        error: insertError\n      } = await supabase.from('attendance').insert({\n        session_id: activeSession.id,\n        student_id: currentUser.id,\n        created_at: new Date().toISOString()\n      });\n      if (insertError) throw insertError;\n      setSuccess('Attendance marked successfully');\n      setActiveSession(null);\n      fetchActiveSession();\n      fetchAttendanceSummary();\n      fetchCourseAttendance();\n      setTimeout(() => setSuccess(null), 3000);\n    } catch (err) {\n      console.error('Error marking attendance:', err);\n      setError(err.message);\n    } finally {\n      setMarking(false);\n    }\n  };\n  if (loading) {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"flex items-center justify-center h-screen bg-blue-50\",\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"text-center\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"inline-block animate-spin rounded-full h-16 w-16 border-4 border-blue-200 border-t-blue-600 mb-4\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 304,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          className: \"text-gray-600 font-medium\",\n          children: \"Loading dashboard...\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 305,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 303,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 302,\n      columnNumber: 7\n    }, this);\n  }\n  if (!currentUser || userRole !== 'student') {\n    return null;\n  }\n  return /*#__PURE__*/_jsxDEV(Layout, {\n    role: \"student\",\n    children: /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"max-w-6xl mx-auto space-y-8\",\n      children: [error && /*#__PURE__*/_jsxDEV(Alert, {\n        type: \"error\",\n        title: \"Error\",\n        message: error\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 320,\n        columnNumber: 11\n      }, this), success && /*#__PURE__*/_jsxDEV(Alert, {\n        type: \"success\",\n        title: \"Success\",\n        message: success\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 324,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"bg-gradient-to-br from-blue-50 to-indigo-50 rounded-2xl shadow-lg border border-blue-100 overflow-hidden\",\n        children: /*#__PURE__*/_jsxDEV(Card, {\n          title: \"\\u2705 Mark Attendance\",\n          className: \"border-0 shadow-none bg-transparent\",\n          children: sessionsLoading ? /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"flex items-center justify-center py-8\",\n            children: /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"text-center\",\n              children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"inline-block animate-spin rounded-full h-10 w-10 border-2 border-blue-200 border-t-blue-600 mb-2\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 333,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                className: \"text-gray-600\",\n                children: \"Loading active sessions...\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 334,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 332,\n              columnNumber: 17\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 331,\n            columnNumber: 15\n          }, this) : activeSessions.length > 0 ? /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"space-y-6\",\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                className: \"block text-sm font-semibold text-gray-700 mb-3\",\n                children: \"Select Active Session\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 341,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"select\", {\n                value: ((_selectedSession = selectedSession) === null || _selectedSession === void 0 ? void 0 : _selectedSession.id) || '',\n                onChange: e => {\n                  const session = activeSessions.find(s => s.id === e.target.value);\n                  setSelectedSession(session);\n                  setTimeRemaining(null);\n                },\n                className: \"w-full px-4 py-3 border-2 border-gray-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent text-gray-900 bg-white\",\n                children: [/*#__PURE__*/_jsxDEV(\"option\", {\n                  value: \"\",\n                  children: \"-- Select a session --\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 353,\n                  columnNumber: 21\n                }, this), activeSessions.map(session => {\n                  var _session$classes, _session$classes$cour, _session$classes2;\n                  return /*#__PURE__*/_jsxDEV(\"option\", {\n                    value: session.id,\n                    children: [(_session$classes = session.classes) === null || _session$classes === void 0 ? void 0 : (_session$classes$cour = _session$classes.courses) === null || _session$classes$cour === void 0 ? void 0 : _session$classes$cour.course_code, \" - \", (_session$classes2 = session.classes) === null || _session$classes2 === void 0 ? void 0 : _session$classes2.class_name, \" (\", session.start_time, \" - \", session.end_time, \")\"]\n                  }, session.id, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 355,\n                    columnNumber: 23\n                  }, this);\n                })]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 344,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 340,\n              columnNumber: 17\n            }, this), selectedSession && /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"bg-white rounded-xl shadow-md border-2 border-green-100 p-6\",\n              children: /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"space-y-4\",\n                children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                  children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n                    className: \"text-xl font-bold text-gray-900\",\n                    children: (_selectedSession$clas = selectedSession.classes) === null || _selectedSession$clas === void 0 ? void 0 : (_selectedSession$clas2 = _selectedSession$clas.courses) === null || _selectedSession$clas2 === void 0 ? void 0 : _selectedSession$clas2.course_code\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 368,\n                    columnNumber: 25\n                  }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                    className: \"text-gray-600 mt-1\",\n                    children: (_selectedSession$clas3 = selectedSession.classes) === null || _selectedSession$clas3 === void 0 ? void 0 : (_selectedSession$clas4 = _selectedSession$clas3.courses) === null || _selectedSession$clas4 === void 0 ? void 0 : _selectedSession$clas4.course_title\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 371,\n                    columnNumber: 25\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 367,\n                  columnNumber: 23\n                }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"grid grid-cols-2 gap-4 py-4 border-y border-gray-200\",\n                  children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                    className: \"flex items-center space-x-2\",\n                    children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                      className: \"text-2xl\",\n                      children: \"\\uD83D\\uDCC5\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 379,\n                      columnNumber: 27\n                    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                      children: [/*#__PURE__*/_jsxDEV(\"p\", {\n                        className: \"text-xs text-gray-500 uppercase font-semibold\",\n                        children: \"Date\"\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 381,\n                        columnNumber: 29\n                      }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                        className: \"font-semibold text-gray-900\",\n                        children: selectedSession.session_date\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 382,\n                        columnNumber: 29\n                      }, this)]\n                    }, void 0, true, {\n                      fileName: _jsxFileName,\n                      lineNumber: 380,\n                      columnNumber: 27\n                    }, this)]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 378,\n                    columnNumber: 25\n                  }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                    className: \"flex items-center space-x-2\",\n                    children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                      className: \"text-2xl\",\n                      children: \"\\uD83D\\uDD50\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 386,\n                      columnNumber: 27\n                    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                      children: [/*#__PURE__*/_jsxDEV(\"p\", {\n                        className: \"text-xs text-gray-500 uppercase font-semibold\",\n                        children: \"Time\"\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 388,\n                        columnNumber: 29\n                      }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                        className: \"font-semibold text-gray-900\",\n                        children: [selectedSession.start_time, \" - \", selectedSession.end_time]\n                      }, void 0, true, {\n                        fileName: _jsxFileName,\n                        lineNumber: 389,\n                        columnNumber: 29\n                      }, this)]\n                    }, void 0, true, {\n                      fileName: _jsxFileName,\n                      lineNumber: 387,\n                      columnNumber: 27\n                    }, this)]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 385,\n                    columnNumber: 25\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 377,\n                  columnNumber: 23\n                }, this), timeRemaining && /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"bg-blue-50 rounded-lg p-3 text-center border border-blue-200\",\n                  children: /*#__PURE__*/_jsxDEV(\"p\", {\n                    className: \"text-sm text-blue-700 font-semibold\",\n                    children: [\"\\u23F1\\uFE0F \", timeRemaining]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 397,\n                    columnNumber: 27\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 396,\n                  columnNumber: 25\n                }, this), /*#__PURE__*/_jsxDEV(Button, {\n                  variant: \"primary\",\n                  onClick: handleMarkAttendance,\n                  disabled: marking,\n                  className: \"w-full py-3 text-base font-semibold\",\n                  children: marking ? '⏳ Marking...' : '✅ Mark Attendance'\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 402,\n                  columnNumber: 23\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 365,\n                columnNumber: 21\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 364,\n              columnNumber: 19\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 338,\n            columnNumber: 15\n          }, this) : /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"py-12 text-center\",\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"text-5xl mb-3\",\n              children: \"\\uD83D\\uDCED\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 416,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n              className: \"text-gray-600 text-lg\",\n              children: \"No active sessions available at this time\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 417,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n              className: \"text-gray-500 text-sm mt-2\",\n              children: \"Check back later when a session is live\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 418,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 415,\n            columnNumber: 15\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 329,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 328,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n          className: \"text-xl font-bold text-gray-900 mb-4\",\n          children: \"\\uD83D\\uDCCA Attendance Overview\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 426,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"grid grid-cols-1 md:grid-cols-4 gap-4\",\n          children: [/*#__PURE__*/_jsxDEV(StatCard, {\n            title: \"Sessions Attended\",\n            value: attendanceSummary.totalAttended,\n            icon: \"\\u2705\",\n            color: \"green\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 428,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(StatCard, {\n            title: \"Total Sessions\",\n            value: attendanceSummary.totalSessions,\n            icon: \"\\uD83D\\uDCC5\",\n            color: \"blue\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 434,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(StatCard, {\n            title: \"Attendance Rate\",\n            value: `${attendanceSummary.percentage}%`,\n            icon: \"\\uD83D\\uDCC8\",\n            color: attendanceSummary.percentage >= 75 ? 'green' : 'red'\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 440,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"bg-white rounded-lg shadow p-6 border-l-4 border-blue-500\",\n            children: [/*#__PURE__*/_jsxDEV(\"p\", {\n              className: \"text-sm text-gray-600 font-semibold uppercase mb-2\",\n              children: \"Status\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 447,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n              className: \"text-2xl font-bold\",\n              children: attendanceSummary.percentage >= 75 ? /*#__PURE__*/_jsxDEV(\"span\", {\n                className: \"text-green-600\",\n                children: \"\\u2705 On Track\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 450,\n                columnNumber: 19\n              }, this) : /*#__PURE__*/_jsxDEV(\"span\", {\n                className: \"text-red-600\",\n                children: \"\\u26A0\\uFE0F At Risk\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 452,\n                columnNumber: 19\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 448,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 446,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 427,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 425,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Card, {\n        title: \"\\uD83D\\uDCDA Course Attendance Details\",\n        children: attendanceLoading ? /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"text-center py-8\",\n          children: /*#__PURE__*/_jsxDEV(\"p\", {\n            className: \"text-gray-600\",\n            children: \"Loading attendance details...\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 463,\n            columnNumber: 15\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 462,\n          columnNumber: 13\n        }, this) : courseAttendance.length > 0 ? /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"space-y-4\",\n          children: courseAttendance.map(course => /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"bg-white border border-gray-200 rounded-lg p-5 hover:shadow-md transition-shadow\",\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"flex items-start justify-between mb-4\",\n              children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"flex-1\",\n                children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n                  className: \"font-bold text-gray-900\",\n                  children: [course.code, \" - \", course.title]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 471,\n                  columnNumber: 23\n                }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                  className: \"text-sm text-gray-500 mt-1\",\n                  children: [course.attendedSessions, \" of \", course.totalSessions, \" sessions attended\"]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 474,\n                  columnNumber: 23\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 470,\n                columnNumber: 21\n              }, this), /*#__PURE__*/_jsxDEV(Badge, {\n                label: course.eligible ? 'ELIGIBLE' : 'AT RISK',\n                variant: course.eligible ? 'success' : 'danger'\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 478,\n                columnNumber: 21\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 469,\n              columnNumber: 19\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"mb-4\",\n              children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"flex justify-between items-center mb-2\",\n                children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                  className: \"text-sm font-semibold text-gray-700\",\n                  children: [\"Attendance: \", course.percentage, \"%\"]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 487,\n                  columnNumber: 23\n                }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                  className: \"text-sm text-gray-500\",\n                  children: course.eligible ? '✅ 75%+' : '⚠️ Below 75%'\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 488,\n                  columnNumber: 23\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 486,\n                columnNumber: 21\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"w-full bg-gray-200 rounded-full h-2.5\",\n                children: /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: `h-2.5 rounded-full transition-all ${course.eligible ? 'bg-green-500' : 'bg-red-500'}`,\n                  style: {\n                    width: `${Math.min(course.percentage, 100)}%`\n                  }\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 491,\n                  columnNumber: 23\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 490,\n                columnNumber: 21\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 485,\n              columnNumber: 19\n            }, this), /*#__PURE__*/_jsxDEV(Button, {\n              variant: \"secondary\",\n              size: \"sm\",\n              onClick: () => navigate(`/student/history?course=${course.id}`),\n              children: \"\\uD83D\\uDCCB View Full History\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 499,\n              columnNumber: 19\n            }, this)]\n          }, course.id, true, {\n            fileName: _jsxFileName,\n            lineNumber: 468,\n            columnNumber: 17\n          }, this))\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 466,\n          columnNumber: 13\n        }, this) : /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"text-center py-8\",\n          children: /*#__PURE__*/_jsxDEV(\"p\", {\n            className: \"text-gray-600\",\n            children: \"No attendance records yet\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 511,\n            columnNumber: 15\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 510,\n          columnNumber: 13\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 460,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Card, {\n        title: \"\\uD83D\\uDCD6 My Courses\",\n        children: coursesLoading ? /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"text-center py-8\",\n          children: /*#__PURE__*/_jsxDEV(\"p\", {\n            className: \"text-gray-600\",\n            children: \"Loading courses...\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 520,\n            columnNumber: 15\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 519,\n          columnNumber: 13\n        }, this) : enrolledCourses.length > 0 ? /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"grid grid-cols-1 md:grid-cols-2 gap-4\",\n          children: enrolledCourses.map(course => /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"bg-gradient-to-br from-blue-50 to-indigo-50 rounded-lg p-5 border border-blue-200\",\n            children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n              className: \"font-bold text-gray-900 mb-2\",\n              children: course.course_code\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 526,\n              columnNumber: 19\n            }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n              className: \"text-sm text-gray-700 mb-3\",\n              children: course.course_title\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 529,\n              columnNumber: 19\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"space-y-1 text-sm text-gray-600\",\n              children: [course.program && /*#__PURE__*/_jsxDEV(\"p\", {\n                children: [\"\\uD83D\\uDCCD \", course.program]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 533,\n                columnNumber: 40\n              }, this), course.year_level && /*#__PURE__*/_jsxDEV(\"p\", {\n                children: [\"\\uD83D\\uDCCA Level: \", course.year_level]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 534,\n                columnNumber: 43\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 532,\n              columnNumber: 19\n            }, this)]\n          }, course.id, true, {\n            fileName: _jsxFileName,\n            lineNumber: 525,\n            columnNumber: 17\n          }, this))\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 523,\n          columnNumber: 13\n        }, this) : /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"text-center py-8\",\n          children: /*#__PURE__*/_jsxDEV(\"p\", {\n            className: \"text-gray-600\",\n            children: \"No courses enrolled yet\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 541,\n            columnNumber: 15\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 540,\n          columnNumber: 13\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 517,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"grid grid-cols-1 md:grid-cols-3 gap-4\",\n        children: [/*#__PURE__*/_jsxDEV(Button, {\n          variant: \"secondary\",\n          onClick: () => navigate('/student/history'),\n          className: \"py-3 text-base\",\n          children: \"\\uD83D\\uDCCB Attendance History\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 548,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(Button, {\n          variant: \"secondary\",\n          onClick: () => navigate('/student/courses'),\n          className: \"py-3 text-base\",\n          children: \"\\uD83D\\uDCDA All Courses\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 555,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(Button, {\n          variant: \"secondary\",\n          onClick: () => navigate('/student/profile'),\n          className: \"py-3 text-base\",\n          children: \"\\uD83D\\uDC64 My Profile\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 562,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 547,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 317,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 316,\n    columnNumber: 5\n  }, this);\n};\n_s(StudentDashboard, \"igXKo8kHUzpjnFgn/YSrGANWjRQ=\", false, function () {\n  return [useAuth, useNavigate];\n});\n_c = StudentDashboard;\nexport default StudentDashboard;\nvar _c;\n$RefreshReg$(_c, \"StudentDashboard\");","map":{"version":3,"names":["React","useState","useEffect","useNavigate","supabase","useAuth","Layout","Card","Button","Badge","Alert","jsxDEV","_jsxDEV","StudentDashboard","_s","_selectedSession","_selectedSession$clas","_selectedSession$clas2","_selectedSession$clas3","_selectedSession$clas4","currentUser","userRole","loading","navigate","activeSession","setActiveSession","sessionsLoading","setSessionsLoading","marking","setMarking","timeRemaining","setTimeRemaining","attendanceSummary","setAttendanceSummary","totalAttended","totalSessions","percentage","summaryLoading","setSummaryLoading","courseAttendance","setCourseAttendance","courseLoading","setCourseLoading","error","setError","success","setSuccess","fetchActiveSession","fetchAttendanceSummary","fetchCourseAttendance","timer","setInterval","now","Date","endHour","endMin","end_time","split","sessionDate","session_date","endTime","setHours","parseInt","diffMs","clearInterval","minutes","Math","floor","seconds","data","from","select","order","ascending","active","find","session","startHour","startMin","start_time","sessionStart","sessionEnd","err","console","records","eq","id","sessions","length","round","courseMap","forEach","record","_record$sessions","_record$sessions$clas","course","classes","courses","code","course_code","title","course_title","attended","allSessions","Object","values","total","filter","s","_s$classes","_s$classes$courses","eligible","handleMarkAttendance","startTime","existing","single","insertError","insert","session_id","student_id","created_at","toISOString","setTimeout","message","className","children","fileName","_jsxFileName","lineNumber","columnNumber","role","type","activeSessions","value","selectedSession","onChange","e","target","setSelectedSession","map","_session$classes","_session$classes$cour","_session$classes2","class_name","variant","onClick","disabled","StatCard","icon","color","attendanceLoading","attendedSessions","label","style","width","min","size","coursesLoading","enrolledCourses","program","year_level","_c","$RefreshReg$"],"sources":["C:/Users/PFI/Desktop/ATTENDANCE/ATTENDANCE/src/pages/StudentDashboard.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\r\nimport { useNavigate } from 'react-router-dom';\r\nimport { supabase } from '../supabase/supabase';\r\nimport { useAuth } from '../contexts/AuthContext';\r\nimport Layout from '../components/Layout';\r\nimport Card from '../components/Card';\r\nimport Button from '../components/Button';\r\nimport Badge from '../components/Badge';\r\nimport Alert from '../components/Alert';\r\n\r\nconst StudentDashboard = () => {\r\n  const { currentUser, userRole, loading } = useAuth();\r\n  const navigate = useNavigate();\r\n  \r\n  // Active session state\r\n  const [activeSession, setActiveSession] = useState(null);\r\n  const [sessionsLoading, setSessionsLoading] = useState(true);\r\n  const [marking, setMarking] = useState(false);\r\n  const [timeRemaining, setTimeRemaining] = useState(null);\r\n  \r\n  // Attendance summary\r\n  const [attendanceSummary, setAttendanceSummary] = useState({\r\n    totalAttended: 0,\r\n    totalSessions: 0,\r\n    percentage: 0\r\n  });\r\n  const [summaryLoading, setSummaryLoading] = useState(true);\r\n  \r\n  // Course attendance\r\n  const [courseAttendance, setCourseAttendance] = useState([]);\r\n  const [courseLoading, setCourseLoading] = useState(true);\r\n  \r\n  // UI state\r\n  const [error, setError] = useState(null);\r\n  const [success, setSuccess] = useState(null);\r\n\r\n  // Protect route - only allow students\r\n  useEffect(() => {\r\n    if (loading) return;\r\n\r\n    if (!currentUser || userRole !== 'student') {\r\n      navigate('/student');\r\n      return;\r\n    }\r\n\r\n    fetchActiveSession();\r\n    fetchAttendanceSummary();\r\n    fetchCourseAttendance();\r\n  }, [currentUser, userRole, loading, navigate]);\r\n\r\n  // Timer for session countdown\r\n  useEffect(() => {\r\n    if (!activeSession) return;\r\n\r\n    const timer = setInterval(() => {\r\n      const now = new Date();\r\n      const [endHour, endMin] = activeSession.end_time.split(':');\r\n      \r\n      const sessionDate = new Date(activeSession.session_date);\r\n      const endTime = new Date(sessionDate);\r\n      endTime.setHours(parseInt(endHour), parseInt(endMin), 0);\r\n      \r\n      const diffMs = endTime - now;\r\n      \r\n      if (diffMs <= 0) {\r\n        setTimeRemaining(null);\r\n        setActiveSession(null);\r\n        clearInterval(timer);\r\n      } else {\r\n        const minutes = Math.floor(diffMs / 60000);\r\n        const seconds = Math.floor((diffMs % 60000) / 1000);\r\n        setTimeRemaining(`${minutes} min ${seconds} sec remaining`);\r\n      }\r\n    }, 1000);\r\n\r\n    return () => clearInterval(timer);\r\n  }, [activeSession]);\r\n\r\n  const fetchActiveSession = async () => {\r\n    try {\r\n      setSessionsLoading(true);\r\n      const now = new Date();\r\n\r\n      // Get the next/currently active session\r\n      const { data, error } = await supabase\r\n        .from('sessions')\r\n        .select(`\r\n          id,\r\n          session_date,\r\n          start_time,\r\n          end_time,\r\n          classes (\r\n            id,\r\n            class_name,\r\n            delegate_id,\r\n            users!delegate_id (\r\n              name\r\n            ),\r\n            courses (\r\n              course_code,\r\n              course_title\r\n            )\r\n          )\r\n        `)\r\n        .order('start_time', { ascending: false });\r\n\r\n      if (error) throw error;\r\n      \r\n      // Find the first active session (current or upcoming)\r\n      const active = (data || []).find(session => {\r\n        if (!session.session_date || !session.end_time) return false;\r\n        \r\n        const sessionDate = new Date(session.session_date);\r\n        const [startHour, startMin] = session.start_time.split(':');\r\n        const [endHour, endMin] = session.end_time.split(':');\r\n        \r\n        const sessionStart = new Date(sessionDate);\r\n        sessionStart.setHours(parseInt(startHour), parseInt(startMin), 0);\r\n        \r\n        const sessionEnd = new Date(sessionDate);\r\n        sessionEnd.setHours(parseInt(endHour), parseInt(endMin), 0);\r\n        \r\n        // Show if currently happening\r\n        return now >= sessionStart && now <= sessionEnd;\r\n      });\r\n      \r\n      setActiveSession(active || null);\r\n    } catch (err) {\r\n      console.error('Error fetching active session:', err);\r\n      setActiveSession(null);\r\n    } finally {\r\n      setSessionsLoading(false);\r\n    }\r\n  };\r\n\r\n  const fetchAttendanceSummary = async () => {\r\n    try {\r\n      setSummaryLoading(true);\r\n\r\n      // Get attendance records\r\n      const { data: records } = await supabase\r\n        .from('attendance')\r\n        .select('id')\r\n        .eq('student_id', currentUser.id);\r\n\r\n      // Get all sessions\r\n      const { data: sessions } = await supabase\r\n        .from('sessions')\r\n        .select('id');\r\n\r\n      const totalAttended = (records || []).length;\r\n      const totalSessions = (sessions || []).length;\r\n      const percentage = totalSessions > 0 \r\n        ? Math.round((totalAttended / totalSessions) * 100) \r\n        : 0;\r\n\r\n      setAttendanceSummary({\r\n        totalAttended,\r\n        totalSessions,\r\n        percentage\r\n      });\r\n    } catch (err) {\r\n      console.error('Error fetching summary:', err);\r\n    } finally {\r\n      setSummaryLoading(false);\r\n    }\r\n  };\r\n\r\n  const fetchCourseAttendance = async () => {\r\n    try {\r\n      setCourseLoading(true);\r\n\r\n      const { data: records } = await supabase\r\n        .from('attendance')\r\n        .select(`\r\n          id,\r\n          sessions (\r\n            classes (\r\n              courses (\r\n                id,\r\n                course_code,\r\n                course_title\r\n              )\r\n            )\r\n          )\r\n        `)\r\n        .eq('student_id', currentUser.id);\r\n\r\n      // Group by course and count\r\n      const courseMap = {};\r\n      (records || []).forEach(record => {\r\n        const course = record.sessions?.classes?.courses;\r\n        if (course && !courseMap[course.id]) {\r\n          courseMap[course.id] = {\r\n            id: course.id,\r\n            code: course.course_code,\r\n            title: course.course_title,\r\n            attended: 0\r\n          };\r\n        }\r\n        if (course) {\r\n          courseMap[course.id].attended++;\r\n        }\r\n      });\r\n\r\n      // Get total sessions per course\r\n      const { data: allSessions } = await supabase\r\n        .from('sessions')\r\n        .select(`\r\n          id,\r\n          classes (\r\n            courses (id)\r\n          )\r\n        `);\r\n\r\n      Object.values(courseMap).forEach(course => {\r\n        const total = (allSessions || []).filter(\r\n          s => s.classes?.courses?.id === course.id\r\n        ).length;\r\n        course.total = total || course.attended;\r\n        course.percentage = course.total > 0 \r\n          ? Math.round((course.attended / course.total) * 100)\r\n          : 0;\r\n        course.eligible = course.percentage >= 75;\r\n      });\r\n\r\n      setCourseAttendance(Object.values(courseMap));\r\n    } catch (err) {\r\n      console.error('Error fetching course attendance:', err);\r\n    } finally {\r\n      setCourseLoading(false);\r\n    }\r\n  };\r\n\r\n  const handleMarkAttendance = async () => {\r\n    if (!activeSession) {\r\n      setError('No active session to mark');\r\n      return;\r\n    }\r\n\r\n    try {\r\n      setMarking(true);\r\n      setError(null);\r\n\r\n      // Validate session time\r\n      const now = new Date();\r\n      const [startHour, startMin] = activeSession.start_time.split(':');\r\n      const [endHour, endMin] = activeSession.end_time.split(':');\r\n\r\n      const startTime = new Date();\r\n      startTime.setHours(parseInt(startHour), parseInt(startMin), 0);\r\n\r\n      const endTime = new Date();\r\n      endTime.setHours(parseInt(endHour), parseInt(endMin), 59);\r\n\r\n      if (now < startTime || now > endTime) {\r\n        setError('Attendance can only be marked during the session time window');\r\n        return;\r\n      }\r\n\r\n      // Check for existing attendance\r\n      const { data: existing } = await supabase\r\n        .from('attendance')\r\n        .select('id')\r\n        .eq('session_id', activeSession.id)\r\n        .eq('student_id', currentUser.id)\r\n        .single();\r\n\r\n      if (existing) {\r\n        setError('You have already marked attendance for this session');\r\n        return;\r\n      }\r\n\r\n      // Insert attendance\r\n      const { error: insertError } = await supabase\r\n        .from('attendance')\r\n        .insert({\r\n          session_id: activeSession.id,\r\n          student_id: currentUser.id,\r\n          created_at: new Date().toISOString()\r\n        });\r\n\r\n      if (insertError) throw insertError;\r\n\r\n      setSuccess('Attendance marked successfully');\r\n      setActiveSession(null);\r\n      fetchActiveSession();\r\n      fetchAttendanceSummary();\r\n      fetchCourseAttendance();\r\n\r\n      setTimeout(() => setSuccess(null), 3000);\r\n    } catch (err) {\r\n      console.error('Error marking attendance:', err);\r\n      setError(err.message);\r\n    } finally {\r\n      setMarking(false);\r\n    }\r\n  };\r\n\r\n  if (loading) {\r\n    return (\r\n      <div className=\"flex items-center justify-center h-screen bg-blue-50\">\r\n        <div className=\"text-center\">\r\n          <div className=\"inline-block animate-spin rounded-full h-16 w-16 border-4 border-blue-200 border-t-blue-600 mb-4\" />\r\n          <p className=\"text-gray-600 font-medium\">Loading dashboard...</p>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  if (!currentUser || userRole !== 'student') {\r\n    return null;\r\n  }\r\n\r\n  return (\r\n    <Layout role=\"student\">\r\n      <div className=\"max-w-6xl mx-auto space-y-8\">\r\n        {/* Alerts */}\r\n        {error && (\r\n          <Alert type=\"error\" title=\"Error\" message={error} />\r\n        )}\r\n\r\n        {success && (\r\n          <Alert type=\"success\" title=\"Success\" message={success} />\r\n        )}\r\n\r\n        {/* ===== SECTION 1: MARK ATTENDANCE ===== */}\r\n        <div className=\"bg-gradient-to-br from-blue-50 to-indigo-50 rounded-2xl shadow-lg border border-blue-100 overflow-hidden\">\r\n          <Card title=\"✅ Mark Attendance\" className=\"border-0 shadow-none bg-transparent\">\r\n            {sessionsLoading ? (\r\n              <div className=\"flex items-center justify-center py-8\">\r\n                <div className=\"text-center\">\r\n                  <div className=\"inline-block animate-spin rounded-full h-10 w-10 border-2 border-blue-200 border-t-blue-600 mb-2\" />\r\n                  <p className=\"text-gray-600\">Loading active sessions...</p>\r\n                </div>\r\n              </div>\r\n            ) : activeSessions.length > 0 ? (\r\n              <div className=\"space-y-6\">\r\n                {/* Session Selector */}\r\n                <div>\r\n                  <label className=\"block text-sm font-semibold text-gray-700 mb-3\">\r\n                    Select Active Session\r\n                  </label>\r\n                  <select\r\n                    value={selectedSession?.id || ''}\r\n                    onChange={(e) => {\r\n                      const session = activeSessions.find(s => s.id === e.target.value);\r\n                      setSelectedSession(session);\r\n                      setTimeRemaining(null);\r\n                    }}\r\n                    className=\"w-full px-4 py-3 border-2 border-gray-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent text-gray-900 bg-white\"\r\n                  >\r\n                    <option value=\"\">-- Select a session --</option>\r\n                    {activeSessions.map(session => (\r\n                      <option key={session.id} value={session.id}>\r\n                        {session.classes?.courses?.course_code} - {session.classes?.class_name} ({session.start_time} - {session.end_time})\r\n                      </option>\r\n                    ))}\r\n                  </select>\r\n                </div>\r\n\r\n                {/* Session Details Card */}\r\n                {selectedSession && (\r\n                  <div className=\"bg-white rounded-xl shadow-md border-2 border-green-100 p-6\">\r\n                    <div className=\"space-y-4\">\r\n                      {/* Course Info */}\r\n                      <div>\r\n                        <h3 className=\"text-xl font-bold text-gray-900\">\r\n                          {selectedSession.classes?.courses?.course_code}\r\n                        </h3>\r\n                        <p className=\"text-gray-600 mt-1\">\r\n                          {selectedSession.classes?.courses?.course_title}\r\n                        </p>\r\n                      </div>\r\n\r\n                      {/* Session Details Grid */}\r\n                      <div className=\"grid grid-cols-2 gap-4 py-4 border-y border-gray-200\">\r\n                        <div className=\"flex items-center space-x-2\">\r\n                          <span className=\"text-2xl\">📅</span>\r\n                          <div>\r\n                            <p className=\"text-xs text-gray-500 uppercase font-semibold\">Date</p>\r\n                            <p className=\"font-semibold text-gray-900\">{selectedSession.session_date}</p>\r\n                          </div>\r\n                        </div>\r\n                        <div className=\"flex items-center space-x-2\">\r\n                          <span className=\"text-2xl\">🕐</span>\r\n                          <div>\r\n                            <p className=\"text-xs text-gray-500 uppercase font-semibold\">Time</p>\r\n                            <p className=\"font-semibold text-gray-900\">{selectedSession.start_time} - {selectedSession.end_time}</p>\r\n                          </div>\r\n                        </div>\r\n                      </div>\r\n\r\n                      {/* Time Remaining */}\r\n                      {timeRemaining && (\r\n                        <div className=\"bg-blue-50 rounded-lg p-3 text-center border border-blue-200\">\r\n                          <p className=\"text-sm text-blue-700 font-semibold\">⏱️ {timeRemaining}</p>\r\n                        </div>\r\n                      )}\r\n\r\n                      {/* Mark Attendance Button */}\r\n                      <Button\r\n                        variant=\"primary\"\r\n                        onClick={handleMarkAttendance}\r\n                        disabled={marking}\r\n                        className=\"w-full py-3 text-base font-semibold\"\r\n                      >\r\n                        {marking ? '⏳ Marking...' : '✅ Mark Attendance'}\r\n                      </Button>\r\n                    </div>\r\n                  </div>\r\n                )}\r\n              </div>\r\n            ) : (\r\n              <div className=\"py-12 text-center\">\r\n                <div className=\"text-5xl mb-3\">📭</div>\r\n                <p className=\"text-gray-600 text-lg\">No active sessions available at this time</p>\r\n                <p className=\"text-gray-500 text-sm mt-2\">Check back later when a session is live</p>\r\n              </div>\r\n            )}\r\n          </Card>\r\n        </div>\r\n\r\n        {/* ===== SECTION 2: ATTENDANCE SUMMARY ===== */}\r\n        <div>\r\n          <h2 className=\"text-xl font-bold text-gray-900 mb-4\">📊 Attendance Overview</h2>\r\n          <div className=\"grid grid-cols-1 md:grid-cols-4 gap-4\">\r\n            <StatCard\r\n              title=\"Sessions Attended\"\r\n              value={attendanceSummary.totalAttended}\r\n              icon=\"✅\"\r\n              color=\"green\"\r\n            />\r\n            <StatCard\r\n              title=\"Total Sessions\"\r\n              value={attendanceSummary.totalSessions}\r\n              icon=\"📅\"\r\n              color=\"blue\"\r\n            />\r\n            <StatCard\r\n              title=\"Attendance Rate\"\r\n              value={`${attendanceSummary.percentage}%`}\r\n              icon=\"📈\"\r\n              color={attendanceSummary.percentage >= 75 ? 'green' : 'red'}\r\n            />\r\n            <div className=\"bg-white rounded-lg shadow p-6 border-l-4 border-blue-500\">\r\n              <p className=\"text-sm text-gray-600 font-semibold uppercase mb-2\">Status</p>\r\n              <p className=\"text-2xl font-bold\">\r\n                {attendanceSummary.percentage >= 75 ? (\r\n                  <span className=\"text-green-600\">✅ On Track</span>\r\n                ) : (\r\n                  <span className=\"text-red-600\">⚠️ At Risk</span>\r\n                )}\r\n              </p>\r\n            </div>\r\n          </div>\r\n        </div>\r\n\r\n        {/* ===== SECTION 3: COURSE-WISE ATTENDANCE ===== */}\r\n        <Card title=\"📚 Course Attendance Details\">\r\n          {attendanceLoading ? (\r\n            <div className=\"text-center py-8\">\r\n              <p className=\"text-gray-600\">Loading attendance details...</p>\r\n            </div>\r\n          ) : courseAttendance.length > 0 ? (\r\n            <div className=\"space-y-4\">\r\n              {courseAttendance.map((course) => (\r\n                <div key={course.id} className=\"bg-white border border-gray-200 rounded-lg p-5 hover:shadow-md transition-shadow\">\r\n                  <div className=\"flex items-start justify-between mb-4\">\r\n                    <div className=\"flex-1\">\r\n                      <h3 className=\"font-bold text-gray-900\">\r\n                        {course.code} - {course.title}\r\n                      </h3>\r\n                      <p className=\"text-sm text-gray-500 mt-1\">\r\n                        {course.attendedSessions} of {course.totalSessions} sessions attended\r\n                      </p>\r\n                    </div>\r\n                    <Badge\r\n                      label={course.eligible ? 'ELIGIBLE' : 'AT RISK'}\r\n                      variant={course.eligible ? 'success' : 'danger'}\r\n                    />\r\n                  </div>\r\n\r\n                  {/* Progress Bar */}\r\n                  <div className=\"mb-4\">\r\n                    <div className=\"flex justify-between items-center mb-2\">\r\n                      <span className=\"text-sm font-semibold text-gray-700\">Attendance: {course.percentage}%</span>\r\n                      <span className=\"text-sm text-gray-500\">{course.eligible ? '✅ 75%+' : '⚠️ Below 75%'}</span>\r\n                    </div>\r\n                    <div className=\"w-full bg-gray-200 rounded-full h-2.5\">\r\n                      <div\r\n                        className={`h-2.5 rounded-full transition-all ${course.eligible ? 'bg-green-500' : 'bg-red-500'}`}\r\n                        style={{ width: `${Math.min(course.percentage, 100)}%` }}\r\n                      ></div>\r\n                    </div>\r\n                  </div>\r\n\r\n                  {/* View History Button */}\r\n                  <Button\r\n                    variant=\"secondary\"\r\n                    size=\"sm\"\r\n                    onClick={() => navigate(`/student/history?course=${course.id}`)}\r\n                  >\r\n                    📋 View Full History\r\n                  </Button>\r\n                </div>\r\n              ))}\r\n            </div>\r\n          ) : (\r\n            <div className=\"text-center py-8\">\r\n              <p className=\"text-gray-600\">No attendance records yet</p>\r\n            </div>\r\n          )}\r\n        </Card>\r\n\r\n        {/* ===== SECTION 4: MY COURSES ===== */}\r\n        <Card title=\"📖 My Courses\">\r\n          {coursesLoading ? (\r\n            <div className=\"text-center py-8\">\r\n              <p className=\"text-gray-600\">Loading courses...</p>\r\n            </div>\r\n          ) : enrolledCourses.length > 0 ? (\r\n            <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\r\n              {enrolledCourses.map((course) => (\r\n                <div key={course.id} className=\"bg-gradient-to-br from-blue-50 to-indigo-50 rounded-lg p-5 border border-blue-200\">\r\n                  <h3 className=\"font-bold text-gray-900 mb-2\">\r\n                    {course.course_code}\r\n                  </h3>\r\n                  <p className=\"text-sm text-gray-700 mb-3\">\r\n                    {course.course_title}\r\n                  </p>\r\n                  <div className=\"space-y-1 text-sm text-gray-600\">\r\n                    {course.program && <p>📍 {course.program}</p>}\r\n                    {course.year_level && <p>📊 Level: {course.year_level}</p>}\r\n                  </div>\r\n                </div>\r\n              ))}\r\n            </div>\r\n          ) : (\r\n            <div className=\"text-center py-8\">\r\n              <p className=\"text-gray-600\">No courses enrolled yet</p>\r\n            </div>\r\n          )}\r\n        </Card>\r\n\r\n        {/* ===== QUICK ACTIONS ===== */}\r\n        <div className=\"grid grid-cols-1 md:grid-cols-3 gap-4\">\r\n          <Button\r\n            variant=\"secondary\"\r\n            onClick={() => navigate('/student/history')}\r\n            className=\"py-3 text-base\"\r\n          >\r\n            📋 Attendance History\r\n          </Button>\r\n          <Button\r\n            variant=\"secondary\"\r\n            onClick={() => navigate('/student/courses')}\r\n            className=\"py-3 text-base\"\r\n          >\r\n            📚 All Courses\r\n          </Button>\r\n          <Button\r\n            variant=\"secondary\"\r\n            onClick={() => navigate('/student/profile')}\r\n            className=\"py-3 text-base\"\r\n          >\r\n            👤 My Profile\r\n          </Button>\r\n        </div>\r\n      </div>\r\n    </Layout>\r\n  );\r\n};\r\n\r\nexport default StudentDashboard;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}