{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\PFI\\\\Desktop\\\\ATTENDANCE\\\\ATTENDANCE\\\\src\\\\pages\\\\StudentDashboard.js\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect } from 'react';\nimport { useNavigate } from 'react-router-dom';\nimport { supabase } from '../supabase/supabase';\nimport { useAuth } from '../contexts/AuthContext';\nimport Layout from '../components/Layout';\nimport Card from '../components/Card';\nimport Button from '../components/Button';\nimport Badge from '../components/Badge';\nimport Alert from '../components/Alert';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst StudentDashboard = () => {\n  _s();\n  var _selectedSession$clas, _selectedSession$clas2, _selectedSession$clas3, _selectedSession$clas4;\n  const {\n    currentUser,\n    userRole,\n    loading\n  } = useAuth();\n  const navigate = useNavigate();\n\n  // State for attendance marking\n  const [activeSessions, setActiveSessions] = useState([]);\n  const [sessionsLoading, setSessionsLoading] = useState(true);\n  const [selectedSession, setSelectedSession] = useState(null);\n  const [marking, setMarking] = useState(false);\n\n  // State for attendance records\n  const [courseAttendance, setCourseAttendance] = useState([]);\n  const [attendanceLoading, setAttendanceLoading] = useState(true);\n  const [showAttendanceHistory, setShowAttendanceHistory] = useState(null);\n\n  // State for profile\n  const [profile, setProfile] = useState(null);\n  const [profileLoading, setProfileLoading] = useState(true);\n  const [editingProfile, setEditingProfile] = useState(false);\n  const [editedProfile, setEditedProfile] = useState({});\n  const [savingProfile, setSavingProfile] = useState(false);\n\n  // State for password change\n  const [showPasswordForm, setShowPasswordForm] = useState(false);\n  const [passwordForm, setPasswordForm] = useState({\n    currentPassword: '',\n    newPassword: '',\n    confirmPassword: ''\n  });\n  const [changingPassword, setChangingPassword] = useState(false);\n  const [error, setError] = useState(null);\n  const [success, setSuccess] = useState(null);\n\n  // Protect route - only allow students\n  useEffect(() => {\n    if (loading) return;\n    if (!currentUser || userRole !== 'student') {\n      navigate('/student');\n      return;\n    }\n    fetchProfile();\n    fetchActiveSessions();\n    fetchCourseAttendance();\n  }, [currentUser, userRole, loading, navigate]);\n  const fetchProfile = async () => {\n    try {\n      setProfileLoading(true);\n      const {\n        data,\n        error\n      } = await supabase.from('users').select('id, name, matricule, email, role').eq('id', currentUser.id).single();\n      if (error) throw error;\n      setProfile(data);\n      setEditedProfile(data);\n    } catch (err) {\n      console.error('Error fetching profile:', err);\n      setError('Failed to load profile');\n    } finally {\n      setProfileLoading(false);\n    }\n  };\n  const fetchActiveSessions = async () => {\n    try {\n      setSessionsLoading(true);\n      const now = new Date().toISOString();\n\n      // Get active sessions where student can mark attendance\n      const {\n        data,\n        error\n      } = await supabase.from('sessions').select(`\n          id,\n          session_date,\n          start_time,\n          end_time,\n          classes (\n            id,\n            class_name,\n            courses (\n              course_code,\n              course_title\n            )\n          )\n        `).lte('start_time', now.split('T')[1]).gte('end_time', now.split('T')[1]).order('start_time', {\n        ascending: false\n      });\n      if (error) throw error;\n      setActiveSessions(data || []);\n    } catch (err) {\n      console.error('Error fetching active sessions:', err);\n      setActiveSessions([]);\n    } finally {\n      setSessionsLoading(false);\n    }\n  };\n  const fetchCourseAttendance = async () => {\n    try {\n      setAttendanceLoading(true);\n\n      // Get all attendance records for this student\n      const {\n        data: attendanceRecords,\n        error\n      } = await supabase.from('attendance').select(`\n          id,\n          created_at,\n          sessions (\n            id,\n            session_date,\n            start_time,\n            end_time,\n            classes (\n              id,\n              class_name,\n              courses (\n                id,\n                course_code,\n                course_title\n              )\n            )\n          )\n        `).eq('student_id', currentUser.id).order('created_at', {\n        ascending: false\n      });\n      if (error) throw error;\n\n      // Group by course\n      const courseMap = {};\n      (attendanceRecords || []).forEach(record => {\n        var _record$sessions, _record$sessions$clas;\n        const course = (_record$sessions = record.sessions) === null || _record$sessions === void 0 ? void 0 : (_record$sessions$clas = _record$sessions.classes) === null || _record$sessions$clas === void 0 ? void 0 : _record$sessions$clas.courses;\n        const courseKey = course === null || course === void 0 ? void 0 : course.id;\n        if (courseKey) {\n          if (!courseMap[courseKey]) {\n            courseMap[courseKey] = {\n              id: courseKey,\n              code: course.course_code,\n              title: course.course_title,\n              totalSessions: 0,\n              attendedSessions: 0,\n              records: []\n            };\n          }\n          courseMap[courseKey].attendedSessions++;\n          courseMap[courseKey].records.push({\n            id: record.id,\n            date: record.sessions.session_date,\n            time: new Date(record.created_at).toLocaleTimeString([], {\n              hour: '2-digit',\n              minute: '2-digit'\n            })\n          });\n        }\n      });\n\n      // Get total sessions per course\n      const {\n        data: allSessions\n      } = await supabase.from('sessions').select(`\n          classes (\n            courses (\n              id\n            )\n          )\n        `);\n      Object.values(courseMap).forEach(course => {\n        const sessionsForCourse = (allSessions || []).filter(s => {\n          var _s$classes, _s$classes$courses;\n          return ((_s$classes = s.classes) === null || _s$classes === void 0 ? void 0 : (_s$classes$courses = _s$classes.courses) === null || _s$classes$courses === void 0 ? void 0 : _s$classes$courses.id) === course.id;\n        }).length;\n        course.totalSessions = sessionsForCourse || course.attendedSessions;\n        course.percentage = course.totalSessions > 0 ? Math.round(course.attendedSessions / course.totalSessions * 100) : 0;\n        course.eligible = course.percentage >= 75;\n      });\n      setCourseAttendance(Object.values(courseMap));\n    } catch (err) {\n      console.error('Error fetching attendance:', err);\n      setCourseAttendance([]);\n    } finally {\n      setAttendanceLoading(false);\n    }\n  };\n  const handleMarkAttendance = async () => {\n    if (!selectedSession) {\n      setError('Please select a session first');\n      return;\n    }\n    try {\n      setMarking(true);\n      setError(null);\n\n      // Check current time\n      const now = new Date();\n      const [startHour, startMin] = selectedSession.start_time.split(':');\n      const [endHour, endMin] = selectedSession.end_time.split(':');\n      const startTime = new Date();\n      startTime.setHours(parseInt(startHour), parseInt(startMin), 0);\n      const endTime = new Date();\n      endTime.setHours(parseInt(endHour), parseInt(endMin), 59);\n      if (now < startTime || now > endTime) {\n        setError('‚ùå You can only mark attendance during the session time window');\n        return;\n      }\n\n      // Check if already marked\n      const {\n        data: existing\n      } = await supabase.from('attendance').select('id').eq('session_id', selectedSession.id).eq('student_id', currentUser.id).single();\n      if (existing) {\n        setError('‚ùå You have already marked attendance for this session');\n        return;\n      }\n\n      // Mark attendance\n      const {\n        error: insertError\n      } = await supabase.from('attendance').insert({\n        session_id: selectedSession.id,\n        student_id: currentUser.id,\n        created_at: new Date().toISOString()\n      });\n      if (insertError) throw insertError;\n      setSuccess('‚úÖ Attendance marked successfully!');\n      setSelectedSession(null);\n      fetchActiveSessions();\n      fetchCourseAttendance();\n      setTimeout(() => setSuccess(null), 3000);\n    } catch (err) {\n      console.error('Error marking attendance:', err);\n      setError(`‚ùå Error: ${err.message}`);\n    } finally {\n      setMarking(false);\n    }\n  };\n  const handleSaveProfile = async () => {\n    if (!editedProfile.name || !editedProfile.name.trim()) {\n      setError('Name cannot be empty');\n      return;\n    }\n    try {\n      setSavingProfile(true);\n      setError(null);\n      const {\n        error\n      } = await supabase.from('users').update({\n        name: editedProfile.name\n      }).eq('id', currentUser.id);\n      if (error) throw error;\n      setProfile(editedProfile);\n      setEditingProfile(false);\n      setSuccess('‚úÖ Profile updated successfully!');\n      setTimeout(() => setSuccess(null), 3000);\n    } catch (err) {\n      console.error('Error updating profile:', err);\n      setError(`‚ùå Error: ${err.message}`);\n    } finally {\n      setSavingProfile(false);\n    }\n  };\n  const handleChangePassword = async () => {\n    if (!passwordForm.currentPassword || !passwordForm.newPassword || !passwordForm.confirmPassword) {\n      setError('All password fields are required');\n      return;\n    }\n    if (passwordForm.newPassword.length < 8) {\n      setError('New password must be at least 8 characters');\n      return;\n    }\n    if (passwordForm.newPassword !== passwordForm.confirmPassword) {\n      setError('New password and confirmation do not match');\n      return;\n    }\n    try {\n      setChangingPassword(true);\n      setError(null);\n      const {\n        error\n      } = await supabase.auth.updateUser({\n        password: passwordForm.newPassword\n      });\n      if (error) throw error;\n      setSuccess('‚úÖ Password changed successfully!');\n      setShowPasswordForm(false);\n      setPasswordForm({\n        currentPassword: '',\n        newPassword: '',\n        confirmPassword: ''\n      });\n      setTimeout(() => setSuccess(null), 3000);\n    } catch (err) {\n      console.error('Error changing password:', err);\n      setError(`‚ùå Error: ${err.message}`);\n    } finally {\n      setChangingPassword(false);\n    }\n  };\n  if (loading) {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"flex items-center justify-center h-screen bg-blue-50\",\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"text-center\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"inline-block animate-spin rounded-full h-16 w-16 border-4 border-blue-200 border-t-blue-600 mb-4\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 343,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          className: \"text-gray-600 font-medium\",\n          children: \"Loading dashboard...\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 344,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 342,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 341,\n      columnNumber: 7\n    }, this);\n  }\n  if (!currentUser || userRole !== 'student') {\n    return null;\n  }\n  return /*#__PURE__*/_jsxDEV(Layout, {\n    role: \"student\",\n    children: /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"space-y-8\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n          className: \"text-3xl font-bold mb-2\",\n          children: \"Student Dashboard\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 358,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          className: \"text-gray-600\",\n          children: \"Mark your attendance, view records, and manage your profile\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 359,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 357,\n        columnNumber: 9\n      }, this), error && /*#__PURE__*/_jsxDEV(Alert, {\n        type: \"error\",\n        title: \"Error\",\n        message: error\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 363,\n        columnNumber: 11\n      }, this), success && /*#__PURE__*/_jsxDEV(Alert, {\n        type: \"success\",\n        title: \"Success\",\n        message: success\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 367,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(Card, {\n        title: \"\\u2705 Mark Attendance\",\n        children: sessionsLoading ? /*#__PURE__*/_jsxDEV(\"p\", {\n          className: \"text-gray-600\",\n          children: \"Loading active sessions...\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 373,\n          columnNumber: 13\n        }, this) : activeSessions.length > 0 ? /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"space-y-4\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            children: [/*#__PURE__*/_jsxDEV(\"label\", {\n              className: \"block text-sm font-semibold text-gray-700 mb-2\",\n              children: \"Select Active Session\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 377,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"select\", {\n              value: (selectedSession === null || selectedSession === void 0 ? void 0 : selectedSession.id) || '',\n              onChange: e => {\n                const session = activeSessions.find(s => s.id === e.target.value);\n                setSelectedSession(session);\n              },\n              className: \"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500\",\n              children: [/*#__PURE__*/_jsxDEV(\"option\", {\n                value: \"\",\n                children: \"-- Select a session --\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 388,\n                columnNumber: 19\n              }, this), activeSessions.map(session => {\n                var _session$classes, _session$classes$cour, _session$classes2;\n                return /*#__PURE__*/_jsxDEV(\"option\", {\n                  value: session.id,\n                  children: [(_session$classes = session.classes) === null || _session$classes === void 0 ? void 0 : (_session$classes$cour = _session$classes.courses) === null || _session$classes$cour === void 0 ? void 0 : _session$classes$cour.course_code, \" - \", (_session$classes2 = session.classes) === null || _session$classes2 === void 0 ? void 0 : _session$classes2.class_name, \"(\", session.start_time, \" - \", session.end_time, \")\"]\n                }, session.id, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 390,\n                  columnNumber: 21\n                }, this);\n              })]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 380,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 376,\n            columnNumber: 15\n          }, this), selectedSession && /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"bg-blue-50 p-4 rounded-lg border border-blue-200\",\n            children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n              className: \"font-semibold text-gray-900\",\n              children: [(_selectedSession$clas = selectedSession.classes) === null || _selectedSession$clas === void 0 ? void 0 : (_selectedSession$clas2 = _selectedSession$clas.courses) === null || _selectedSession$clas2 === void 0 ? void 0 : _selectedSession$clas2.course_code, \" - \", (_selectedSession$clas3 = selectedSession.classes) === null || _selectedSession$clas3 === void 0 ? void 0 : (_selectedSession$clas4 = _selectedSession$clas3.courses) === null || _selectedSession$clas4 === void 0 ? void 0 : _selectedSession$clas4.course_title]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 400,\n              columnNumber: 19\n            }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n              className: \"text-sm text-gray-600 mt-2\",\n              children: [\"\\uD83D\\uDCC5 \", selectedSession.session_date]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 403,\n              columnNumber: 19\n            }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n              className: \"text-sm text-gray-600\",\n              children: [\"\\uD83D\\uDD50 \", selectedSession.start_time, \" - \", selectedSession.end_time]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 406,\n              columnNumber: 19\n            }, this), /*#__PURE__*/_jsxDEV(Button, {\n              variant: \"primary\",\n              onClick: handleMarkAttendance,\n              disabled: marking,\n              className: \"mt-4\",\n              children: marking ? '‚è≥ Marking...' : '‚úÖ Mark Present'\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 409,\n              columnNumber: 19\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 399,\n            columnNumber: 17\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 375,\n          columnNumber: 13\n        }, this) : /*#__PURE__*/_jsxDEV(\"p\", {\n          className: \"text-gray-600\",\n          children: \"No active sessions available at this time\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 421,\n          columnNumber: 13\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 371,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Card, {\n        title: \"\\uD83D\\uDCCA Attendance Records\",\n        children: attendanceLoading ? /*#__PURE__*/_jsxDEV(\"p\", {\n          className: \"text-gray-600\",\n          children: \"Loading attendance records...\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 428,\n          columnNumber: 13\n        }, this) : courseAttendance.length > 0 ? /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"space-y-4\",\n          children: courseAttendance.map(course => /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"p-4 border border-gray-200 rounded-lg\",\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"flex justify-between items-start mb-3\",\n              children: /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"flex-1\",\n                children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n                  className: \"font-semibold text-gray-900\",\n                  children: [course.code, \" - \", course.title]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 435,\n                  columnNumber: 23\n                }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"mt-2 grid grid-cols-3 gap-4\",\n                  children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                    children: [/*#__PURE__*/_jsxDEV(\"p\", {\n                      className: \"text-xs text-gray-600\",\n                      children: \"Attendance\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 440,\n                      columnNumber: 27\n                    }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                      className: \"text-lg font-bold text-blue-600\",\n                      children: [course.attendedSessions, \"/\", course.totalSessions]\n                    }, void 0, true, {\n                      fileName: _jsxFileName,\n                      lineNumber: 441,\n                      columnNumber: 27\n                    }, this)]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 439,\n                    columnNumber: 25\n                  }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                    children: [/*#__PURE__*/_jsxDEV(\"p\", {\n                      className: \"text-xs text-gray-600\",\n                      children: \"Percentage\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 446,\n                      columnNumber: 27\n                    }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                      className: \"text-lg font-bold text-blue-600\",\n                      children: [course.percentage, \"%\"]\n                    }, void 0, true, {\n                      fileName: _jsxFileName,\n                      lineNumber: 447,\n                      columnNumber: 27\n                    }, this)]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 445,\n                    columnNumber: 25\n                  }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                    children: [/*#__PURE__*/_jsxDEV(\"p\", {\n                      className: \"text-xs text-gray-600\",\n                      children: \"Status\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 450,\n                      columnNumber: 27\n                    }, this), /*#__PURE__*/_jsxDEV(Badge, {\n                      label: course.eligible ? 'ELIGIBLE' : 'NOT ELIGIBLE',\n                      variant: course.eligible ? 'success' : 'danger'\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 451,\n                      columnNumber: 27\n                    }, this)]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 449,\n                    columnNumber: 25\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 438,\n                  columnNumber: 23\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 434,\n                columnNumber: 21\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 433,\n              columnNumber: 19\n            }, this), /*#__PURE__*/_jsxDEV(Button, {\n              variant: \"secondary\",\n              size: \"sm\",\n              onClick: () => setShowAttendanceHistory(showAttendanceHistory === course.id ? null : course.id),\n              children: showAttendanceHistory === course.id ? '‚ñº Hide History' : '‚ñ∂ View History'\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 460,\n              columnNumber: 19\n            }, this), showAttendanceHistory === course.id && /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"mt-4 border-t pt-4\",\n              children: course.records.length > 0 ? /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"space-y-2\",\n                children: course.records.map(record => /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"flex justify-between text-sm bg-gray-50 p-2 rounded\",\n                  children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                    className: \"text-gray-700\",\n                    children: [\"\\uD83D\\uDCC5 \", record.date]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 476,\n                    columnNumber: 31\n                  }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                    className: \"text-gray-600\",\n                    children: [\"\\uD83D\\uDD50 \", record.time]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 477,\n                    columnNumber: 31\n                  }, this), /*#__PURE__*/_jsxDEV(Badge, {\n                    label: \"PRESENT\",\n                    variant: \"success\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 478,\n                    columnNumber: 31\n                  }, this)]\n                }, record.id, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 475,\n                  columnNumber: 29\n                }, this))\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 473,\n                columnNumber: 25\n              }, this) : /*#__PURE__*/_jsxDEV(\"p\", {\n                className: \"text-gray-600\",\n                children: \"No attendance records\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 483,\n                columnNumber: 25\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 471,\n              columnNumber: 21\n            }, this)]\n          }, course.id, true, {\n            fileName: _jsxFileName,\n            lineNumber: 432,\n            columnNumber: 17\n          }, this))\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 430,\n          columnNumber: 13\n        }, this) : /*#__PURE__*/_jsxDEV(\"p\", {\n          className: \"text-gray-600\",\n          children: \"No attendance records yet\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 491,\n          columnNumber: 13\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 426,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Card, {\n        title: \"\\uD83D\\uDC64 Profile Management\",\n        children: profileLoading ? /*#__PURE__*/_jsxDEV(\"p\", {\n          className: \"text-gray-600\",\n          children: \"Loading profile...\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 498,\n          columnNumber: 13\n        }, this) : profile ? /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"space-y-4\",\n          children: [!editingProfile && !showPasswordForm && /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"space-y-3\",\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              children: [/*#__PURE__*/_jsxDEV(\"p\", {\n                className: \"text-xs text-gray-600\",\n                children: \"Full Name\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 504,\n                columnNumber: 21\n              }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                className: \"text-lg font-semibold text-gray-900\",\n                children: profile.name\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 505,\n                columnNumber: 21\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 503,\n              columnNumber: 19\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              children: [/*#__PURE__*/_jsxDEV(\"p\", {\n                className: \"text-xs text-gray-600\",\n                children: \"Matricule Number\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 508,\n                columnNumber: 21\n              }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                className: \"text-lg font-semibold text-gray-900\",\n                children: profile.matricule\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 509,\n                columnNumber: 21\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 507,\n              columnNumber: 19\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              children: [/*#__PURE__*/_jsxDEV(\"p\", {\n                className: \"text-xs text-gray-600\",\n                children: \"Email\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 512,\n                columnNumber: 21\n              }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                className: \"text-lg font-semibold text-gray-900\",\n                children: profile.email\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 513,\n                columnNumber: 21\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 511,\n              columnNumber: 19\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"flex gap-2 pt-4\",\n              children: [/*#__PURE__*/_jsxDEV(Button, {\n                variant: \"primary\",\n                size: \"sm\",\n                onClick: () => setEditingProfile(true),\n                children: \"\\u270F\\uFE0F Edit Profile\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 517,\n                columnNumber: 21\n              }, this), /*#__PURE__*/_jsxDEV(Button, {\n                variant: \"secondary\",\n                size: \"sm\",\n                onClick: () => setShowPasswordForm(true),\n                children: \"\\uD83D\\uDD11 Change Password\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 524,\n                columnNumber: 21\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 516,\n              columnNumber: 19\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 502,\n            columnNumber: 17\n          }, this), editingProfile && /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"space-y-4 bg-gray-50 p-4 rounded-lg\",\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                className: \"block text-sm font-semibold text-gray-700 mb-2\",\n                children: \"Full Name\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 538,\n                columnNumber: 21\n              }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n                type: \"text\",\n                value: editedProfile.name || '',\n                onChange: e => setEditedProfile(prev => ({\n                  ...prev,\n                  name: e.target.value\n                })),\n                className: \"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 541,\n                columnNumber: 21\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 537,\n              columnNumber: 19\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"flex gap-2\",\n              children: [/*#__PURE__*/_jsxDEV(Button, {\n                variant: \"primary\",\n                size: \"sm\",\n                onClick: handleSaveProfile,\n                disabled: savingProfile,\n                children: savingProfile ? 'üíæ Saving...' : 'üíæ Save Changes'\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 550,\n                columnNumber: 21\n              }, this), /*#__PURE__*/_jsxDEV(Button, {\n                variant: \"secondary\",\n                size: \"sm\",\n                onClick: () => {\n                  setEditingProfile(false);\n                  setEditedProfile(profile);\n                },\n                children: \"\\u2715 Cancel\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 558,\n                columnNumber: 21\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 549,\n              columnNumber: 19\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 536,\n            columnNumber: 17\n          }, this), showPasswordForm && /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"space-y-4 bg-gray-50 p-4 rounded-lg\",\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                className: \"block text-sm font-semibold text-gray-700 mb-2\",\n                children: \"Current Password\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 575,\n                columnNumber: 21\n              }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n                type: \"password\",\n                value: passwordForm.currentPassword,\n                onChange: e => setPasswordForm(prev => ({\n                  ...prev,\n                  currentPassword: e.target.value\n                })),\n                className: \"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 578,\n                columnNumber: 21\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 574,\n              columnNumber: 19\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                className: \"block text-sm font-semibold text-gray-700 mb-2\",\n                children: \"New Password (min 8 characters)\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 587,\n                columnNumber: 21\n              }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n                type: \"password\",\n                value: passwordForm.newPassword,\n                onChange: e => setPasswordForm(prev => ({\n                  ...prev,\n                  newPassword: e.target.value\n                })),\n                className: \"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 590,\n                columnNumber: 21\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 586,\n              columnNumber: 19\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                className: \"block text-sm font-semibold text-gray-700 mb-2\",\n                children: \"Confirm Password\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 599,\n                columnNumber: 21\n              }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n                type: \"password\",\n                value: passwordForm.confirmPassword,\n                onChange: e => setPasswordForm(prev => ({\n                  ...prev,\n                  confirmPassword: e.target.value\n                })),\n                className: \"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 602,\n                columnNumber: 21\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 598,\n              columnNumber: 19\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"flex gap-2\",\n              children: [/*#__PURE__*/_jsxDEV(Button, {\n                variant: \"primary\",\n                size: \"sm\",\n                onClick: handleChangePassword,\n                disabled: changingPassword,\n                children: changingPassword ? '‚è≥ Updating...' : '‚úÖ Update Password'\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 611,\n                columnNumber: 21\n              }, this), /*#__PURE__*/_jsxDEV(Button, {\n                variant: \"secondary\",\n                size: \"sm\",\n                onClick: () => {\n                  setShowPasswordForm(false);\n                  setPasswordForm({\n                    currentPassword: '',\n                    newPassword: '',\n                    confirmPassword: ''\n                  });\n                },\n                children: \"\\u2715 Cancel\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 619,\n                columnNumber: 21\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 610,\n              columnNumber: 19\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 573,\n            columnNumber: 17\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 500,\n          columnNumber: 13\n        }, this) : /*#__PURE__*/_jsxDEV(\"p\", {\n          className: \"text-gray-600\",\n          children: \"Could not load profile\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 634,\n          columnNumber: 13\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 496,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 356,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 355,\n    columnNumber: 5\n  }, this);\n};\n_s(StudentDashboard, \"GdYv9G30I8A8j61dsilQUjR5M4Y=\", false, function () {\n  return [useAuth, useNavigate];\n});\n_c = StudentDashboard;\nexport default StudentDashboard;\nvar _c;\n$RefreshReg$(_c, \"StudentDashboard\");","map":{"version":3,"names":["React","useState","useEffect","useNavigate","supabase","useAuth","Layout","Card","Button","Badge","Alert","jsxDEV","_jsxDEV","StudentDashboard","_s","_selectedSession$clas","_selectedSession$clas2","_selectedSession$clas3","_selectedSession$clas4","currentUser","userRole","loading","navigate","activeSessions","setActiveSessions","sessionsLoading","setSessionsLoading","selectedSession","setSelectedSession","marking","setMarking","courseAttendance","setCourseAttendance","attendanceLoading","setAttendanceLoading","showAttendanceHistory","setShowAttendanceHistory","profile","setProfile","profileLoading","setProfileLoading","editingProfile","setEditingProfile","editedProfile","setEditedProfile","savingProfile","setSavingProfile","showPasswordForm","setShowPasswordForm","passwordForm","setPasswordForm","currentPassword","newPassword","confirmPassword","changingPassword","setChangingPassword","error","setError","success","setSuccess","fetchProfile","fetchActiveSessions","fetchCourseAttendance","data","from","select","eq","id","single","err","console","now","Date","toISOString","lte","split","gte","order","ascending","attendanceRecords","courseMap","forEach","record","_record$sessions","_record$sessions$clas","course","sessions","classes","courses","courseKey","code","course_code","title","course_title","totalSessions","attendedSessions","records","push","date","session_date","time","created_at","toLocaleTimeString","hour","minute","allSessions","Object","values","sessionsForCourse","filter","s","_s$classes","_s$classes$courses","length","percentage","Math","round","eligible","handleMarkAttendance","startHour","startMin","start_time","endHour","endMin","end_time","startTime","setHours","parseInt","endTime","existing","insertError","insert","session_id","student_id","setTimeout","message","handleSaveProfile","name","trim","update","handleChangePassword","auth","updateUser","password","className","children","fileName","_jsxFileName","lineNumber","columnNumber","role","type","value","onChange","e","session","find","target","map","_session$classes","_session$classes$cour","_session$classes2","class_name","variant","onClick","disabled","label","size","matricule","email","prev","_c","$RefreshReg$"],"sources":["C:/Users/PFI/Desktop/ATTENDANCE/ATTENDANCE/src/pages/StudentDashboard.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\r\nimport { useNavigate } from 'react-router-dom';\r\nimport { supabase } from '../supabase/supabase';\r\nimport { useAuth } from '../contexts/AuthContext';\r\nimport Layout from '../components/Layout';\r\nimport Card from '../components/Card';\r\nimport Button from '../components/Button';\r\nimport Badge from '../components/Badge';\r\nimport Alert from '../components/Alert';\r\n\r\nconst StudentDashboard = () => {\r\n  const { currentUser, userRole, loading } = useAuth();\r\n  const navigate = useNavigate();\r\n  \r\n  // State for attendance marking\r\n  const [activeSessions, setActiveSessions] = useState([]);\r\n  const [sessionsLoading, setSessionsLoading] = useState(true);\r\n  const [selectedSession, setSelectedSession] = useState(null);\r\n  const [marking, setMarking] = useState(false);\r\n  \r\n  // State for attendance records\r\n  const [courseAttendance, setCourseAttendance] = useState([]);\r\n  const [attendanceLoading, setAttendanceLoading] = useState(true);\r\n  const [showAttendanceHistory, setShowAttendanceHistory] = useState(null);\r\n  \r\n  // State for profile\r\n  const [profile, setProfile] = useState(null);\r\n  const [profileLoading, setProfileLoading] = useState(true);\r\n  const [editingProfile, setEditingProfile] = useState(false);\r\n  const [editedProfile, setEditedProfile] = useState({});\r\n  const [savingProfile, setSavingProfile] = useState(false);\r\n  \r\n  // State for password change\r\n  const [showPasswordForm, setShowPasswordForm] = useState(false);\r\n  const [passwordForm, setPasswordForm] = useState({\r\n    currentPassword: '',\r\n    newPassword: '',\r\n    confirmPassword: ''\r\n  });\r\n  const [changingPassword, setChangingPassword] = useState(false);\r\n  \r\n  const [error, setError] = useState(null);\r\n  const [success, setSuccess] = useState(null);\r\n\r\n  // Protect route - only allow students\r\n  useEffect(() => {\r\n    if (loading) return;\r\n\r\n    if (!currentUser || userRole !== 'student') {\r\n      navigate('/student');\r\n      return;\r\n    }\r\n\r\n    fetchProfile();\r\n    fetchActiveSessions();\r\n    fetchCourseAttendance();\r\n  }, [currentUser, userRole, loading, navigate]);\r\n\r\n  const fetchProfile = async () => {\r\n    try {\r\n      setProfileLoading(true);\r\n      const { data, error } = await supabase\r\n        .from('users')\r\n        .select('id, name, matricule, email, role')\r\n        .eq('id', currentUser.id)\r\n        .single();\r\n\r\n      if (error) throw error;\r\n      setProfile(data);\r\n      setEditedProfile(data);\r\n    } catch (err) {\r\n      console.error('Error fetching profile:', err);\r\n      setError('Failed to load profile');\r\n    } finally {\r\n      setProfileLoading(false);\r\n    }\r\n  };\r\n\r\n  const fetchActiveSessions = async () => {\r\n    try {\r\n      setSessionsLoading(true);\r\n      const now = new Date().toISOString();\r\n\r\n      // Get active sessions where student can mark attendance\r\n      const { data, error } = await supabase\r\n        .from('sessions')\r\n        .select(`\r\n          id,\r\n          session_date,\r\n          start_time,\r\n          end_time,\r\n          classes (\r\n            id,\r\n            class_name,\r\n            courses (\r\n              course_code,\r\n              course_title\r\n            )\r\n          )\r\n        `)\r\n        .lte('start_time', now.split('T')[1])\r\n        .gte('end_time', now.split('T')[1])\r\n        .order('start_time', { ascending: false });\r\n\r\n      if (error) throw error;\r\n      setActiveSessions(data || []);\r\n    } catch (err) {\r\n      console.error('Error fetching active sessions:', err);\r\n      setActiveSessions([]);\r\n    } finally {\r\n      setSessionsLoading(false);\r\n    }\r\n  };\r\n\r\n  const fetchCourseAttendance = async () => {\r\n    try {\r\n      setAttendanceLoading(true);\r\n\r\n      // Get all attendance records for this student\r\n      const { data: attendanceRecords, error } = await supabase\r\n        .from('attendance')\r\n        .select(`\r\n          id,\r\n          created_at,\r\n          sessions (\r\n            id,\r\n            session_date,\r\n            start_time,\r\n            end_time,\r\n            classes (\r\n              id,\r\n              class_name,\r\n              courses (\r\n                id,\r\n                course_code,\r\n                course_title\r\n              )\r\n            )\r\n          )\r\n        `)\r\n        .eq('student_id', currentUser.id)\r\n        .order('created_at', { ascending: false });\r\n\r\n      if (error) throw error;\r\n\r\n      // Group by course\r\n      const courseMap = {};\r\n      (attendanceRecords || []).forEach(record => {\r\n        const course = record.sessions?.classes?.courses;\r\n        const courseKey = course?.id;\r\n        \r\n        if (courseKey) {\r\n          if (!courseMap[courseKey]) {\r\n            courseMap[courseKey] = {\r\n              id: courseKey,\r\n              code: course.course_code,\r\n              title: course.course_title,\r\n              totalSessions: 0,\r\n              attendedSessions: 0,\r\n              records: []\r\n            };\r\n          }\r\n          courseMap[courseKey].attendedSessions++;\r\n          courseMap[courseKey].records.push({\r\n            id: record.id,\r\n            date: record.sessions.session_date,\r\n            time: new Date(record.created_at).toLocaleTimeString([], { \r\n              hour: '2-digit', \r\n              minute: '2-digit' \r\n            })\r\n          });\r\n        }\r\n      });\r\n\r\n      // Get total sessions per course\r\n      const { data: allSessions } = await supabase\r\n        .from('sessions')\r\n        .select(`\r\n          classes (\r\n            courses (\r\n              id\r\n            )\r\n          )\r\n        `);\r\n\r\n      Object.values(courseMap).forEach(course => {\r\n        const sessionsForCourse = (allSessions || []).filter(\r\n          s => s.classes?.courses?.id === course.id\r\n        ).length;\r\n        course.totalSessions = sessionsForCourse || course.attendedSessions;\r\n        course.percentage = course.totalSessions > 0 \r\n          ? Math.round((course.attendedSessions / course.totalSessions) * 100)\r\n          : 0;\r\n        course.eligible = course.percentage >= 75;\r\n      });\r\n\r\n      setCourseAttendance(Object.values(courseMap));\r\n    } catch (err) {\r\n      console.error('Error fetching attendance:', err);\r\n      setCourseAttendance([]);\r\n    } finally {\r\n      setAttendanceLoading(false);\r\n    }\r\n  };\r\n\r\n  const handleMarkAttendance = async () => {\r\n    if (!selectedSession) {\r\n      setError('Please select a session first');\r\n      return;\r\n    }\r\n\r\n    try {\r\n      setMarking(true);\r\n      setError(null);\r\n\r\n      // Check current time\r\n      const now = new Date();\r\n      const [startHour, startMin] = selectedSession.start_time.split(':');\r\n      const [endHour, endMin] = selectedSession.end_time.split(':');\r\n\r\n      const startTime = new Date();\r\n      startTime.setHours(parseInt(startHour), parseInt(startMin), 0);\r\n\r\n      const endTime = new Date();\r\n      endTime.setHours(parseInt(endHour), parseInt(endMin), 59);\r\n\r\n      if (now < startTime || now > endTime) {\r\n        setError('‚ùå You can only mark attendance during the session time window');\r\n        return;\r\n      }\r\n\r\n      // Check if already marked\r\n      const { data: existing } = await supabase\r\n        .from('attendance')\r\n        .select('id')\r\n        .eq('session_id', selectedSession.id)\r\n        .eq('student_id', currentUser.id)\r\n        .single();\r\n\r\n      if (existing) {\r\n        setError('‚ùå You have already marked attendance for this session');\r\n        return;\r\n      }\r\n\r\n      // Mark attendance\r\n      const { error: insertError } = await supabase\r\n        .from('attendance')\r\n        .insert({\r\n          session_id: selectedSession.id,\r\n          student_id: currentUser.id,\r\n          created_at: new Date().toISOString()\r\n        });\r\n\r\n      if (insertError) throw insertError;\r\n\r\n      setSuccess('‚úÖ Attendance marked successfully!');\r\n      setSelectedSession(null);\r\n      fetchActiveSessions();\r\n      fetchCourseAttendance();\r\n\r\n      setTimeout(() => setSuccess(null), 3000);\r\n    } catch (err) {\r\n      console.error('Error marking attendance:', err);\r\n      setError(`‚ùå Error: ${err.message}`);\r\n    } finally {\r\n      setMarking(false);\r\n    }\r\n  };\r\n\r\n  const handleSaveProfile = async () => {\r\n    if (!editedProfile.name || !editedProfile.name.trim()) {\r\n      setError('Name cannot be empty');\r\n      return;\r\n    }\r\n\r\n    try {\r\n      setSavingProfile(true);\r\n      setError(null);\r\n\r\n      const { error } = await supabase\r\n        .from('users')\r\n        .update({\r\n          name: editedProfile.name\r\n        })\r\n        .eq('id', currentUser.id);\r\n\r\n      if (error) throw error;\r\n\r\n      setProfile(editedProfile);\r\n      setEditingProfile(false);\r\n      setSuccess('‚úÖ Profile updated successfully!');\r\n      setTimeout(() => setSuccess(null), 3000);\r\n    } catch (err) {\r\n      console.error('Error updating profile:', err);\r\n      setError(`‚ùå Error: ${err.message}`);\r\n    } finally {\r\n      setSavingProfile(false);\r\n    }\r\n  };\r\n\r\n  const handleChangePassword = async () => {\r\n    if (!passwordForm.currentPassword || !passwordForm.newPassword || !passwordForm.confirmPassword) {\r\n      setError('All password fields are required');\r\n      return;\r\n    }\r\n\r\n    if (passwordForm.newPassword.length < 8) {\r\n      setError('New password must be at least 8 characters');\r\n      return;\r\n    }\r\n\r\n    if (passwordForm.newPassword !== passwordForm.confirmPassword) {\r\n      setError('New password and confirmation do not match');\r\n      return;\r\n    }\r\n\r\n    try {\r\n      setChangingPassword(true);\r\n      setError(null);\r\n\r\n      const { error } = await supabase.auth.updateUser({\r\n        password: passwordForm.newPassword\r\n      });\r\n\r\n      if (error) throw error;\r\n\r\n      setSuccess('‚úÖ Password changed successfully!');\r\n      setShowPasswordForm(false);\r\n      setPasswordForm({ currentPassword: '', newPassword: '', confirmPassword: '' });\r\n      setTimeout(() => setSuccess(null), 3000);\r\n    } catch (err) {\r\n      console.error('Error changing password:', err);\r\n      setError(`‚ùå Error: ${err.message}`);\r\n    } finally {\r\n      setChangingPassword(false);\r\n    }\r\n  };\r\n\r\n  if (loading) {\r\n    return (\r\n      <div className=\"flex items-center justify-center h-screen bg-blue-50\">\r\n        <div className=\"text-center\">\r\n          <div className=\"inline-block animate-spin rounded-full h-16 w-16 border-4 border-blue-200 border-t-blue-600 mb-4\" />\r\n          <p className=\"text-gray-600 font-medium\">Loading dashboard...</p>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  if (!currentUser || userRole !== 'student') {\r\n    return null;\r\n  }\r\n\r\n  return (\r\n    <Layout role=\"student\">\r\n      <div className=\"space-y-8\">\r\n        <div>\r\n          <h1 className=\"text-3xl font-bold mb-2\">Student Dashboard</h1>\r\n          <p className=\"text-gray-600\">Mark your attendance, view records, and manage your profile</p>\r\n        </div>\r\n\r\n        {error && (\r\n          <Alert type=\"error\" title=\"Error\" message={error} />\r\n        )}\r\n\r\n        {success && (\r\n          <Alert type=\"success\" title=\"Success\" message={success} />\r\n        )}\r\n\r\n        {/* Mark Attendance */}\r\n        <Card title=\"‚úÖ Mark Attendance\">\r\n          {sessionsLoading ? (\r\n            <p className=\"text-gray-600\">Loading active sessions...</p>\r\n          ) : activeSessions.length > 0 ? (\r\n            <div className=\"space-y-4\">\r\n              <div>\r\n                <label className=\"block text-sm font-semibold text-gray-700 mb-2\">\r\n                  Select Active Session\r\n                </label>\r\n                <select\r\n                  value={selectedSession?.id || ''}\r\n                  onChange={(e) => {\r\n                    const session = activeSessions.find(s => s.id === e.target.value);\r\n                    setSelectedSession(session);\r\n                  }}\r\n                  className=\"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500\"\r\n                >\r\n                  <option value=\"\">-- Select a session --</option>\r\n                  {activeSessions.map(session => (\r\n                    <option key={session.id} value={session.id}>\r\n                      {session.classes?.courses?.course_code} - {session.classes?.class_name}\r\n                      ({session.start_time} - {session.end_time})\r\n                    </option>\r\n                  ))}\r\n                </select>\r\n              </div>\r\n\r\n              {selectedSession && (\r\n                <div className=\"bg-blue-50 p-4 rounded-lg border border-blue-200\">\r\n                  <h3 className=\"font-semibold text-gray-900\">\r\n                    {selectedSession.classes?.courses?.course_code} - {selectedSession.classes?.courses?.course_title}\r\n                  </h3>\r\n                  <p className=\"text-sm text-gray-600 mt-2\">\r\n                    üìÖ {selectedSession.session_date}\r\n                  </p>\r\n                  <p className=\"text-sm text-gray-600\">\r\n                    üïê {selectedSession.start_time} - {selectedSession.end_time}\r\n                  </p>\r\n                  <Button\r\n                    variant=\"primary\"\r\n                    onClick={handleMarkAttendance}\r\n                    disabled={marking}\r\n                    className=\"mt-4\"\r\n                  >\r\n                    {marking ? '‚è≥ Marking...' : '‚úÖ Mark Present'}\r\n                  </Button>\r\n                </div>\r\n              )}\r\n            </div>\r\n          ) : (\r\n            <p className=\"text-gray-600\">No active sessions available at this time</p>\r\n          )}\r\n        </Card>\r\n\r\n        {/* Attendance Records */}\r\n        <Card title=\"üìä Attendance Records\">\r\n          {attendanceLoading ? (\r\n            <p className=\"text-gray-600\">Loading attendance records...</p>\r\n          ) : courseAttendance.length > 0 ? (\r\n            <div className=\"space-y-4\">\r\n              {courseAttendance.map((course) => (\r\n                <div key={course.id} className=\"p-4 border border-gray-200 rounded-lg\">\r\n                  <div className=\"flex justify-between items-start mb-3\">\r\n                    <div className=\"flex-1\">\r\n                      <h3 className=\"font-semibold text-gray-900\">\r\n                        {course.code} - {course.title}\r\n                      </h3>\r\n                      <div className=\"mt-2 grid grid-cols-3 gap-4\">\r\n                        <div>\r\n                          <p className=\"text-xs text-gray-600\">Attendance</p>\r\n                          <p className=\"text-lg font-bold text-blue-600\">\r\n                            {course.attendedSessions}/{course.totalSessions}\r\n                          </p>\r\n                        </div>\r\n                        <div>\r\n                          <p className=\"text-xs text-gray-600\">Percentage</p>\r\n                          <p className=\"text-lg font-bold text-blue-600\">{course.percentage}%</p>\r\n                        </div>\r\n                        <div>\r\n                          <p className=\"text-xs text-gray-600\">Status</p>\r\n                          <Badge\r\n                            label={course.eligible ? 'ELIGIBLE' : 'NOT ELIGIBLE'}\r\n                            variant={course.eligible ? 'success' : 'danger'}\r\n                          />\r\n                        </div>\r\n                      </div>\r\n                    </div>\r\n                  </div>\r\n\r\n                  <Button\r\n                    variant=\"secondary\"\r\n                    size=\"sm\"\r\n                    onClick={() => setShowAttendanceHistory(\r\n                      showAttendanceHistory === course.id ? null : course.id\r\n                    )}\r\n                  >\r\n                    {showAttendanceHistory === course.id ? '‚ñº Hide History' : '‚ñ∂ View History'}\r\n                  </Button>\r\n\r\n                  {showAttendanceHistory === course.id && (\r\n                    <div className=\"mt-4 border-t pt-4\">\r\n                      {course.records.length > 0 ? (\r\n                        <div className=\"space-y-2\">\r\n                          {course.records.map((record) => (\r\n                            <div key={record.id} className=\"flex justify-between text-sm bg-gray-50 p-2 rounded\">\r\n                              <span className=\"text-gray-700\">üìÖ {record.date}</span>\r\n                              <span className=\"text-gray-600\">üïê {record.time}</span>\r\n                              <Badge label=\"PRESENT\" variant=\"success\" />\r\n                            </div>\r\n                          ))}\r\n                        </div>\r\n                      ) : (\r\n                        <p className=\"text-gray-600\">No attendance records</p>\r\n                      )}\r\n                    </div>\r\n                  )}\r\n                </div>\r\n              ))}\r\n            </div>\r\n          ) : (\r\n            <p className=\"text-gray-600\">No attendance records yet</p>\r\n          )}\r\n        </Card>\r\n\r\n        {/* Profile Management */}\r\n        <Card title=\"üë§ Profile Management\">\r\n          {profileLoading ? (\r\n            <p className=\"text-gray-600\">Loading profile...</p>\r\n          ) : profile ? (\r\n            <div className=\"space-y-4\">\r\n              {!editingProfile && !showPasswordForm && (\r\n                <div className=\"space-y-3\">\r\n                  <div>\r\n                    <p className=\"text-xs text-gray-600\">Full Name</p>\r\n                    <p className=\"text-lg font-semibold text-gray-900\">{profile.name}</p>\r\n                  </div>\r\n                  <div>\r\n                    <p className=\"text-xs text-gray-600\">Matricule Number</p>\r\n                    <p className=\"text-lg font-semibold text-gray-900\">{profile.matricule}</p>\r\n                  </div>\r\n                  <div>\r\n                    <p className=\"text-xs text-gray-600\">Email</p>\r\n                    <p className=\"text-lg font-semibold text-gray-900\">{profile.email}</p>\r\n                  </div>\r\n\r\n                  <div className=\"flex gap-2 pt-4\">\r\n                    <Button\r\n                      variant=\"primary\"\r\n                      size=\"sm\"\r\n                      onClick={() => setEditingProfile(true)}\r\n                    >\r\n                      ‚úèÔ∏è Edit Profile\r\n                    </Button>\r\n                    <Button\r\n                      variant=\"secondary\"\r\n                      size=\"sm\"\r\n                      onClick={() => setShowPasswordForm(true)}\r\n                    >\r\n                      üîë Change Password\r\n                    </Button>\r\n                  </div>\r\n                </div>\r\n              )}\r\n\r\n              {editingProfile && (\r\n                <div className=\"space-y-4 bg-gray-50 p-4 rounded-lg\">\r\n                  <div>\r\n                    <label className=\"block text-sm font-semibold text-gray-700 mb-2\">\r\n                      Full Name\r\n                    </label>\r\n                    <input\r\n                      type=\"text\"\r\n                      value={editedProfile.name || ''}\r\n                      onChange={(e) => setEditedProfile(prev => ({ ...prev, name: e.target.value }))}\r\n                      className=\"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500\"\r\n                    />\r\n                  </div>\r\n\r\n                  <div className=\"flex gap-2\">\r\n                    <Button\r\n                      variant=\"primary\"\r\n                      size=\"sm\"\r\n                      onClick={handleSaveProfile}\r\n                      disabled={savingProfile}\r\n                    >\r\n                      {savingProfile ? 'üíæ Saving...' : 'üíæ Save Changes'}\r\n                    </Button>\r\n                    <Button\r\n                      variant=\"secondary\"\r\n                      size=\"sm\"\r\n                      onClick={() => {\r\n                        setEditingProfile(false);\r\n                        setEditedProfile(profile);\r\n                      }}\r\n                    >\r\n                      ‚úï Cancel\r\n                    </Button>\r\n                  </div>\r\n                </div>\r\n              )}\r\n\r\n              {showPasswordForm && (\r\n                <div className=\"space-y-4 bg-gray-50 p-4 rounded-lg\">\r\n                  <div>\r\n                    <label className=\"block text-sm font-semibold text-gray-700 mb-2\">\r\n                      Current Password\r\n                    </label>\r\n                    <input\r\n                      type=\"password\"\r\n                      value={passwordForm.currentPassword}\r\n                      onChange={(e) => setPasswordForm(prev => ({ ...prev, currentPassword: e.target.value }))}\r\n                      className=\"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500\"\r\n                    />\r\n                  </div>\r\n\r\n                  <div>\r\n                    <label className=\"block text-sm font-semibold text-gray-700 mb-2\">\r\n                      New Password (min 8 characters)\r\n                    </label>\r\n                    <input\r\n                      type=\"password\"\r\n                      value={passwordForm.newPassword}\r\n                      onChange={(e) => setPasswordForm(prev => ({ ...prev, newPassword: e.target.value }))}\r\n                      className=\"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500\"\r\n                    />\r\n                  </div>\r\n\r\n                  <div>\r\n                    <label className=\"block text-sm font-semibold text-gray-700 mb-2\">\r\n                      Confirm Password\r\n                    </label>\r\n                    <input\r\n                      type=\"password\"\r\n                      value={passwordForm.confirmPassword}\r\n                      onChange={(e) => setPasswordForm(prev => ({ ...prev, confirmPassword: e.target.value }))}\r\n                      className=\"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500\"\r\n                    />\r\n                  </div>\r\n\r\n                  <div className=\"flex gap-2\">\r\n                    <Button\r\n                      variant=\"primary\"\r\n                      size=\"sm\"\r\n                      onClick={handleChangePassword}\r\n                      disabled={changingPassword}\r\n                    >\r\n                      {changingPassword ? '‚è≥ Updating...' : '‚úÖ Update Password'}\r\n                    </Button>\r\n                    <Button\r\n                      variant=\"secondary\"\r\n                      size=\"sm\"\r\n                      onClick={() => {\r\n                        setShowPasswordForm(false);\r\n                        setPasswordForm({ currentPassword: '', newPassword: '', confirmPassword: '' });\r\n                      }}\r\n                    >\r\n                      ‚úï Cancel\r\n                    </Button>\r\n                  </div>\r\n                </div>\r\n              )}\r\n            </div>\r\n          ) : (\r\n            <p className=\"text-gray-600\">Could not load profile</p>\r\n          )}\r\n        </Card>\r\n      </div>\r\n    </Layout>\r\n  );\r\n};\r\n\r\nexport default StudentDashboard;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}